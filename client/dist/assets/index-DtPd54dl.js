var yw=Object.defineProperty;var _h=e=>{throw TypeError(e)};var mw=(e,t,r)=>t in e?yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var h=(e,t,r)=>mw(e,typeof t!="symbol"?t+"":t,r),Yu=(e,t,r)=>t.has(e)||_h("Cannot "+r);var R=(e,t,r)=>(Yu(e,t,"read from private field"),r?r.call(e):t.get(e)),We=(e,t,r)=>t.has(e)?_h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),me=(e,t,r,i)=>(Yu(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),_e=(e,t,r)=>(Yu(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function Tw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IT={exports:{}},cu={},AT={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),_w=Symbol.for("react.portal"),Sw=Symbol.for("react.fragment"),ww=Symbol.for("react.strict_mode"),bw=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),Iw=Symbol.for("react.context"),Aw=Symbol.for("react.forward_ref"),Cw=Symbol.for("react.suspense"),xw=Symbol.for("react.memo"),Ew=Symbol.for("react.lazy"),Sh=Symbol.iterator;function Rw(e){return e===null||typeof e!="object"?null:(e=Sh&&e[Sh]||e["@@iterator"],typeof e=="function"?e:null)}var CT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xT=Object.assign,ET={};function ps(e,t,r){this.props=e,this.context=t,this.refs=ET,this.updater=r||CT}ps.prototype.isReactComponent={};ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RT(){}RT.prototype=ps.prototype;function gg(e,t,r){this.props=e,this.context=t,this.refs=ET,this.updater=r||CT}var hg=gg.prototype=new RT;hg.constructor=gg;xT(hg,ps.prototype);hg.isPureReactComponent=!0;var wh=Array.isArray,kT=Object.prototype.hasOwnProperty,yg={current:null},zT={key:!0,ref:!0,__self:!0,__source:!0};function FT(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)kT.call(t,i)&&!zT.hasOwnProperty(i)&&(n[i]=t[i]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];n.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)n[i]===void 0&&(n[i]=l[i]);return{$$typeof:wo,type:e,key:s,ref:a,props:n,_owner:yg.current}}function kw(e,t){return{$$typeof:wo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mg(e){return typeof e=="object"&&e!==null&&e.$$typeof===wo}function zw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bh=/\/+/g;function $u(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zw(""+e.key):t.toString(36)}function va(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wo:case _w:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+$u(a,0):i,wh(n)?(r="",e!=null&&(r=e.replace(bh,"$&/")+"/"),va(n,t,r,"",function(d){return d})):n!=null&&(mg(n)&&(n=kw(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(bh,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",wh(e))for(var l=0;l<e.length;l++){s=e[l];var u=i+$u(s,l);a+=va(s,t,r,u,n)}else if(u=Rw(e),typeof u=="function")for(e=u.call(e),l=0;!(s=e.next()).done;)s=s.value,u=i+$u(s,l++),a+=va(s,t,r,u,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xo(e,t,r){if(e==null)return e;var i=[],n=0;return va(e,i,"","",function(s){return t.call(r,s,n++)}),i}function Fw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},Ia={transition:null},Mw={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Ia,ReactCurrentOwner:yg};function MT(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Xo,forEach:function(e,t,r){Xo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xo(e,function(){t++}),t},toArray:function(e){return Xo(e,function(t){return t})||[]},only:function(e){if(!mg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=ps;$e.Fragment=Sw;$e.Profiler=bw;$e.PureComponent=gg;$e.StrictMode=ww;$e.Suspense=Cw;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw;$e.act=MT;$e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=xT({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=yg.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)kT.call(t,u)&&!zT.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:wo,type:e.type,key:n,ref:s,props:i,_owner:a}};$e.createContext=function(e){return e={$$typeof:Iw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vw,_context:e},e.Consumer=e};$e.createElement=FT;$e.createFactory=function(e){var t=FT.bind(null,e);return t.type=e,t};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:Aw,render:e}};$e.isValidElement=mg;$e.lazy=function(e){return{$$typeof:Ew,_payload:{_status:-1,_result:e},_init:Fw}};$e.memo=function(e,t){return{$$typeof:xw,type:e,compare:t===void 0?null:t}};$e.startTransition=function(e){var t=Ia.transition;Ia.transition={};try{e()}finally{Ia.transition=t}};$e.unstable_act=MT;$e.useCallback=function(e,t){return qt.current.useCallback(e,t)};$e.useContext=function(e){return qt.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};$e.useEffect=function(e,t){return qt.current.useEffect(e,t)};$e.useId=function(){return qt.current.useId()};$e.useImperativeHandle=function(e,t,r){return qt.current.useImperativeHandle(e,t,r)};$e.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};$e.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};$e.useMemo=function(e,t){return qt.current.useMemo(e,t)};$e.useReducer=function(e,t,r){return qt.current.useReducer(e,t,r)};$e.useRef=function(e){return qt.current.useRef(e)};$e.useState=function(e){return qt.current.useState(e)};$e.useSyncExternalStore=function(e,t,r){return qt.current.useSyncExternalStore(e,t,r)};$e.useTransition=function(){return qt.current.useTransition()};$e.version="18.3.1";AT.exports=$e;var b=AT.exports;const zn=Tw(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=b,Dw=Symbol.for("react.element"),Uw=Symbol.for("react.fragment"),Pw=Object.prototype.hasOwnProperty,Nw=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bw={key:!0,ref:!0,__self:!0,__source:!0};function OT(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)Pw.call(t,i)&&!Bw.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Dw,type:e,key:s,ref:a,props:n,_owner:Nw.current}}cu.Fragment=Uw;cu.jsx=OT;cu.jsxs=OT;IT.exports=cu;var P=IT.exports,kp={},DT={exports:{}},ur={},UT={exports:{}},PT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,L){var X=N.length;N.push(L);e:for(;0<X;){var te=X-1>>>1,ge=N[te];if(0<n(ge,L))N[te]=L,N[X]=ge,X=te;else break e}}function r(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var L=N[0],X=N.pop();if(X!==L){N[0]=X;e:for(var te=0,ge=N.length,ue=ge>>>1;te<ue;){var ie=2*(te+1)-1,J=N[ie],W=ie+1,G=N[W];if(0>n(J,X))W<ge&&0>n(G,J)?(N[te]=G,N[W]=X,te=W):(N[te]=J,N[ie]=X,te=ie);else if(W<ge&&0>n(G,X))N[te]=G,N[W]=X,te=W;else break e}}return L}function n(N,L){var X=N.sortIndex-L.sortIndex;return X!==0?X:N.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,f=null,_=3,T=!1,w=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var L=r(d);L!==null;){if(L.callback===null)i(d);else if(L.startTime<=N)i(d),L.sortIndex=L.expirationTime,t(u,L);else break;L=r(d)}}function v(N){if(S=!1,y(N),!w)if(r(u)!==null)w=!0,H(C);else{var L=r(d);L!==null&&q(v,L.startTime-N)}}function C(N,L){w=!1,S&&(S=!1,m(A),A=-1),T=!0;var X=_;try{for(y(L),f=r(u);f!==null&&(!(f.expirationTime>L)||N&&!F());){var te=f.callback;if(typeof te=="function"){f.callback=null,_=f.priorityLevel;var ge=te(f.expirationTime<=L);L=e.unstable_now(),typeof ge=="function"?f.callback=ge:f===r(u)&&i(u),y(L)}else i(u);f=r(u)}if(f!==null)var ue=!0;else{var ie=r(d);ie!==null&&q(v,ie.startTime-L),ue=!1}return ue}finally{f=null,_=X,T=!1}}var k=!1,M=null,A=-1,z=5,U=-1;function F(){return!(e.unstable_now()-U<z)}function j(){if(M!==null){var N=e.unstable_now();U=N;var L=!0;try{L=M(!0,N)}finally{L?Y():(k=!1,M=null)}}else k=!1}var Y;if(typeof g=="function")Y=function(){g(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=j,Y=function(){$.postMessage(null)}}else Y=function(){I(j,0)};function H(N){M=N,k||(k=!0,Y())}function q(N,L){A=I(function(){N(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||T||(w=!0,H(C))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(N){switch(_){case 1:case 2:case 3:var L=3;break;default:L=_}var X=_;_=L;try{return N()}finally{_=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,L){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=_;_=N;try{return L()}finally{_=X}},e.unstable_scheduleCallback=function(N,L,X){var te=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?te+X:te):X=te,N){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=X+ge,N={id:p++,callback:L,priorityLevel:N,startTime:X,expirationTime:ge,sortIndex:-1},X>te?(N.sortIndex=X,t(d,N),r(u)===null&&N===r(d)&&(S?(m(A),A=-1):S=!0,q(v,X-te))):(N.sortIndex=ge,t(u,N),w||T||(w=!0,H(C))),N},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(N){var L=_;return function(){var X=_;_=L;try{return N.apply(this,arguments)}finally{_=X}}}})(PT);UT.exports=PT;var Hw=UT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw=b,cr=Hw;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NT=new Set,Ks={};function yi(e,t){is(e,t),is(e+"Capture",t)}function is(e,t){for(Ks[e]=t,e=0;e<t.length;e++)NT.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zp=Object.prototype.hasOwnProperty,Yw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vh={},Ih={};function $w(e){return zp.call(Ih,e)?!0:zp.call(vh,e)?!1:Yw.test(e)?Ih[e]=!0:(vh[e]=!0,!1)}function Ww(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xw(e,t,r,i){if(t===null||typeof t>"u"||Ww(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vt(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pt[e]=new Vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pt[t]=new Vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pt[e]=new Vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pt[e]=new Vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pt[e]=new Vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pt[e]=new Vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pt[e]=new Vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pt[e]=new Vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pt[e]=new Vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tg=/[\-:]([a-z])/g;function _g(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tg,_g);Pt[t]=new Vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tg,_g);Pt[t]=new Vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tg,_g);Pt[t]=new Vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pt[e]=new Vt(e,1,!1,e.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pt[e]=new Vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sg(e,t,r,i){var n=Pt.hasOwnProperty(t)?Pt[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xw(t,r,n,i)&&(r=null),i||n===null?$w(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var yn=Lw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Op=Symbol.for("react.suspense_list"),vg=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),LT=Symbol.for("react.offscreen"),Ah=Symbol.iterator;function Is(e){return e===null||typeof e!="object"?null:(e=Ah&&e[Ah]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,Wu;function Ds(e){if(Wu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wu=t&&t[1]||""}return`
`+Wu+e}var Xu=!1;function ju(e,t){if(!e||Xu)return"";Xu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,l=s.length-1;1<=a&&0<=l&&n[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(n[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||n[a]!==s[l]){var u=`
`+n[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{Xu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ds(e):""}function jw(e){switch(e.tag){case 5:return Ds(e.type);case 16:return Ds("Lazy");case 13:return Ds("Suspense");case 19:return Ds("SuspenseList");case 0:case 2:case 15:return e=ju(e.type,!1),e;case 11:return e=ju(e.type.render,!1),e;case 1:return e=ju(e.type,!0),e;default:return""}}function Dp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ki:return"Fragment";case Ri:return"Portal";case Fp:return"Profiler";case wg:return"StrictMode";case Mp:return"Suspense";case Op:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HT:return(e.displayName||"Context")+".Consumer";case BT:return(e._context.displayName||"Context")+".Provider";case bg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vg:return t=e.displayName||null,t!==null?t:Dp(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return Dp(e(t))}catch{}}return null}function qw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dp(t);case 8:return t===wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ln(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vw(e){var t=YT(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qo(e){e._valueTracker||(e._valueTracker=Vw(e))}function $T(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=YT(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Na(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Up(e,t){var r=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ch(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ln(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WT(e,t){t=t.checked,t!=null&&Sg(e,"checked",t,!1)}function Pp(e,t){WT(e,t);var r=Ln(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Np(e,t.type,r):t.hasOwnProperty("defaultValue")&&Np(e,t.type,Ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Np(e,t,r){(t!=="number"||Na(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Us=Array.isArray;function $i(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ln(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(le(92));if(Us(r)){if(1<r.length)throw Error(le(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ln(r)}}function XT(e,t){var r=Ln(t.value),i=Ln(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Rh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vo,qT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vo=Vo||document.createElement("div"),Vo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kw=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(e){Kw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hs[t]=Hs[e]})});function VT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hs.hasOwnProperty(e)&&Hs[e]?(""+t).trim():t+"px"}function KT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=VT(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var Gw=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lp(e,t){if(t){if(Gw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function Yp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=null;function Ig(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wp=null,Wi=null,Xi=null;function kh(e){if(e=Io(e)){if(typeof Wp!="function")throw Error(le(280));var t=e.stateNode;t&&(t=gu(t),Wp(e.stateNode,e.type,t))}}function GT(e){Wi?Xi?Xi.push(e):Xi=[e]:Wi=e}function QT(){if(Wi){var e=Wi,t=Xi;if(Xi=Wi=null,kh(e),t)for(e=0;e<t.length;e++)kh(t[e])}}function JT(e,t){return e(t)}function ZT(){}var qu=!1;function e_(e,t,r){if(qu)return e(t,r);qu=!0;try{return JT(e,t,r)}finally{qu=!1,(Wi!==null||Xi!==null)&&(ZT(),QT())}}function Qs(e,t){var r=e.stateNode;if(r===null)return null;var i=gu(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(le(231,t,typeof r));return r}var Xp=!1;if(pn)try{var As={};Object.defineProperty(As,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{Xp=!1}function Qw(e,t,r,i,n,s,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var Ls=!1,Ba=null,Ha=!1,jp=null,Jw={onError:function(e){Ls=!0,Ba=e}};function Zw(e,t,r,i,n,s,a,l,u){Ls=!1,Ba=null,Qw.apply(Jw,arguments)}function eb(e,t,r,i,n,s,a,l,u){if(Zw.apply(this,arguments),Ls){if(Ls){var d=Ba;Ls=!1,Ba=null}else throw Error(le(198));Ha||(Ha=!0,jp=d)}}function mi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function t_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zh(e){if(mi(e)!==e)throw Error(le(188))}function tb(e){var t=e.alternate;if(!t){if(t=mi(e),t===null)throw Error(le(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return zh(n),e;if(s===i)return zh(n),t;s=s.sibling}throw Error(le(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,l=n.child;l;){if(l===r){a=!0,r=n,i=s;break}if(l===i){a=!0,i=n,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,i=n;break}if(l===i){a=!0,i=s,r=n;break}l=l.sibling}if(!a)throw Error(le(189))}}if(r.alternate!==i)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?e:t}function r_(e){return e=tb(e),e!==null?n_(e):null}function n_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=n_(e);if(t!==null)return t;e=e.sibling}return null}var i_=cr.unstable_scheduleCallback,Fh=cr.unstable_cancelCallback,rb=cr.unstable_shouldYield,nb=cr.unstable_requestPaint,vt=cr.unstable_now,ib=cr.unstable_getCurrentPriorityLevel,Ag=cr.unstable_ImmediatePriority,s_=cr.unstable_UserBlockingPriority,La=cr.unstable_NormalPriority,sb=cr.unstable_LowPriority,o_=cr.unstable_IdlePriority,uu=null,qr=null;function ob(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(uu,e,void 0,(e.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:cb,ab=Math.log,lb=Math.LN2;function cb(e){return e>>>=0,e===0?32:31-(ab(e)/lb|0)|0}var Ko=64,Go=4194304;function Ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ya(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~n;l!==0?i=Ps(l):(s&=a,s!==0&&(i=Ps(s)))}else a=r&~n,a!==0?i=Ps(a):s!==0&&(i=Ps(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Fr(t),n=1<<r,i|=e[r],t&=~n;return i}function ub(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pb(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Fr(s),l=1<<a,u=n[a];u===-1?(!(l&r)||l&i)&&(n[a]=ub(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}}function qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function a_(){var e=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),e}function Vu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fr(t),e[t]=r}function db(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Fr(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function Cg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Fr(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var tt=0;function l_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var c_,xg,u_,p_,d_,Vp=!1,Qo=[],Fn=null,Mn=null,On=null,Js=new Map,Zs=new Map,vn=[],fb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function Cs(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Io(t),t!==null&&xg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function gb(e,t,r,i,n){switch(t){case"focusin":return Fn=Cs(Fn,e,t,r,i,n),!0;case"dragenter":return Mn=Cs(Mn,e,t,r,i,n),!0;case"mouseover":return On=Cs(On,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return Js.set(s,Cs(Js.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Zs.set(s,Cs(Zs.get(s)||null,e,t,r,i,n)),!0}return!1}function f_(e){var t=Jn(e.target);if(t!==null){var r=mi(t);if(r!==null){if(t=r.tag,t===13){if(t=t_(r),t!==null){e.blockedOn=t,d_(e.priority,function(){u_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Aa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);$p=i,r.target.dispatchEvent(i),$p=null}else return t=Io(r),t!==null&&xg(t),e.blockedOn=r,!1;t.shift()}return!0}function Oh(e,t,r){Aa(e)&&r.delete(t)}function hb(){Vp=!1,Fn!==null&&Aa(Fn)&&(Fn=null),Mn!==null&&Aa(Mn)&&(Mn=null),On!==null&&Aa(On)&&(On=null),Js.forEach(Oh),Zs.forEach(Oh)}function xs(e,t){e.blockedOn===t&&(e.blockedOn=null,Vp||(Vp=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,hb)))}function eo(e){function t(n){return xs(n,e)}if(0<Qo.length){xs(Qo[0],e);for(var r=1;r<Qo.length;r++){var i=Qo[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Fn!==null&&xs(Fn,e),Mn!==null&&xs(Mn,e),On!==null&&xs(On,e),Js.forEach(t),Zs.forEach(t),r=0;r<vn.length;r++)i=vn[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<vn.length&&(r=vn[0],r.blockedOn===null);)f_(r),r.blockedOn===null&&vn.shift()}var ji=yn.ReactCurrentBatchConfig,$a=!0;function yb(e,t,r,i){var n=tt,s=ji.transition;ji.transition=null;try{tt=1,Eg(e,t,r,i)}finally{tt=n,ji.transition=s}}function mb(e,t,r,i){var n=tt,s=ji.transition;ji.transition=null;try{tt=4,Eg(e,t,r,i)}finally{tt=n,ji.transition=s}}function Eg(e,t,r,i){if($a){var n=Kp(e,t,r,i);if(n===null)ip(e,t,i,Wa,r),Mh(e,i);else if(gb(n,e,t,r,i))i.stopPropagation();else if(Mh(e,i),t&4&&-1<fb.indexOf(e)){for(;n!==null;){var s=Io(n);if(s!==null&&c_(s),s=Kp(e,t,r,i),s===null&&ip(e,t,i,Wa,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else ip(e,t,i,null,r)}}var Wa=null;function Kp(e,t,r,i){if(Wa=null,e=Ig(i),e=Jn(e),e!==null)if(t=mi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=t_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wa=e,null}function g_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ib()){case Ag:return 1;case s_:return 4;case La:case sb:return 16;case o_:return 536870912;default:return 16}default:return 16}}var En=null,Rg=null,Ca=null;function h_(){if(Ca)return Ca;var e,t=Rg,r=t.length,i,n="value"in En?En.value:En.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return Ca=n.slice(e,1<i?1-i:void 0)}function xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function Dh(){return!1}function pr(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jo:Dh,this.isPropagationStopped=Dh,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),t}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=pr(ds),vo=Tt({},ds,{view:0,detail:0}),Tb=pr(vo),Ku,Gu,Es,pu=Tt({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Ku=e.screenX-Es.screenX,Gu=e.screenY-Es.screenY):Gu=Ku=0,Es=e),Ku)},movementY:function(e){return"movementY"in e?e.movementY:Gu}}),Uh=pr(pu),_b=Tt({},pu,{dataTransfer:0}),Sb=pr(_b),wb=Tt({},vo,{relatedTarget:0}),Qu=pr(wb),bb=Tt({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),vb=pr(bb),Ib=Tt({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ab=pr(Ib),Cb=Tt({},ds,{data:0}),Ph=pr(Cb),xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rb[e])?!!t[e]:!1}function zg(){return kb}var zb=Tt({},vo,{key:function(e){if(e.key){var t=xb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zg,charCode:function(e){return e.type==="keypress"?xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fb=pr(zb),Mb=Tt({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=pr(Mb),Ob=Tt({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zg}),Db=pr(Ob),Ub=Tt({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pb=pr(Ub),Nb=Tt({},pu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bb=pr(Nb),Hb=[9,13,27,32],Fg=pn&&"CompositionEvent"in window,Ys=null;pn&&"documentMode"in document&&(Ys=document.documentMode);var Lb=pn&&"TextEvent"in window&&!Ys,y_=pn&&(!Fg||Ys&&8<Ys&&11>=Ys),Bh=" ",Hh=!1;function m_(e,t){switch(e){case"keyup":return Hb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function Yb(e,t){switch(e){case"compositionend":return T_(t);case"keypress":return t.which!==32?null:(Hh=!0,Bh);case"textInput":return e=t.data,e===Bh&&Hh?null:e;default:return null}}function $b(e,t){if(zi)return e==="compositionend"||!Fg&&m_(e,t)?(e=h_(),Ca=Rg=En=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return y_&&t.locale!=="ko"?null:t.data;default:return null}}var Wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wb[e.type]:t==="textarea"}function __(e,t,r,i){GT(i),t=Xa(t,"onChange"),0<t.length&&(r=new kg("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var $s=null,to=null;function Xb(e){k_(e,0)}function du(e){var t=Oi(e);if($T(t))return e}function jb(e,t){if(e==="change")return t}var S_=!1;if(pn){var Ju;if(pn){var Zu="oninput"in document;if(!Zu){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),Zu=typeof Yh.oninput=="function"}Ju=Zu}else Ju=!1;S_=Ju&&(!document.documentMode||9<document.documentMode)}function $h(){$s&&($s.detachEvent("onpropertychange",w_),to=$s=null)}function w_(e){if(e.propertyName==="value"&&du(to)){var t=[];__(t,to,e,Ig(e)),e_(Xb,t)}}function qb(e,t,r){e==="focusin"?($h(),$s=t,to=r,$s.attachEvent("onpropertychange",w_)):e==="focusout"&&$h()}function Vb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return du(to)}function Kb(e,t){if(e==="click")return du(t)}function Gb(e,t){if(e==="input"||e==="change")return du(t)}function Qb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:Qb;function ro(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!zp.call(t,n)||!Or(e[n],t[n]))return!1}return!0}function Wh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xh(e,t){var r=Wh(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Wh(r)}}function b_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?b_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v_(){for(var e=window,t=Na();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Na(e.document)}return t}function Mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jb(e){var t=v_(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&b_(r.ownerDocument.documentElement,r)){if(i!==null&&Mg(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=Xh(r,s);var a=Xh(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zb=pn&&"documentMode"in document&&11>=document.documentMode,Fi=null,Gp=null,Ws=null,Qp=!1;function jh(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qp||Fi==null||Fi!==Na(i)||(i=Fi,"selectionStart"in i&&Mg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ws&&ro(Ws,i)||(Ws=i,i=Xa(Gp,"onSelect"),0<i.length&&(t=new kg("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Fi)))}function Zo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Mi={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},ep={},I_={};pn&&(I_=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function fu(e){if(ep[e])return ep[e];if(!Mi[e])return e;var t=Mi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in I_)return ep[e]=t[r];return e}var A_=fu("animationend"),C_=fu("animationiteration"),x_=fu("animationstart"),E_=fu("transitionend"),R_=new Map,qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){R_.set(e,t),yi(t,[e])}for(var tp=0;tp<qh.length;tp++){var rp=qh[tp],ev=rp.toLowerCase(),tv=rp[0].toUpperCase()+rp.slice(1);$n(ev,"on"+tv)}$n(A_,"onAnimationEnd");$n(C_,"onAnimationIteration");$n(x_,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(E_,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function Vh(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,eb(i,t,void 0,e),e.currentTarget=null}function k_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&n.isPropagationStopped())break e;Vh(n,l,d),s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&n.isPropagationStopped())break e;Vh(n,l,d),s=u}}}if(Ha)throw e=jp,Ha=!1,jp=null,e}function lt(e,t){var r=t[rd];r===void 0&&(r=t[rd]=new Set);var i=e+"__bubble";r.has(i)||(z_(t,e,2,!1),r.add(i))}function np(e,t,r){var i=0;t&&(i|=4),z_(r,e,i,t)}var ea="_reactListening"+Math.random().toString(36).slice(2);function no(e){if(!e[ea]){e[ea]=!0,NT.forEach(function(r){r!=="selectionchange"&&(rv.has(r)||np(r,!1,e),np(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ea]||(t[ea]=!0,np("selectionchange",!1,t))}}function z_(e,t,r,i){switch(g_(t)){case 1:var n=yb;break;case 4:n=mb;break;default:n=Eg}r=n.bind(null,t,r,e),n=void 0,!Xp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function ip(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;a=a.return}for(;l!==null;){if(a=Jn(l),a===null)return;if(u=a.tag,u===5||u===6){i=s=a;continue e}l=l.parentNode}}i=i.return}e_(function(){var d=s,p=Ig(r),f=[];e:{var _=R_.get(e);if(_!==void 0){var T=kg,w=e;switch(e){case"keypress":if(xa(r)===0)break e;case"keydown":case"keyup":T=Fb;break;case"focusin":w="focus",T=Qu;break;case"focusout":w="blur",T=Qu;break;case"beforeblur":case"afterblur":T=Qu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Sb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Db;break;case A_:case C_:case x_:T=vb;break;case E_:T=Pb;break;case"scroll":T=Tb;break;case"wheel":T=Bb;break;case"copy":case"cut":case"paste":T=Ab;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Nh}var S=(t&4)!==0,I=!S&&e==="scroll",m=S?_!==null?_+"Capture":null:_;S=[];for(var g=d,y;g!==null;){y=g;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,m!==null&&(v=Qs(g,m),v!=null&&S.push(io(g,v,y)))),I)break;g=g.return}0<S.length&&(_=new T(_,w,null,r,p),f.push({event:_,listeners:S}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",_&&r!==$p&&(w=r.relatedTarget||r.fromElement)&&(Jn(w)||w[dn]))break e;if((T||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,T?(w=r.relatedTarget||r.toElement,T=d,w=w?Jn(w):null,w!==null&&(I=mi(w),w!==I||w.tag!==5&&w.tag!==6)&&(w=null)):(T=null,w=d),T!==w)){if(S=Uh,v="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(S=Nh,v="onPointerLeave",m="onPointerEnter",g="pointer"),I=T==null?_:Oi(T),y=w==null?_:Oi(w),_=new S(v,g+"leave",T,r,p),_.target=I,_.relatedTarget=y,v=null,Jn(p)===d&&(S=new S(m,g+"enter",w,r,p),S.target=y,S.relatedTarget=I,v=S),I=v,T&&w)t:{for(S=T,m=w,g=0,y=S;y;y=Si(y))g++;for(y=0,v=m;v;v=Si(v))y++;for(;0<g-y;)S=Si(S),g--;for(;0<y-g;)m=Si(m),y--;for(;g--;){if(S===m||m!==null&&S===m.alternate)break t;S=Si(S),m=Si(m)}S=null}else S=null;T!==null&&Kh(f,_,T,S,!1),w!==null&&I!==null&&Kh(f,I,w,S,!0)}}e:{if(_=d?Oi(d):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var C=jb;else if(Lh(_))if(S_)C=Gb;else{C=Vb;var k=qb}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(C=Kb);if(C&&(C=C(e,d))){__(f,C,r,p);break e}k&&k(e,_,d),e==="focusout"&&(k=_._wrapperState)&&k.controlled&&_.type==="number"&&Np(_,"number",_.value)}switch(k=d?Oi(d):window,e){case"focusin":(Lh(k)||k.contentEditable==="true")&&(Fi=k,Gp=d,Ws=null);break;case"focusout":Ws=Gp=Fi=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,jh(f,r,p);break;case"selectionchange":if(Zb)break;case"keydown":case"keyup":jh(f,r,p)}var M;if(Fg)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else zi?m_(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(y_&&r.locale!=="ko"&&(zi||A!=="onCompositionStart"?A==="onCompositionEnd"&&zi&&(M=h_()):(En=p,Rg="value"in En?En.value:En.textContent,zi=!0)),k=Xa(d,A),0<k.length&&(A=new Ph(A,e,null,r,p),f.push({event:A,listeners:k}),M?A.data=M:(M=T_(r),M!==null&&(A.data=M)))),(M=Lb?Yb(e,r):$b(e,r))&&(d=Xa(d,"onBeforeInput"),0<d.length&&(p=new Ph("onBeforeInput","beforeinput",null,r,p),f.push({event:p,listeners:d}),p.data=M))}k_(f,t)})}function io(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xa(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Qs(e,r),s!=null&&i.unshift(io(e,s,n)),s=Qs(e,t),s!=null&&i.push(io(e,s,n))),e=e.return}return i}function Si(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kh(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&d!==null&&(l=d,n?(u=Qs(r,s),u!=null&&a.unshift(io(r,u,l))):n||(u=Qs(r,s),u!=null&&a.push(io(r,u,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var nv=/\r\n?/g,iv=/\u0000|\uFFFD/g;function Gh(e){return(typeof e=="string"?e:""+e).replace(nv,`
`).replace(iv,"")}function ta(e,t,r){if(t=Gh(t),Gh(e)!==t&&r)throw Error(le(425))}function ja(){}var Jp=null,Zp=null;function ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var td=typeof setTimeout=="function"?setTimeout:void 0,sv=typeof clearTimeout=="function"?clearTimeout:void 0,Qh=typeof Promise=="function"?Promise:void 0,ov=typeof queueMicrotask=="function"?queueMicrotask:typeof Qh<"u"?function(e){return Qh.resolve(null).then(e).catch(av)}:td;function av(e){setTimeout(function(){throw e})}function sp(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),eo(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);eo(t)}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),Wr="__reactFiber$"+fs,so="__reactProps$"+fs,dn="__reactContainer$"+fs,rd="__reactEvents$"+fs,lv="__reactListeners$"+fs,cv="__reactHandles$"+fs;function Jn(e){var t=e[Wr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[Wr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Jh(e);e!==null;){if(r=e[Wr])return r;e=Jh(e)}return t}e=r,r=e.parentNode}return null}function Io(e){return e=e[Wr]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function gu(e){return e[so]||null}var nd=[],Di=-1;function Wn(e){return{current:e}}function ut(e){0>Di||(e.current=nd[Di],nd[Di]=null,Di--)}function ot(e,t){Di++,nd[Di]=e.current,e.current=t}var Yn={},Wt=Wn(Yn),rr=Wn(!1),ci=Yn;function ss(e,t){var r=e.type.contextTypes;if(!r)return Yn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function nr(e){return e=e.childContextTypes,e!=null}function qa(){ut(rr),ut(Wt)}function Zh(e,t,r){if(Wt.current!==Yn)throw Error(le(168));ot(Wt,t),ot(rr,r)}function F_(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(le(108,qw(e)||"Unknown",n));return Tt({},r,i)}function Va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yn,ci=Wt.current,ot(Wt,e),ot(rr,rr.current),!0}function ey(e,t,r){var i=e.stateNode;if(!i)throw Error(le(169));r?(e=F_(e,t,ci),i.__reactInternalMemoizedMergedChildContext=e,ut(rr),ut(Wt),ot(Wt,e)):ut(rr),ot(rr,r)}var sn=null,hu=!1,op=!1;function M_(e){sn===null?sn=[e]:sn.push(e)}function uv(e){hu=!0,M_(e)}function Xn(){if(!op&&sn!==null){op=!0;var e=0,t=tt;try{var r=sn;for(tt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}sn=null,hu=!1}catch(n){throw sn!==null&&(sn=sn.slice(e+1)),i_(Ag,Xn),n}finally{tt=t,op=!1}}return null}var Ui=[],Pi=0,Ka=null,Ga=0,yr=[],mr=0,ui=null,on=1,an="";function Vn(e,t){Ui[Pi++]=Ga,Ui[Pi++]=Ka,Ka=e,Ga=t}function O_(e,t,r){yr[mr++]=on,yr[mr++]=an,yr[mr++]=ui,ui=e;var i=on;e=an;var n=32-Fr(i)-1;i&=~(1<<n),r+=1;var s=32-Fr(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,on=1<<32-Fr(t)+n|r<<n|i,an=s+e}else on=1<<s|r<<n|i,an=e}function Og(e){e.return!==null&&(Vn(e,1),O_(e,1,0))}function Dg(e){for(;e===Ka;)Ka=Ui[--Pi],Ui[Pi]=null,Ga=Ui[--Pi],Ui[Pi]=null;for(;e===ui;)ui=yr[--mr],yr[mr]=null,an=yr[--mr],yr[mr]=null,on=yr[--mr],yr[mr]=null}var lr=null,ar=null,ft=!1,zr=null;function D_(e,t){var r=_r(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ty(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lr=e,ar=Dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lr=e,ar=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ui!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=_r(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,lr=e,ar=null,!0):!1;default:return!1}}function id(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sd(e){if(ft){var t=ar;if(t){var r=t;if(!ty(e,t)){if(id(e))throw Error(le(418));t=Dn(r.nextSibling);var i=lr;t&&ty(e,t)?D_(i,r):(e.flags=e.flags&-4097|2,ft=!1,lr=e)}}else{if(id(e))throw Error(le(418));e.flags=e.flags&-4097|2,ft=!1,lr=e}}}function ry(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lr=e}function ra(e){if(e!==lr)return!1;if(!ft)return ry(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ed(e.type,e.memoizedProps)),t&&(t=ar)){if(id(e))throw U_(),Error(le(418));for(;t;)D_(e,t),t=Dn(t.nextSibling)}if(ry(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ar=Dn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ar=null}}else ar=lr?Dn(e.stateNode.nextSibling):null;return!0}function U_(){for(var e=ar;e;)e=Dn(e.nextSibling)}function os(){ar=lr=null,ft=!1}function Ug(e){zr===null?zr=[e]:zr.push(e)}var pv=yn.ReactCurrentBatchConfig;function Rs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var i=r.stateNode}if(!i)throw Error(le(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=n.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,e))}return e}function na(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ny(e){var t=e._init;return t(e._payload)}function P_(e){function t(m,g){if(e){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function r(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function i(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function n(m,g){return m=Bn(m,g),m.index=0,m.sibling=null,m}function s(m,g,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,y,v){return g===null||g.tag!==6?(g=fp(y,m.mode,v),g.return=m,g):(g=n(g,y),g.return=m,g)}function u(m,g,y,v){var C=y.type;return C===ki?p(m,g,y.props.children,v,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wn&&ny(C)===g.type)?(v=n(g,y.props),v.ref=Rs(m,g,y),v.return=m,v):(v=Oa(y.type,y.key,y.props,null,m.mode,v),v.ref=Rs(m,g,y),v.return=m,v)}function d(m,g,y,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=gp(y,m.mode,v),g.return=m,g):(g=n(g,y.children||[]),g.return=m,g)}function p(m,g,y,v,C){return g===null||g.tag!==7?(g=li(y,m.mode,v,C),g.return=m,g):(g=n(g,y),g.return=m,g)}function f(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fp(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case jo:return y=Oa(g.type,g.key,g.props,null,m.mode,y),y.ref=Rs(m,null,g),y.return=m,y;case Ri:return g=gp(g,m.mode,y),g.return=m,g;case wn:var v=g._init;return f(m,v(g._payload),y)}if(Us(g)||Is(g))return g=li(g,m.mode,y,null),g.return=m,g;na(m,g)}return null}function _(m,g,y,v){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(m,g,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jo:return y.key===C?u(m,g,y,v):null;case Ri:return y.key===C?d(m,g,y,v):null;case wn:return C=y._init,_(m,g,C(y._payload),v)}if(Us(y)||Is(y))return C!==null?null:p(m,g,y,v,null);na(m,y)}return null}function T(m,g,y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(y)||null,l(g,m,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:return m=m.get(v.key===null?y:v.key)||null,u(g,m,v,C);case Ri:return m=m.get(v.key===null?y:v.key)||null,d(g,m,v,C);case wn:var k=v._init;return T(m,g,y,k(v._payload),C)}if(Us(v)||Is(v))return m=m.get(y)||null,p(g,m,v,C,null);na(g,v)}return null}function w(m,g,y,v){for(var C=null,k=null,M=g,A=g=0,z=null;M!==null&&A<y.length;A++){M.index>A?(z=M,M=null):z=M.sibling;var U=_(m,M,y[A],v);if(U===null){M===null&&(M=z);break}e&&M&&U.alternate===null&&t(m,M),g=s(U,g,A),k===null?C=U:k.sibling=U,k=U,M=z}if(A===y.length)return r(m,M),ft&&Vn(m,A),C;if(M===null){for(;A<y.length;A++)M=f(m,y[A],v),M!==null&&(g=s(M,g,A),k===null?C=M:k.sibling=M,k=M);return ft&&Vn(m,A),C}for(M=i(m,M);A<y.length;A++)z=T(M,m,A,y[A],v),z!==null&&(e&&z.alternate!==null&&M.delete(z.key===null?A:z.key),g=s(z,g,A),k===null?C=z:k.sibling=z,k=z);return e&&M.forEach(function(F){return t(m,F)}),ft&&Vn(m,A),C}function S(m,g,y,v){var C=Is(y);if(typeof C!="function")throw Error(le(150));if(y=C.call(y),y==null)throw Error(le(151));for(var k=C=null,M=g,A=g=0,z=null,U=y.next();M!==null&&!U.done;A++,U=y.next()){M.index>A?(z=M,M=null):z=M.sibling;var F=_(m,M,U.value,v);if(F===null){M===null&&(M=z);break}e&&M&&F.alternate===null&&t(m,M),g=s(F,g,A),k===null?C=F:k.sibling=F,k=F,M=z}if(U.done)return r(m,M),ft&&Vn(m,A),C;if(M===null){for(;!U.done;A++,U=y.next())U=f(m,U.value,v),U!==null&&(g=s(U,g,A),k===null?C=U:k.sibling=U,k=U);return ft&&Vn(m,A),C}for(M=i(m,M);!U.done;A++,U=y.next())U=T(M,m,A,U.value,v),U!==null&&(e&&U.alternate!==null&&M.delete(U.key===null?A:U.key),g=s(U,g,A),k===null?C=U:k.sibling=U,k=U);return e&&M.forEach(function(j){return t(m,j)}),ft&&Vn(m,A),C}function I(m,g,y,v){if(typeof y=="object"&&y!==null&&y.type===ki&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case jo:e:{for(var C=y.key,k=g;k!==null;){if(k.key===C){if(C=y.type,C===ki){if(k.tag===7){r(m,k.sibling),g=n(k,y.props.children),g.return=m,m=g;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wn&&ny(C)===k.type){r(m,k.sibling),g=n(k,y.props),g.ref=Rs(m,k,y),g.return=m,m=g;break e}r(m,k);break}else t(m,k);k=k.sibling}y.type===ki?(g=li(y.props.children,m.mode,v,y.key),g.return=m,m=g):(v=Oa(y.type,y.key,y.props,null,m.mode,v),v.ref=Rs(m,g,y),v.return=m,m=v)}return a(m);case Ri:e:{for(k=y.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(m,g.sibling),g=n(g,y.children||[]),g.return=m,m=g;break e}else{r(m,g);break}else t(m,g);g=g.sibling}g=gp(y,m.mode,v),g.return=m,m=g}return a(m);case wn:return k=y._init,I(m,g,k(y._payload),v)}if(Us(y))return w(m,g,y,v);if(Is(y))return S(m,g,y,v);na(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(m,g.sibling),g=n(g,y),g.return=m,m=g):(r(m,g),g=fp(y,m.mode,v),g.return=m,m=g),a(m)):r(m,g)}return I}var as=P_(!0),N_=P_(!1),Qa=Wn(null),Ja=null,Ni=null,Pg=null;function Ng(){Pg=Ni=Ja=null}function Bg(e){var t=Qa.current;ut(Qa),e._currentValue=t}function od(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function qi(e,t){Ja=e,Pg=Ni=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tr=!0),e.firstContext=null)}function br(e){var t=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:t,next:null},Ni===null){if(Ja===null)throw Error(le(308));Ni=e,Ja.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Zn=null;function Hg(e){Zn===null?Zn=[e]:Zn.push(e)}function B_(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,Hg(t)):(r.next=n.next,n.next=r),t.interleaved=r,fn(e,i)}function fn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var bn=!1;function Lg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Un(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ve&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,fn(e,r)}return n=i.interleaved,n===null?(t.next=t,Hg(i)):(t.next=n.next,n.next=t),i.interleaved=t,fn(e,r)}function Ea(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Cg(e,r)}}function iy(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Za(e,t,r,i){var n=e.updateQueue;bn=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(s!==null){var f=n.baseState;a=0,p=d=u=null,l=s;do{var _=l.lane,T=l.eventTime;if((i&_)===_){p!==null&&(p=p.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,S=l;switch(_=t,T=r,S.tag){case 1:if(w=S.payload,typeof w=="function"){f=w.call(T,f,_);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,_=typeof w=="function"?w.call(T,f,_):w,_==null)break e;f=Tt({},f,_);break e;case 2:bn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,_=n.effects,_===null?n.effects=[l]:_.push(l))}else T={eventTime:T,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=T,u=f):p=p.next=T,a|=_;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;_=l,l=_.next,_.next=null,n.lastBaseUpdate=_,n.shared.pending=null}}while(!0);if(p===null&&(u=f),n.baseState=u,n.firstBaseUpdate=d,n.lastBaseUpdate=p,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);di|=a,e.lanes=a,e.memoizedState=f}}function sy(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(le(191,n));n.call(i)}}}var Ao={},Vr=Wn(Ao),oo=Wn(Ao),ao=Wn(Ao);function ei(e){if(e===Ao)throw Error(le(174));return e}function Yg(e,t){switch(ot(ao,t),ot(oo,e),ot(Vr,Ao),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hp(t,e)}ut(Vr),ot(Vr,t)}function ls(){ut(Vr),ut(oo),ut(ao)}function L_(e){ei(ao.current);var t=ei(Vr.current),r=Hp(t,e.type);t!==r&&(ot(oo,e),ot(Vr,r))}function $g(e){oo.current===e&&(ut(Vr),ut(oo))}var yt=Wn(0);function el(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ap=[];function Wg(){for(var e=0;e<ap.length;e++)ap[e]._workInProgressVersionPrimary=null;ap.length=0}var Ra=yn.ReactCurrentDispatcher,lp=yn.ReactCurrentBatchConfig,pi=0,mt=null,xt=null,zt=null,tl=!1,Xs=!1,lo=0,dv=0;function Ht(){throw Error(le(321))}function Xg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Or(e[r],t[r]))return!1;return!0}function jg(e,t,r,i,n,s){if(pi=s,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ra.current=e===null||e.memoizedState===null?yv:mv,e=r(i,n),Xs){s=0;do{if(Xs=!1,lo=0,25<=s)throw Error(le(301));s+=1,zt=xt=null,t.updateQueue=null,Ra.current=Tv,e=r(i,n)}while(Xs)}if(Ra.current=rl,t=xt!==null&&xt.next!==null,pi=0,zt=xt=mt=null,tl=!1,t)throw Error(le(300));return e}function qg(){var e=lo!==0;return lo=0,e}function Lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?mt.memoizedState=zt=e:zt=zt.next=e,zt}function vr(){if(xt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=zt===null?mt.memoizedState:zt.next;if(t!==null)zt=t,xt=e;else{if(e===null)throw Error(le(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},zt===null?mt.memoizedState=zt=e:zt=zt.next=e}return zt}function co(e,t){return typeof t=="function"?t(e):t}function cp(e){var t=vr(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var i=xt,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var l=a=null,u=null,d=s;do{var p=d.lane;if((pi&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,a=i):u=u.next=f,mt.lanes|=p,di|=p}d=d.next}while(d!==null&&d!==s);u===null?a=i:u.next=l,Or(i,t.memoizedState)||(tr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,mt.lanes|=s,di|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function up(e){var t=vr(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Or(s,t.memoizedState)||(tr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function Y_(){}function $_(e,t){var r=mt,i=vr(),n=t(),s=!Or(i.memoizedState,n);if(s&&(i.memoizedState=n,tr=!0),i=i.queue,Vg(j_.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||zt!==null&&zt.memoizedState.tag&1){if(r.flags|=2048,uo(9,X_.bind(null,r,i,n,t),void 0,null),Ft===null)throw Error(le(349));pi&30||W_(r,t,n)}return n}function W_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function X_(e,t,r,i){t.value=r,t.getSnapshot=i,q_(t)&&V_(e)}function j_(e,t,r){return r(function(){q_(t)&&V_(e)})}function q_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Or(e,r)}catch{return!0}}function V_(e){var t=fn(e,1);t!==null&&Mr(t,e,1,-1)}function oy(e){var t=Lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:e},t.queue=e,e=e.dispatch=hv.bind(null,mt,e),[t.memoizedState,e]}function uo(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function K_(){return vr().memoizedState}function ka(e,t,r,i){var n=Lr();mt.flags|=e,n.memoizedState=uo(1|t,r,void 0,i===void 0?null:i)}function yu(e,t,r,i){var n=vr();i=i===void 0?null:i;var s=void 0;if(xt!==null){var a=xt.memoizedState;if(s=a.destroy,i!==null&&Xg(i,a.deps)){n.memoizedState=uo(t,r,s,i);return}}mt.flags|=e,n.memoizedState=uo(1|t,r,s,i)}function ay(e,t){return ka(8390656,8,e,t)}function Vg(e,t){return yu(2048,8,e,t)}function G_(e,t){return yu(4,2,e,t)}function Q_(e,t){return yu(4,4,e,t)}function J_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Z_(e,t,r){return r=r!=null?r.concat([e]):null,yu(4,4,J_.bind(null,t,e),r)}function Kg(){}function eS(e,t){var r=vr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Xg(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function tS(e,t){var r=vr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Xg(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function rS(e,t,r){return pi&21?(Or(r,t)||(r=a_(),mt.lanes|=r,di|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tr=!0),e.memoizedState=r)}function fv(e,t){var r=tt;tt=r!==0&&4>r?r:4,e(!0);var i=lp.transition;lp.transition={};try{e(!1),t()}finally{tt=r,lp.transition=i}}function nS(){return vr().memoizedState}function gv(e,t,r){var i=Nn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},iS(e))sS(t,r);else if(r=B_(e,t,r,i),r!==null){var n=jt();Mr(r,e,i,n),oS(r,t,i)}}function hv(e,t,r){var i=Nn(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(iS(e))sS(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(n.hasEagerState=!0,n.eagerState=l,Or(l,a)){var u=t.interleaved;u===null?(n.next=n,Hg(t)):(n.next=u.next,u.next=n),t.interleaved=n;return}}catch{}finally{}r=B_(e,t,n,i),r!==null&&(n=jt(),Mr(r,e,i,n),oS(r,t,i))}}function iS(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function sS(e,t){Xs=tl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function oS(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Cg(e,r)}}var rl={readContext:br,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},yv={readContext:br,useCallback:function(e,t){return Lr().memoizedState=[e,t===void 0?null:t],e},useContext:br,useEffect:ay,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ka(4194308,4,J_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var r=Lr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Lr();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=gv.bind(null,mt,e),[i.memoizedState,e]},useRef:function(e){var t=Lr();return e={current:e},t.memoizedState=e},useState:oy,useDebugValue:Kg,useDeferredValue:function(e){return Lr().memoizedState=e},useTransition:function(){var e=oy(!1),t=e[0];return e=fv.bind(null,e[1]),Lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=mt,n=Lr();if(ft){if(r===void 0)throw Error(le(407));r=r()}else{if(r=t(),Ft===null)throw Error(le(349));pi&30||W_(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,ay(j_.bind(null,i,s,e),[e]),i.flags|=2048,uo(9,X_.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Lr(),t=Ft.identifierPrefix;if(ft){var r=an,i=on;r=(i&~(1<<32-Fr(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=lo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=dv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mv={readContext:br,useCallback:eS,useContext:br,useEffect:Vg,useImperativeHandle:Z_,useInsertionEffect:G_,useLayoutEffect:Q_,useMemo:tS,useReducer:cp,useRef:K_,useState:function(){return cp(co)},useDebugValue:Kg,useDeferredValue:function(e){var t=vr();return rS(t,xt.memoizedState,e)},useTransition:function(){var e=cp(co)[0],t=vr().memoizedState;return[e,t]},useMutableSource:Y_,useSyncExternalStore:$_,useId:nS,unstable_isNewReconciler:!1},Tv={readContext:br,useCallback:eS,useContext:br,useEffect:Vg,useImperativeHandle:Z_,useInsertionEffect:G_,useLayoutEffect:Q_,useMemo:tS,useReducer:up,useRef:K_,useState:function(){return up(co)},useDebugValue:Kg,useDeferredValue:function(e){var t=vr();return xt===null?t.memoizedState=e:rS(t,xt.memoizedState,e)},useTransition:function(){var e=up(co)[0],t=vr().memoizedState;return[e,t]},useMutableSource:Y_,useSyncExternalStore:$_,useId:nS,unstable_isNewReconciler:!1};function Rr(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ad(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Tt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mu={isMounted:function(e){return(e=e._reactInternals)?mi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=jt(),n=Nn(e),s=un(i,n);s.payload=t,r!=null&&(s.callback=r),t=Un(e,s,n),t!==null&&(Mr(t,e,n,i),Ea(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=jt(),n=Nn(e),s=un(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Un(e,s,n),t!==null&&(Mr(t,e,n,i),Ea(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jt(),i=Nn(e),n=un(r,i);n.tag=2,t!=null&&(n.callback=t),t=Un(e,n,i),t!==null&&(Mr(t,e,i,r),Ea(t,e,i))}};function ly(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!ro(r,i)||!ro(n,s):!0}function aS(e,t,r){var i=!1,n=Yn,s=t.contextType;return typeof s=="object"&&s!==null?s=br(s):(n=nr(t)?ci:Wt.current,i=t.contextTypes,s=(i=i!=null)?ss(e,n):Yn),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mu,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function cy(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&mu.enqueueReplaceState(t,t.state,null)}function ld(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Lg(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=br(s):(s=nr(t)?ci:Wt.current,n.context=ss(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ad(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&mu.enqueueReplaceState(n,n.state,null),Za(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var r="",i=t;do r+=jw(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function pp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _v=typeof WeakMap=="function"?WeakMap:Map;function lS(e,t,r){r=un(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){il||(il=!0,_d=i),cd(e,t)},r}function cS(e,t,r){r=un(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){cd(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){cd(e,t),typeof i!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function uy(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new _v;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=Mv.bind(null,e,t,r),t.then(e,e))}function py(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dy(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=un(-1,1),t.tag=2,Un(r,t,1))),r.lanes|=1),e)}var Sv=yn.ReactCurrentOwner,tr=!1;function Xt(e,t,r,i){t.child=e===null?N_(t,null,r,i):as(t,e.child,r,i)}function fy(e,t,r,i,n){r=r.render;var s=t.ref;return qi(t,n),i=jg(e,t,r,i,s,n),r=qg(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,gn(e,t,n)):(ft&&r&&Og(t),t.flags|=1,Xt(e,t,i,n),t.child)}function gy(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!nh(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,uS(e,t,s,i,n)):(e=Oa(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:ro,r(a,i)&&e.ref===t.ref)return gn(e,t,n)}return t.flags|=1,e=Bn(s,i),e.ref=t.ref,e.return=t,t.child=e}function uS(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(ro(s,i)&&e.ref===t.ref)if(tr=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(tr=!0);else return t.lanes=e.lanes,gn(e,t,n)}return ud(e,t,r,i,n)}function pS(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Hi,or),or|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ot(Hi,or),or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,ot(Hi,or),or|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,ot(Hi,or),or|=i;return Xt(e,t,n,r),t.child}function dS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ud(e,t,r,i,n){var s=nr(r)?ci:Wt.current;return s=ss(t,s),qi(t,n),r=jg(e,t,r,i,s,n),i=qg(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,gn(e,t,n)):(ft&&i&&Og(t),t.flags|=1,Xt(e,t,r,n),t.child)}function hy(e,t,r,i,n){if(nr(r)){var s=!0;Va(t)}else s=!1;if(qi(t,n),t.stateNode===null)za(e,t),aS(t,r,i),ld(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=br(d):(d=nr(r)?ci:Wt.current,d=ss(t,d));var p=r.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==d)&&cy(t,a,i,d),bn=!1;var _=t.memoizedState;a.state=_,Za(t,i,a,n),u=t.memoizedState,l!==i||_!==u||rr.current||bn?(typeof p=="function"&&(ad(t,r,p,i),u=t.memoizedState),(l=bn||ly(t,r,l,i,_,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=d,i=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,H_(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Rr(t.type,l),a.props=d,f=t.pendingProps,_=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=br(u):(u=nr(r)?ci:Wt.current,u=ss(t,u));var T=r.getDerivedStateFromProps;(p=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||_!==u)&&cy(t,a,i,u),bn=!1,_=t.memoizedState,a.state=_,Za(t,i,a,n);var w=t.memoizedState;l!==f||_!==w||rr.current||bn?(typeof T=="function"&&(ad(t,r,T,i),w=t.memoizedState),(d=bn||ly(t,r,d,i,_,w,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),a.props=i,a.state=w,a.context=u,i=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),i=!1)}return pd(e,t,r,i,s,n)}function pd(e,t,r,i,n,s){dS(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&ey(t,r,!1),gn(e,t,s);i=t.stateNode,Sv.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=as(t,e.child,null,s),t.child=as(t,null,l,s)):Xt(e,t,l,s),t.memoizedState=i.state,n&&ey(t,r,!0),t.child}function fS(e){var t=e.stateNode;t.pendingContext?Zh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zh(e,t.context,!1),Yg(e,t.containerInfo)}function yy(e,t,r,i,n){return os(),Ug(n),t.flags|=256,Xt(e,t,r,i),t.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function fd(e){return{baseLanes:e,cachePool:null,transitions:null}}function gS(e,t,r){var i=t.pendingProps,n=yt.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ot(yt,n&1),e===null)return sd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Su(a,i,0,null),e=li(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=fd(r),t.memoizedState=dd,e):Gg(t,a));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return wv(e,t,a,i,l,n,r);if(s){s=i.fallback,a=t.mode,n=e.child,l=n.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=Bn(n,u),i.subtreeFlags=n.subtreeFlags&14680064),l!==null?s=Bn(l,s):(s=li(s,a,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a=a===null?fd(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=dd,i}return s=e.child,e=s.sibling,i=Bn(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Gg(e,t){return t=Su({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ia(e,t,r,i){return i!==null&&Ug(i),as(t,e.child,null,r),e=Gg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wv(e,t,r,i,n,s,a){if(r)return t.flags&256?(t.flags&=-257,i=pp(Error(le(422))),ia(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=Su({mode:"visible",children:i.children},n,0,null),s=li(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&as(t,e.child,null,a),t.child.memoizedState=fd(a),t.memoizedState=dd,s);if(!(t.mode&1))return ia(e,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(le(419)),i=pp(s,i,void 0),ia(e,t,a,i)}if(l=(a&e.childLanes)!==0,tr||l){if(i=Ft,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,fn(e,n),Mr(i,e,n,-1))}return rh(),i=pp(Error(le(421))),ia(e,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Ov.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,ar=Dn(n.nextSibling),lr=t,ft=!0,zr=null,e!==null&&(yr[mr++]=on,yr[mr++]=an,yr[mr++]=ui,on=e.id,an=e.overflow,ui=t),t=Gg(t,i.children),t.flags|=4096,t)}function my(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),od(e.return,t,r)}function dp(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function hS(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(Xt(e,t,i.children,r),i=yt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&my(e,r,t);else if(e.tag===19)my(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ot(yt,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&el(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),dp(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&el(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}dp(t,!0,r,null,s);break;case"together":dp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),di|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,r=Bn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bv(e,t,r){switch(t.tag){case 3:fS(t),os();break;case 5:L_(t);break;case 1:nr(t.type)&&Va(t);break;case 4:Yg(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;ot(Qa,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ot(yt,yt.current&1),t.flags|=128,null):r&t.child.childLanes?gS(e,t,r):(ot(yt,yt.current&1),e=gn(e,t,r),e!==null?e.sibling:null);ot(yt,yt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return hS(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ot(yt,yt.current),i)break;return null;case 22:case 23:return t.lanes=0,pS(e,t,r)}return gn(e,t,r)}var yS,gd,mS,TS;yS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gd=function(){};mS=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,ei(Vr.current);var s=null;switch(r){case"input":n=Up(e,n),i=Up(e,i),s=[];break;case"select":n=Tt({},n,{value:void 0}),i=Tt({},i,{value:void 0}),s=[];break;case"textarea":n=Bp(e,n),i=Bp(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ja)}Lp(r,i);var a;r=null;for(d in n)if(!i.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ks.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var u=i[d];if(l=n!=null?n[d]:void 0,i.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(s||(s=[]),s.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&lt("scroll",e),s||l===u||(s=[])):(s=s||[]).push(d,u))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};TS=function(e,t,r,i){r!==i&&(t.flags|=4)};function ks(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function vv(e,t,r){var i=t.pendingProps;switch(Dg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(t),null;case 1:return nr(t.type)&&qa(),Lt(t),null;case 3:return i=t.stateNode,ls(),ut(rr),ut(Wt),Wg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zr!==null&&(bd(zr),zr=null))),gd(e,t),Lt(t),null;case 5:$g(t);var n=ei(ao.current);if(r=t.type,e!==null&&t.stateNode!=null)mS(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(le(166));return Lt(t),null}if(e=ei(Vr.current),ra(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Wr]=t,i[so]=s,e=(t.mode&1)!==0,r){case"dialog":lt("cancel",i),lt("close",i);break;case"iframe":case"object":case"embed":lt("load",i);break;case"video":case"audio":for(n=0;n<Ns.length;n++)lt(Ns[n],i);break;case"source":lt("error",i);break;case"img":case"image":case"link":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"input":Ch(i,s),lt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},lt("invalid",i);break;case"textarea":Eh(i,s),lt("invalid",i)}Lp(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&ta(i.textContent,l,e),n=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ta(i.textContent,l,e),n=["children",""+l]):Ks.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&lt("scroll",i)}switch(r){case"input":qo(i),xh(i,s,!0);break;case"textarea":qo(i),Rh(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ja)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[Wr]=t,e[so]=i,yS(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yp(r,i),r){case"dialog":lt("cancel",e),lt("close",e),n=i;break;case"iframe":case"object":case"embed":lt("load",e),n=i;break;case"video":case"audio":for(n=0;n<Ns.length;n++)lt(Ns[n],e);n=i;break;case"source":lt("error",e),n=i;break;case"img":case"image":case"link":lt("error",e),lt("load",e),n=i;break;case"details":lt("toggle",e),n=i;break;case"input":Ch(e,i),n=Up(e,i),lt("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Tt({},i,{value:void 0}),lt("invalid",e);break;case"textarea":Eh(e,i),n=Bp(e,i),lt("invalid",e);break;default:n=i}Lp(r,n),l=n;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?KT(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&qT(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Gs(e,u):typeof u=="number"&&Gs(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ks.hasOwnProperty(s)?u!=null&&s==="onScroll"&&lt("scroll",e):u!=null&&Sg(e,s,u,a))}switch(r){case"input":qo(e),xh(e,i,!1);break;case"textarea":qo(e),Rh(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ln(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?$i(e,!!i.multiple,s,!1):i.defaultValue!=null&&$i(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=ja)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Lt(t),null;case 6:if(e&&t.stateNode!=null)TS(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(le(166));if(r=ei(ao.current),ei(Vr.current),ra(t)){if(i=t.stateNode,r=t.memoizedProps,i[Wr]=t,(s=i.nodeValue!==r)&&(e=lr,e!==null))switch(e.tag){case 3:ta(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ta(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Wr]=t,t.stateNode=i}return Lt(t),null;case 13:if(ut(yt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&ar!==null&&t.mode&1&&!(t.flags&128))U_(),os(),t.flags|=98560,s=!1;else if(s=ra(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Wr]=t}else os(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lt(t),s=!1}else zr!==null&&(bd(zr),zr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||yt.current&1?Et===0&&(Et=3):rh())),t.updateQueue!==null&&(t.flags|=4),Lt(t),null);case 4:return ls(),gd(e,t),e===null&&no(t.stateNode.containerInfo),Lt(t),null;case 10:return Bg(t.type._context),Lt(t),null;case 17:return nr(t.type)&&qa(),Lt(t),null;case 19:if(ut(yt),s=t.memoizedState,s===null)return Lt(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)ks(s,!1);else{if(Et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=el(e),a!==null){for(t.flags|=128,ks(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ot(yt,yt.current&1|2),t.child}e=e.sibling}s.tail!==null&&vt()>us&&(t.flags|=128,i=!0,ks(s,!1),t.lanes=4194304)}else{if(!i)if(e=el(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ks(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ft)return Lt(t),null}else 2*vt()-s.renderingStartTime>us&&r!==1073741824&&(t.flags|=128,i=!0,ks(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=vt(),t.sibling=null,r=yt.current,ot(yt,i?r&1|2:r&1),t):(Lt(t),null);case 22:case 23:return th(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?or&1073741824&&(Lt(t),t.subtreeFlags&6&&(t.flags|=8192)):Lt(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function Iv(e,t){switch(Dg(t),t.tag){case 1:return nr(t.type)&&qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),ut(rr),ut(Wt),Wg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $g(t),null;case 13:if(ut(yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ut(yt),null;case 4:return ls(),null;case 10:return Bg(t.type._context),null;case 22:case 23:return th(),null;case 24:return null;default:return null}}var sa=!1,$t=!1,Av=typeof WeakSet=="function"?WeakSet:Set,we=null;function Bi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){St(e,t,i)}else r.current=null}function hd(e,t,r){try{r()}catch(i){St(e,t,i)}}var Ty=!1;function Cv(e,t){if(Jp=$a,e=v_(),Mg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,d=0,p=0,f=e,_=null;t:for(;;){for(var T;f!==r||n!==0&&f.nodeType!==3||(l=a+n),f!==s||i!==0&&f.nodeType!==3||(u=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(T=f.firstChild)!==null;)_=f,f=T;for(;;){if(f===e)break t;if(_===r&&++d===n&&(l=a),_===s&&++p===i&&(u=a),(T=f.nextSibling)!==null)break;f=_,_=f.parentNode}f=T}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zp={focusedElem:e,selectionRange:r},$a=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,I=w.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:Rr(t.type,S),I);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(v){St(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return w=Ty,Ty=!1,w}function js(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&hd(t,r,s)}n=n.next}while(n!==i)}}function Tu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function yd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _S(e){var t=e.alternate;t!==null&&(e.alternate=null,_S(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wr],delete t[so],delete t[rd],delete t[lv],delete t[cv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SS(e){return e.tag===5||e.tag===3||e.tag===4}function _y(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function md(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ja));else if(i!==4&&(e=e.child,e!==null))for(md(e,t,r),e=e.sibling;e!==null;)md(e,t,r),e=e.sibling}function Td(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Td(e,t,r),e=e.sibling;e!==null;)Td(e,t,r),e=e.sibling}var Ot=null,kr=!1;function Tn(e,t,r){for(r=r.child;r!==null;)wS(e,t,r),r=r.sibling}function wS(e,t,r){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(uu,r)}catch{}switch(r.tag){case 5:$t||Bi(r,t);case 6:var i=Ot,n=kr;Ot=null,Tn(e,t,r),Ot=i,kr=n,Ot!==null&&(kr?(e=Ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(kr?(e=Ot,r=r.stateNode,e.nodeType===8?sp(e.parentNode,r):e.nodeType===1&&sp(e,r),eo(e)):sp(Ot,r.stateNode));break;case 4:i=Ot,n=kr,Ot=r.stateNode.containerInfo,kr=!0,Tn(e,t,r),Ot=i,kr=n;break;case 0:case 11:case 14:case 15:if(!$t&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&hd(r,t,a),n=n.next}while(n!==i)}Tn(e,t,r);break;case 1:if(!$t&&(Bi(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){St(r,t,l)}Tn(e,t,r);break;case 21:Tn(e,t,r);break;case 22:r.mode&1?($t=(i=$t)||r.memoizedState!==null,Tn(e,t,r),$t=i):Tn(e,t,r);break;default:Tn(e,t,r)}}function Sy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Av),t.forEach(function(i){var n=Dv.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function xr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,kr=!1;break e;case 3:Ot=l.stateNode.containerInfo,kr=!0;break e;case 4:Ot=l.stateNode.containerInfo,kr=!0;break e}l=l.return}if(Ot===null)throw Error(le(160));wS(s,a,n),Ot=null,kr=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(d){St(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bS(t,e),t=t.sibling}function bS(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xr(t,e),Nr(e),i&4){try{js(3,e,e.return),Tu(3,e)}catch(S){St(e,e.return,S)}try{js(5,e,e.return)}catch(S){St(e,e.return,S)}}break;case 1:xr(t,e),Nr(e),i&512&&r!==null&&Bi(r,r.return);break;case 5:if(xr(t,e),Nr(e),i&512&&r!==null&&Bi(r,r.return),e.flags&32){var n=e.stateNode;try{Gs(n,"")}catch(S){St(e,e.return,S)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&WT(n,s),Yp(l,a);var d=Yp(l,s);for(a=0;a<u.length;a+=2){var p=u[a],f=u[a+1];p==="style"?KT(n,f):p==="dangerouslySetInnerHTML"?qT(n,f):p==="children"?Gs(n,f):Sg(n,p,f,d)}switch(l){case"input":Pp(n,s);break;case"textarea":XT(n,s);break;case"select":var _=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?$i(n,!!s.multiple,T,!1):_!==!!s.multiple&&(s.defaultValue!=null?$i(n,!!s.multiple,s.defaultValue,!0):$i(n,!!s.multiple,s.multiple?[]:"",!1))}n[so]=s}catch(S){St(e,e.return,S)}}break;case 6:if(xr(t,e),Nr(e),i&4){if(e.stateNode===null)throw Error(le(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(S){St(e,e.return,S)}}break;case 3:if(xr(t,e),Nr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{eo(t.containerInfo)}catch(S){St(e,e.return,S)}break;case 4:xr(t,e),Nr(e);break;case 13:xr(t,e),Nr(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Zg=vt())),i&4&&Sy(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?($t=(d=$t)||p,xr(t,e),$t=d):xr(t,e),Nr(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(we=e,p=e.child;p!==null;){for(f=we=p;we!==null;){switch(_=we,T=_.child,_.tag){case 0:case 11:case 14:case 15:js(4,_,_.return);break;case 1:Bi(_,_.return);var w=_.stateNode;if(typeof w.componentWillUnmount=="function"){i=_,r=_.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){St(i,r,S)}}break;case 5:Bi(_,_.return);break;case 22:if(_.memoizedState!==null){by(f);continue}}T!==null?(T.return=_,we=T):by(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{n=f.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=VT("display",a))}catch(S){St(e,e.return,S)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(S){St(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xr(t,e),Nr(e),i&4&&Sy(e);break;case 21:break;default:xr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(SS(r)){var i=r;break e}r=r.return}throw Error(le(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Gs(n,""),i.flags&=-33);var s=_y(e);Td(e,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,l=_y(e);md(e,l,a);break;default:throw Error(le(161))}}catch(u){St(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xv(e,t,r){we=e,vS(e)}function vS(e,t,r){for(var i=(e.mode&1)!==0;we!==null;){var n=we,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||sa;if(!a){var l=n.alternate,u=l!==null&&l.memoizedState!==null||$t;l=sa;var d=$t;if(sa=a,($t=u)&&!d)for(we=n;we!==null;)a=we,u=a.child,a.tag===22&&a.memoizedState!==null?vy(n):u!==null?(u.return=a,we=u):vy(n);for(;s!==null;)we=s,vS(s),s=s.sibling;we=n,sa=l,$t=d}wy(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,we=s):wy(e)}}function wy(e){for(;we!==null;){var t=we;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$t||Tu(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!$t)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Rr(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&sy(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sy(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&eo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}$t||t.flags&512&&yd(t)}catch(_){St(t,t.return,_)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function by(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function vy(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Tu(4,t)}catch(u){St(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(u){St(t,n,u)}}var s=t.return;try{yd(t)}catch(u){St(t,s,u)}break;case 5:var a=t.return;try{yd(t)}catch(u){St(t,a,u)}}}catch(u){St(t,t.return,u)}if(t===e){we=null;break}var l=t.sibling;if(l!==null){l.return=t.return,we=l;break}we=t.return}}var Ev=Math.ceil,nl=yn.ReactCurrentDispatcher,Qg=yn.ReactCurrentOwner,wr=yn.ReactCurrentBatchConfig,Ve=0,Ft=null,It=null,Ut=0,or=0,Hi=Wn(0),Et=0,po=null,di=0,_u=0,Jg=0,qs=null,er=null,Zg=0,us=1/0,nn=null,il=!1,_d=null,Pn=null,oa=!1,Rn=null,sl=0,Vs=0,Sd=null,Fa=-1,Ma=0;function jt(){return Ve&6?vt():Fa!==-1?Fa:Fa=vt()}function Nn(e){return e.mode&1?Ve&2&&Ut!==0?Ut&-Ut:pv.transition!==null?(Ma===0&&(Ma=a_()),Ma):(e=tt,e!==0||(e=window.event,e=e===void 0?16:g_(e.type)),e):1}function Mr(e,t,r,i){if(50<Vs)throw Vs=0,Sd=null,Error(le(185));bo(e,r,i),(!(Ve&2)||e!==Ft)&&(e===Ft&&(!(Ve&2)&&(_u|=r),Et===4&&In(e,Ut)),ir(e,i),r===1&&Ve===0&&!(t.mode&1)&&(us=vt()+500,hu&&Xn()))}function ir(e,t){var r=e.callbackNode;pb(e,t);var i=Ya(e,e===Ft?Ut:0);if(i===0)r!==null&&Fh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Fh(r),t===1)e.tag===0?uv(Iy.bind(null,e)):M_(Iy.bind(null,e)),ov(function(){!(Ve&6)&&Xn()}),r=null;else{switch(l_(i)){case 1:r=Ag;break;case 4:r=s_;break;case 16:r=La;break;case 536870912:r=o_;break;default:r=La}r=zS(r,IS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function IS(e,t){if(Fa=-1,Ma=0,Ve&6)throw Error(le(327));var r=e.callbackNode;if(Vi()&&e.callbackNode!==r)return null;var i=Ya(e,e===Ft?Ut:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ol(e,i);else{t=i;var n=Ve;Ve|=2;var s=CS();(Ft!==e||Ut!==t)&&(nn=null,us=vt()+500,ai(e,t));do try{zv();break}catch(l){AS(e,l)}while(!0);Ng(),nl.current=s,Ve=n,It!==null?t=0:(Ft=null,Ut=0,t=Et)}if(t!==0){if(t===2&&(n=qp(e),n!==0&&(i=n,t=wd(e,n))),t===1)throw r=po,ai(e,0),In(e,i),ir(e,vt()),r;if(t===6)In(e,i);else{if(n=e.current.alternate,!(i&30)&&!Rv(n)&&(t=ol(e,i),t===2&&(s=qp(e),s!==0&&(i=s,t=wd(e,s))),t===1))throw r=po,ai(e,0),In(e,i),ir(e,vt()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(le(345));case 2:Kn(e,er,nn);break;case 3:if(In(e,i),(i&130023424)===i&&(t=Zg+500-vt(),10<t)){if(Ya(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){jt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=td(Kn.bind(null,e,er,nn),t);break}Kn(e,er,nn);break;case 4:if(In(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-Fr(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=vt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ev(i/1960))-i,10<i){e.timeoutHandle=td(Kn.bind(null,e,er,nn),i);break}Kn(e,er,nn);break;case 5:Kn(e,er,nn);break;default:throw Error(le(329))}}}return ir(e,vt()),e.callbackNode===r?IS.bind(null,e):null}function wd(e,t){var r=qs;return e.current.memoizedState.isDehydrated&&(ai(e,t).flags|=256),e=ol(e,t),e!==2&&(t=er,er=r,t!==null&&bd(t)),e}function bd(e){er===null?er=e:er.push.apply(er,e)}function Rv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Or(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~Jg,t&=~_u,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Fr(t),i=1<<r;e[r]=-1,t&=~i}}function Iy(e){if(Ve&6)throw Error(le(327));Vi();var t=Ya(e,0);if(!(t&1))return ir(e,vt()),null;var r=ol(e,t);if(e.tag!==0&&r===2){var i=qp(e);i!==0&&(t=i,r=wd(e,i))}if(r===1)throw r=po,ai(e,0),In(e,t),ir(e,vt()),r;if(r===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,er,nn),ir(e,vt()),null}function eh(e,t){var r=Ve;Ve|=1;try{return e(t)}finally{Ve=r,Ve===0&&(us=vt()+500,hu&&Xn())}}function fi(e){Rn!==null&&Rn.tag===0&&!(Ve&6)&&Vi();var t=Ve;Ve|=1;var r=wr.transition,i=tt;try{if(wr.transition=null,tt=1,e)return e()}finally{tt=i,wr.transition=r,Ve=t,!(Ve&6)&&Xn()}}function th(){or=Hi.current,ut(Hi)}function ai(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,sv(r)),It!==null)for(r=It.return;r!==null;){var i=r;switch(Dg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qa();break;case 3:ls(),ut(rr),ut(Wt),Wg();break;case 5:$g(i);break;case 4:ls();break;case 13:ut(yt);break;case 19:ut(yt);break;case 10:Bg(i.type._context);break;case 22:case 23:th()}r=r.return}if(Ft=e,It=e=Bn(e.current,null),Ut=or=t,Et=0,po=null,Jg=_u=di=0,er=qs=null,Zn!==null){for(t=0;t<Zn.length;t++)if(r=Zn[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}r.pending=i}Zn=null}return e}function AS(e,t){do{var r=It;try{if(Ng(),Ra.current=rl,tl){for(var i=mt.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}tl=!1}if(pi=0,zt=xt=mt=null,Xs=!1,lo=0,Qg.current=null,r===null||r.return===null){Et=1,po=t,It=null;break}e:{var s=e,a=r.return,l=r,u=t;if(t=Ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=py(a);if(T!==null){T.flags&=-257,dy(T,a,l,s,t),T.mode&1&&uy(s,d,t),t=T,u=d;var w=t.updateQueue;if(w===null){var S=new Set;S.add(u),t.updateQueue=S}else w.add(u);break e}else{if(!(t&1)){uy(s,d,t),rh();break e}u=Error(le(426))}}else if(ft&&l.mode&1){var I=py(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),dy(I,a,l,s,t),Ug(cs(u,l));break e}}s=u=cs(u,l),Et!==4&&(Et=2),qs===null?qs=[s]:qs.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=lS(s,u,t);iy(s,m);break e;case 1:l=u;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Pn===null||!Pn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=cS(s,l,t);iy(s,v);break e}}s=s.return}while(s!==null)}ES(r)}catch(C){t=C,It===r&&r!==null&&(It=r=r.return);continue}break}while(!0)}function CS(){var e=nl.current;return nl.current=rl,e===null?rl:e}function rh(){(Et===0||Et===3||Et===2)&&(Et=4),Ft===null||!(di&268435455)&&!(_u&268435455)||In(Ft,Ut)}function ol(e,t){var r=Ve;Ve|=2;var i=CS();(Ft!==e||Ut!==t)&&(nn=null,ai(e,t));do try{kv();break}catch(n){AS(e,n)}while(!0);if(Ng(),Ve=r,nl.current=i,It!==null)throw Error(le(261));return Ft=null,Ut=0,Et}function kv(){for(;It!==null;)xS(It)}function zv(){for(;It!==null&&!rb();)xS(It)}function xS(e){var t=kS(e.alternate,e,or);e.memoizedProps=e.pendingProps,t===null?ES(e):It=t,Qg.current=null}function ES(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Iv(r,t),r!==null){r.flags&=32767,It=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Et=6,It=null;return}}else if(r=vv(r,t,or),r!==null){It=r;return}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);Et===0&&(Et=5)}function Kn(e,t,r){var i=tt,n=wr.transition;try{wr.transition=null,tt=1,Fv(e,t,r,i)}finally{wr.transition=n,tt=i}return null}function Fv(e,t,r,i){do Vi();while(Rn!==null);if(Ve&6)throw Error(le(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(db(e,s),e===Ft&&(It=Ft=null,Ut=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,zS(La,function(){return Vi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=wr.transition,wr.transition=null;var a=tt;tt=1;var l=Ve;Ve|=4,Qg.current=null,Cv(e,r),bS(r,e),Jb(Zp),$a=!!Jp,Zp=Jp=null,e.current=r,xv(r),nb(),Ve=l,tt=a,wr.transition=s}else e.current=r;if(oa&&(oa=!1,Rn=e,sl=n),s=e.pendingLanes,s===0&&(Pn=null),ob(r.stateNode),ir(e,vt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(il)throw il=!1,e=_d,_d=null,e;return sl&1&&e.tag!==0&&Vi(),s=e.pendingLanes,s&1?e===Sd?Vs++:(Vs=0,Sd=e):Vs=0,Xn(),null}function Vi(){if(Rn!==null){var e=l_(sl),t=wr.transition,r=tt;try{if(wr.transition=null,tt=16>e?16:e,Rn===null)var i=!1;else{if(e=Rn,Rn=null,sl=0,Ve&6)throw Error(le(331));var n=Ve;for(Ve|=4,we=e.current;we!==null;){var s=we,a=s.child;if(we.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(we=d;we!==null;){var p=we;switch(p.tag){case 0:case 11:case 15:js(8,p,s)}var f=p.child;if(f!==null)f.return=p,we=f;else for(;we!==null;){p=we;var _=p.sibling,T=p.return;if(_S(p),p===d){we=null;break}if(_!==null){_.return=T,we=_;break}we=T}}}var w=s.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var I=S.sibling;S.sibling=null,S=I}while(S!==null)}}we=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,we=a;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:js(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,we=m;break e}we=s.return}}var g=e.current;for(we=g;we!==null;){a=we;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,we=y;else e:for(a=g;we!==null;){if(l=we,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tu(9,l)}}catch(C){St(l,l.return,C)}if(l===a){we=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,we=v;break e}we=l.return}}if(Ve=n,Xn(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(uu,e)}catch{}i=!0}return i}finally{tt=r,wr.transition=t}}return!1}function Ay(e,t,r){t=cs(r,t),t=lS(e,t,1),e=Un(e,t,1),t=jt(),e!==null&&(bo(e,1,t),ir(e,t))}function St(e,t,r){if(e.tag===3)Ay(e,e,r);else for(;t!==null;){if(t.tag===3){Ay(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pn===null||!Pn.has(i))){e=cs(r,e),e=cS(t,e,1),t=Un(t,e,1),e=jt(),t!==null&&(bo(t,1,e),ir(t,e));break}}t=t.return}}function Mv(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&r,Ft===e&&(Ut&r)===r&&(Et===4||Et===3&&(Ut&130023424)===Ut&&500>vt()-Zg?ai(e,0):Jg|=r),ir(e,t)}function RS(e,t){t===0&&(e.mode&1?(t=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):t=1);var r=jt();e=fn(e,t),e!==null&&(bo(e,t,r),ir(e,r))}function Ov(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),RS(e,r)}function Dv(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(t),RS(e,r)}var kS;kS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||rr.current)tr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return tr=!1,bv(e,t,r);tr=!!(e.flags&131072)}else tr=!1,ft&&t.flags&1048576&&O_(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;za(e,t),e=t.pendingProps;var n=ss(t,Wt.current);qi(t,r),n=jg(null,t,i,e,n,r);var s=qg();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nr(i)?(s=!0,Va(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Lg(t),n.updater=mu,t.stateNode=n,n._reactInternals=t,ld(t,i,e,r),t=pd(null,t,i,!0,s,r)):(t.tag=0,ft&&s&&Og(t),Xt(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(za(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=Pv(i),e=Rr(i,e),n){case 0:t=ud(null,t,i,e,r);break e;case 1:t=hy(null,t,i,e,r);break e;case 11:t=fy(null,t,i,e,r);break e;case 14:t=gy(null,t,i,Rr(i.type,e),r);break e}throw Error(le(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Rr(i,n),ud(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Rr(i,n),hy(e,t,i,n,r);case 3:e:{if(fS(t),e===null)throw Error(le(387));i=t.pendingProps,s=t.memoizedState,n=s.element,H_(e,t),Za(t,i,null,r);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=cs(Error(le(423)),t),t=yy(e,t,i,r,n);break e}else if(i!==n){n=cs(Error(le(424)),t),t=yy(e,t,i,r,n);break e}else for(ar=Dn(t.stateNode.containerInfo.firstChild),lr=t,ft=!0,zr=null,r=N_(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(os(),i===n){t=gn(e,t,r);break e}Xt(e,t,i,r)}t=t.child}return t;case 5:return L_(t),e===null&&sd(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,ed(i,n)?a=null:s!==null&&ed(i,s)&&(t.flags|=32),dS(e,t),Xt(e,t,a,r),t.child;case 6:return e===null&&sd(t),null;case 13:return gS(e,t,r);case 4:return Yg(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=as(t,null,i,r):Xt(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Rr(i,n),fy(e,t,i,n,r);case 7:return Xt(e,t,t.pendingProps,r),t.child;case 8:return Xt(e,t,t.pendingProps.children,r),t.child;case 12:return Xt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,ot(Qa,i._currentValue),i._currentValue=a,s!==null)if(Or(s.value,a)){if(s.children===n.children&&!rr.current){t=gn(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=un(-1,r&-r),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),od(s.return,r,t),l.lanes|=r;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(le(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),od(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Xt(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,qi(t,r),n=br(n),i=i(n),t.flags|=1,Xt(e,t,i,r),t.child;case 14:return i=t.type,n=Rr(i,t.pendingProps),n=Rr(i.type,n),gy(e,t,i,n,r);case 15:return uS(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Rr(i,n),za(e,t),t.tag=1,nr(i)?(e=!0,Va(t)):e=!1,qi(t,r),aS(t,i,n),ld(t,i,n,r),pd(null,t,i,!0,e,r);case 19:return hS(e,t,r);case 22:return pS(e,t,r)}throw Error(le(156,t.tag))};function zS(e,t){return i_(e,t)}function Uv(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(e,t,r,i){return new Uv(e,t,r,i)}function nh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pv(e){if(typeof e=="function")return nh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bg)return 11;if(e===vg)return 14}return 2}function Bn(e,t){var r=e.alternate;return r===null?(r=_r(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Oa(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")nh(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ki:return li(r.children,n,s,t);case wg:a=8,n|=8;break;case Fp:return e=_r(12,r,t,n|2),e.elementType=Fp,e.lanes=s,e;case Mp:return e=_r(13,r,t,n),e.elementType=Mp,e.lanes=s,e;case Op:return e=_r(19,r,t,n),e.elementType=Op,e.lanes=s,e;case LT:return Su(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BT:a=10;break e;case HT:a=9;break e;case bg:a=11;break e;case vg:a=14;break e;case wn:a=16,i=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=_r(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function li(e,t,r,i){return e=_r(7,e,i,t),e.lanes=r,e}function Su(e,t,r,i){return e=_r(22,e,i,t),e.elementType=LT,e.lanes=r,e.stateNode={isHidden:!1},e}function fp(e,t,r){return e=_r(6,e,null,t),e.lanes=r,e}function gp(e,t,r){return t=_r(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nv(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ih(e,t,r,i,n,s,a,l,u){return e=new Nv(e,t,r,l,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_r(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lg(s),e}function Bv(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function FS(e){if(!e)return Yn;e=e._reactInternals;e:{if(mi(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var r=e.type;if(nr(r))return F_(e,r,t)}return t}function MS(e,t,r,i,n,s,a,l,u){return e=ih(r,i,!0,e,n,s,a,l,u),e.context=FS(null),r=e.current,i=jt(),n=Nn(r),s=un(i,n),s.callback=t??null,Un(r,s,n),e.current.lanes=n,bo(e,n,i),ir(e,i),e}function wu(e,t,r,i){var n=t.current,s=jt(),a=Nn(n);return r=FS(r),t.context===null?t.context=r:t.pendingContext=r,t=un(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Un(n,t,a),e!==null&&(Mr(e,n,a,s),Ea(e,n,a)),a}function al(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function sh(e,t){Cy(e,t),(e=e.alternate)&&Cy(e,t)}function Hv(){return null}var OS=typeof reportError=="function"?reportError:function(e){console.error(e)};function oh(e){this._internalRoot=e}bu.prototype.render=oh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));wu(e,t,null,null)};bu.prototype.unmount=oh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fi(function(){wu(null,e,null,null)}),t[dn]=null}};function bu(e){this._internalRoot=e}bu.prototype.unstable_scheduleHydration=function(e){if(e){var t=p_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vn.length&&t!==0&&t<vn[r].priority;r++);vn.splice(r,0,e),r===0&&f_(e)}};function ah(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xy(){}function Lv(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var d=al(a);s.call(d)}}var a=MS(t,i,e,0,null,!1,!1,"",xy);return e._reactRootContainer=a,e[dn]=a.current,no(e.nodeType===8?e.parentNode:e),fi(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var l=i;i=function(){var d=al(u);l.call(d)}}var u=ih(e,0,!1,null,null,!1,!1,"",xy);return e._reactRootContainer=u,e[dn]=u.current,no(e.nodeType===8?e.parentNode:e),fi(function(){wu(t,u,r,i)}),u}function Iu(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var l=n;n=function(){var u=al(a);l.call(u)}}wu(t,a,e,n)}else a=Lv(r,t,e,n,i);return al(a)}c_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ps(t.pendingLanes);r!==0&&(Cg(t,r|1),ir(t,vt()),!(Ve&6)&&(us=vt()+500,Xn()))}break;case 13:fi(function(){var i=fn(e,1);if(i!==null){var n=jt();Mr(i,e,1,n)}}),sh(e,1)}};xg=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var r=jt();Mr(t,e,134217728,r)}sh(e,134217728)}};u_=function(e){if(e.tag===13){var t=Nn(e),r=fn(e,t);if(r!==null){var i=jt();Mr(r,e,t,i)}sh(e,t)}};p_=function(){return tt};d_=function(e,t){var r=tt;try{return tt=e,t()}finally{tt=r}};Wp=function(e,t,r){switch(t){case"input":if(Pp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=gu(i);if(!n)throw Error(le(90));$T(i),Pp(i,n)}}}break;case"textarea":XT(e,r);break;case"select":t=r.value,t!=null&&$i(e,!!r.multiple,t,!1)}};JT=eh;ZT=fi;var Yv={usingClientEntryPoint:!1,Events:[Io,Oi,gu,GT,QT,eh]},zs={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=r_(e),e===null?null:e.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||Hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{uu=aa.inject($v),qr=aa}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;ur.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(t))throw Error(le(200));return Bv(e,t,null,r)};ur.createRoot=function(e,t){if(!ah(e))throw Error(le(299));var r=!1,i="",n=OS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=ih(e,1,!1,null,null,r,!1,i,n),e[dn]=t.current,no(e.nodeType===8?e.parentNode:e),new oh(t)};ur.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=r_(t),e=e===null?null:e.stateNode,e};ur.flushSync=function(e){return fi(e)};ur.hydrate=function(e,t,r){if(!vu(t))throw Error(le(200));return Iu(null,e,t,!0,r)};ur.hydrateRoot=function(e,t,r){if(!ah(e))throw Error(le(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=OS;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=MS(t,null,e,1,r??null,n,!1,s,a),e[dn]=t.current,no(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new bu(t)};ur.render=function(e,t,r){if(!vu(t))throw Error(le(200));return Iu(null,e,t,!1,r)};ur.unmountComponentAtNode=function(e){if(!vu(e))throw Error(le(40));return e._reactRootContainer?(fi(function(){Iu(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};ur.unstable_batchedUpdates=eh;ur.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!vu(r))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Iu(e,t,r,!1,i)};ur.version="18.3.1-next-f1338f8080-20240426";function DS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DS)}catch(e){console.error(e)}}DS(),DT.exports=ur;var Wv=DT.exports,Ey=Wv;kp.createRoot=Ey.createRoot,kp.hydrateRoot=Ey.hydrateRoot;const lh=crypto,US=e=>e instanceof CryptoKey,Bs=new TextEncoder,Co=new TextDecoder;function Xv(...e){const t=e.reduce((n,{length:s})=>n+s,0),r=new Uint8Array(t);let i=0;for(const n of e)r.set(n,i),i+=n.length;return r}const jv=e=>{let t=e;typeof t=="string"&&(t=Bs.encode(t));const r=32768,i=[];for(let n=0;n<t.length;n+=r)i.push(String.fromCharCode.apply(null,t.subarray(n,n+r)));return btoa(i.join(""))},qv=e=>jv(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Vv=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r},Hn=e=>{let t=e;t instanceof Uint8Array&&(t=Co.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Vv(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Kt extends Error{constructor(t,r){var i;super(t,r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(i=Error.captureStackTrace)==null||i.call(Error,this,this.constructor)}}Kt.code="ERR_JOSE_GENERIC";class Er extends Kt{constructor(t,r,i="unspecified",n="unspecified"){super(t,{cause:{claim:i,reason:n,payload:r}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=n,this.payload=r}}Er.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class ll extends Kt{constructor(t,r,i="unspecified",n="unspecified"){super(t,{cause:{claim:i,reason:n,payload:r}}),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=n,this.payload=r}}ll.code="ERR_JWT_EXPIRED";class PS extends Kt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}PS.code="ERR_JOSE_ALG_NOT_ALLOWED";class jr extends Kt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}jr.code="ERR_JOSE_NOT_SUPPORTED";class Kv extends Kt{constructor(t="decryption operation failed",r){super(t,r),this.code="ERR_JWE_DECRYPTION_FAILED"}}Kv.code="ERR_JWE_DECRYPTION_FAILED";class Gv extends Kt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}Gv.code="ERR_JWE_INVALID";class Rt extends Kt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Rt.code="ERR_JWS_INVALID";class Yr extends Kt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Yr.code="ERR_JWT_INVALID";class Qv extends Kt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}Qv.code="ERR_JWK_INVALID";class ch extends Kt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}ch.code="ERR_JWKS_INVALID";class NS extends Kt{constructor(t="no applicable key found in the JSON Web Key Set",r){super(t,r),this.code="ERR_JWKS_NO_MATCHING_KEY"}}NS.code="ERR_JWKS_NO_MATCHING_KEY";class BS extends Kt{constructor(t="multiple matching keys found in the JSON Web Key Set",r){super(t,r),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}BS.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class Jv extends Kt{constructor(t="request timed out",r){super(t,r),this.code="ERR_JWKS_TIMEOUT"}}Jv.code="ERR_JWKS_TIMEOUT";class HS extends Kt{constructor(t="signature verification failed",r){super(t,r),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}HS.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function en(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function la(e,t){return e.name===t}function hp(e){return parseInt(e.name.slice(4),10)}function Zv(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function eI(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const i=t.pop();r+=`one of ${t.join(", ")}, or ${i}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function tI(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!la(e.algorithm,"HMAC"))throw en("HMAC");const i=parseInt(t.slice(2),10);if(hp(e.algorithm.hash)!==i)throw en(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!la(e.algorithm,"RSASSA-PKCS1-v1_5"))throw en("RSASSA-PKCS1-v1_5");const i=parseInt(t.slice(2),10);if(hp(e.algorithm.hash)!==i)throw en(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!la(e.algorithm,"RSA-PSS"))throw en("RSA-PSS");const i=parseInt(t.slice(2),10);if(hp(e.algorithm.hash)!==i)throw en(`SHA-${i}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw en("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!la(e.algorithm,"ECDSA"))throw en("ECDSA");const i=Zv(t);if(e.algorithm.namedCurve!==i)throw en(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}eI(e,r)}function LS(e,t,...r){var i;if(r=r.filter(Boolean),r.length>2){const n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(i=t.constructor)!=null&&i.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Ry=(e,...t)=>LS("Key must be ",e,...t);function YS(e,t,...r){return LS(`Key for the ${e} algorithm must be `,t,...r)}const $S=e=>US(e)?!0:(e==null?void 0:e[Symbol.toStringTag])==="KeyObject",cl=["CryptoKey"],rI=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const i of t){const n=Object.keys(i);if(!r||r.size===0){r=new Set(n);continue}for(const s of n){if(r.has(s))return!1;r.add(s)}}return!0};function nI(e){return typeof e=="object"&&e!==null}function gi(e){if(!nI(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const iI=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function gs(e){return gi(e)&&typeof e.kty=="string"}function sI(e){return e.kty!=="oct"&&typeof e.d=="string"}function oI(e){return e.kty!=="oct"&&typeof e.d>"u"}function aI(e){return gs(e)&&e.kty==="oct"&&typeof e.k=="string"}function lI(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new jr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new jr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new jr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new jr('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const WS=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=lI(e),i=[t,e.ext??!1,e.key_ops??r],n={...e};return delete n.alg,delete n.use,lh.subtle.importKey("jwk",n,...i)},XS=e=>Hn(e);let wi,bi;const jS=e=>(e==null?void 0:e[Symbol.toStringTag])==="KeyObject",ul=async(e,t,r,i,n=!1)=>{let s=e.get(t);if(s!=null&&s[i])return s[i];const a=await WS({...r,alg:i});return n&&Object.freeze(t),s?s[i]=a:e.set(t,{[i]:a}),a},cI=(e,t)=>{if(jS(e)){let r=e.export({format:"jwk"});return delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k?XS(r.k):(bi||(bi=new WeakMap),ul(bi,e,r,t))}return gs(e)?e.k?Hn(e.k):(bi||(bi=new WeakMap),ul(bi,e,e,t,!0)):e},uI=(e,t)=>{if(jS(e)){let r=e.export({format:"jwk"});return r.k?XS(r.k):(wi||(wi=new WeakMap),ul(wi,e,r,t))}return gs(e)?e.k?Hn(e.k):(wi||(wi=new WeakMap),ul(wi,e,e,t,!0)):e},pI={normalizePublicKey:cI,normalizePrivateKey:uI};async function qS(e,t){if(!gi(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Hn(e.k);case"RSA":if(e.oth!==void 0)throw new jr('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return WS({...e,alg:t});default:throw new jr('Unsupported "kty" (Key Type) Parameter value')}}const Ai=e=>e==null?void 0:e[Symbol.toStringTag],vd=(e,t,r)=>{var i,n;if(t.use!==void 0&&t.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(t.key_ops!==void 0&&((n=(i=t.key_ops).includes)==null?void 0:n.call(i,r))!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},dI=(e,t,r,i)=>{if(!(t instanceof Uint8Array)){if(i&&gs(t)){if(aI(t)&&vd(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!$S(t))throw new TypeError(YS(e,t,...cl,"Uint8Array",i?"JSON Web Key":null));if(t.type!=="secret")throw new TypeError(`${Ai(t)} instances for symmetric algorithms must be of type "secret"`)}},fI=(e,t,r,i)=>{if(i&&gs(t))switch(r){case"sign":if(sI(t)&&vd(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(oI(t)&&vd(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!$S(t))throw new TypeError(YS(e,t,...cl,i?"JSON Web Key":null));if(t.type==="secret")throw new TypeError(`${Ai(t)} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Ai(t)} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Ai(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Ai(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Ai(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function VS(e,t,r,i){t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?dI(t,r,i,e):fI(t,r,i,e)}VS.bind(void 0,!1);const ky=VS.bind(void 0,!0);function gI(e,t,r,i,n){if(n.crit!==void 0&&(i==null?void 0:i.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(a=>typeof a!="string"||a.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(const a of i.crit){if(!s.has(a))throw new jr(`Extension Header Parameter "${a}" is not recognized`);if(n[a]===void 0)throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&i[a]===void 0)throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)}const hI=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};function yI(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new jr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function mI(e,t,r){if(t=await pI.normalizePublicKey(t,e),US(t))return tI(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Ry(t,...cl));return lh.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Ry(t,...cl,"Uint8Array","JSON Web Key"))}const TI=async(e,t,r,i)=>{const n=await mI(e,t,"verify");iI(e,n);const s=yI(e,n.algorithm);try{return await lh.subtle.verify(s,n,r,i)}catch{return!1}};async function _I(e,t,r){if(!gi(e))throw new Rt("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Rt('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Rt("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Rt("JWS Payload missing");if(typeof e.signature!="string")throw new Rt("JWS Signature missing or incorrect type");if(e.header!==void 0&&!gi(e.header))throw new Rt("JWS Unprotected Header incorrect type");let i={};if(e.protected)try{const S=Hn(e.protected);i=JSON.parse(Co.decode(S))}catch{throw new Rt("JWS Protected Header is invalid")}if(!rI(i,e.header))throw new Rt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...i,...e.header},s=gI(Rt,new Map([["b64",!0]]),r==null?void 0:r.crit,i,n);let a=!0;if(s.has("b64")&&(a=i.b64,typeof a!="boolean"))throw new Rt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=n;if(typeof l!="string"||!l)throw new Rt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const u=r&&hI("algorithms",r.algorithms);if(u&&!u.has(l))throw new PS('"alg" (Algorithm) Header Parameter value not allowed');if(a){if(typeof e.payload!="string")throw new Rt("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Rt("JWS Payload must be a string or an Uint8Array instance");let d=!1;typeof t=="function"?(t=await t(i,e),d=!0,ky(l,t,"verify"),gs(t)&&(t=await qS(t,l))):ky(l,t,"verify");const p=Xv(Bs.encode(e.protected??""),Bs.encode("."),typeof e.payload=="string"?Bs.encode(e.payload):e.payload);let f;try{f=Hn(e.signature)}catch{throw new Rt("Failed to base64url decode the signature")}if(!await TI(l,t,f,p))throw new HS;let T;if(a)try{T=Hn(e.payload)}catch{throw new Rt("Failed to base64url decode the payload")}else typeof e.payload=="string"?T=Bs.encode(e.payload):T=e.payload;const w={payload:T};return e.protected!==void 0&&(w.protectedHeader=i),e.header!==void 0&&(w.unprotectedHeader=e.header),d?{...w,key:t}:w}async function SI(e,t,r){if(e instanceof Uint8Array&&(e=Co.decode(e)),typeof e!="string")throw new Rt("Compact JWS must be a string or Uint8Array");const{0:i,1:n,2:s,length:a}=e.split(".");if(a!==3)throw new Rt("Invalid Compact JWS");const l=await _I({payload:n,protected:i,signature:s},t,r),u={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...u,key:l.key}:u}const wI=e=>Math.floor(e.getTime()/1e3),KS=60,GS=KS*60,uh=GS*24,bI=uh*7,vI=uh*365.25,II=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,zy=e=>{const t=II.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),i=t[3].toLowerCase();let n;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*KS);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*GS);break;case"day":case"days":case"d":n=Math.round(r*uh);break;case"week":case"weeks":case"w":n=Math.round(r*bI);break;default:n=Math.round(r*vI);break}return t[1]==="-"||t[4]==="ago"?-n:n},Fy=e=>e.toLowerCase().replace(/^application\//,""),AI=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,CI=(e,t,r={})=>{let i;try{i=JSON.parse(Co.decode(t))}catch{}if(!gi(i))throw new Yr("JWT Claims Set must be a top-level JSON object");const{typ:n}=r;if(n&&(typeof e.typ!="string"||Fy(e.typ)!==Fy(n)))throw new Er('unexpected "typ" JWT header value',i,"typ","check_failed");const{requiredClaims:s=[],issuer:a,subject:l,audience:u,maxTokenAge:d}=r,p=[...s];d!==void 0&&p.push("iat"),u!==void 0&&p.push("aud"),l!==void 0&&p.push("sub"),a!==void 0&&p.push("iss");for(const w of new Set(p.reverse()))if(!(w in i))throw new Er(`missing required "${w}" claim`,i,w,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(i.iss))throw new Er('unexpected "iss" claim value',i,"iss","check_failed");if(l&&i.sub!==l)throw new Er('unexpected "sub" claim value',i,"sub","check_failed");if(u&&!AI(i.aud,typeof u=="string"?[u]:u))throw new Er('unexpected "aud" claim value',i,"aud","check_failed");let f;switch(typeof r.clockTolerance){case"string":f=zy(r.clockTolerance);break;case"number":f=r.clockTolerance;break;case"undefined":f=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:_}=r,T=wI(_||new Date);if((i.iat!==void 0||d)&&typeof i.iat!="number")throw new Er('"iat" claim must be a number',i,"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new Er('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>T+f)throw new Er('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new Er('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=T-f)throw new ll('"exp" claim timestamp check failed',i,"exp","check_failed")}if(d){const w=T-i.iat,S=typeof d=="number"?d:zy(d);if(w-f>S)throw new ll('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(w<0-f)throw new Er('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i};async function xI(e,t,r){var a;const i=await SI(e,t,r);if((a=i.protectedHeader.crit)!=null&&a.includes("b64")&&i.protectedHeader.b64===!1)throw new Yr("JWTs MUST NOT use unencoded payload");const s={payload:CI(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return typeof t=="function"?{...s,key:i.key}:s}function EI(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new jr('Unsupported "alg" value for a JSON Web Key Set')}}function RI(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(kI)}function kI(e){return gi(e)}function QS(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class zI{constructor(t){if(this._cached=new WeakMap,!RI(t))throw new ch("JSON Web Key Set malformed");this._jwks=QS(t)}async getKey(t,r){const{alg:i,kid:n}={...t,...r==null?void 0:r.header},s=EI(i),a=this._jwks.keys.filter(d=>{let p=s===d.kty;if(p&&typeof n=="string"&&(p=n===d.kid),p&&typeof d.alg=="string"&&(p=i===d.alg),p&&typeof d.use=="string"&&(p=d.use==="sig"),p&&Array.isArray(d.key_ops)&&(p=d.key_ops.includes("verify")),p&&i==="EdDSA"&&(p=d.crv==="Ed25519"||d.crv==="Ed448"),p)switch(i){case"ES256":p=d.crv==="P-256";break;case"ES256K":p=d.crv==="secp256k1";break;case"ES384":p=d.crv==="P-384";break;case"ES512":p=d.crv==="P-521";break}return p}),{0:l,length:u}=a;if(u===0)throw new NS;if(u!==1){const d=new BS,{_cached:p}=this;throw d[Symbol.asyncIterator]=async function*(){for(const f of a)try{yield await My(p,f,i)}catch{}},d}return My(this._cached,l,i)}}async function My(e,t,r){const i=e.get(t)||e.set(t,{}).get(t);if(i[r]===void 0){const n=await qS({...t,ext:!0},r);if(n instanceof Uint8Array||n.type!=="public")throw new ch("JSON Web Key Set members must be public keys");i[r]=n}return i[r]}function FI(e){const t=new zI(e),r=async(i,n)=>t.getKey(i,n);return Object.defineProperties(r,{jwks:{value:()=>QS(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}const JS=qv,MI=Hn;function OI(e){if(typeof e!="string")throw new Yr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Yr("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Yr("Invalid JWT");if(!t)throw new Yr("JWTs must contain a payload");let i;try{i=MI(t)}catch{throw new Yr("Failed to base64url decode the payload")}let n;try{n=JSON.parse(Co.decode(i))}catch{throw new Yr("Failed to parse the decoded payload as JSON")}if(!gi(n))throw new Yr("Invalid JWT Claims Set");return n}class DI extends Error{constructor(){super("Invalid subject")}}class UI extends Error{constructor(){super("Invalid refresh token")}}class Oy extends Error{constructor(){super("Invalid access token")}}class PI extends Error{constructor(){super("Invalid authorization code")}}function NI(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),JS(t)}async function BI(e,t){const i=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",i);return JS(new Uint8Array(n))}async function Dy(e=64){if(e<43||e>128)throw new Error("Code verifier length must be between 43 and 128 characters");const t=NI(e),r=await BI(t);return{verifier:t,challenge:r,method:"S256"}}var HI={};function LI(e){const t=new Map,r=new Map,i=e.issuer||HI.OPENAUTH_ISSUER;if(!i)throw new Error("No issuer");const n=e.fetch??fetch;async function s(){const u=r.get(i);if(u)return u;const d=await(n||fetch)(`${i}/.well-known/oauth-authorization-server`).then(p=>p.json());return r.set(i,d),d}async function a(){const u=await s(),d=t.get(i);if(d)return d;const p=await(n||fetch)(u.jwks_uri).then(_=>_.json()),f=FI(p);return t.set(i,f),f}const l={async authorize(u,d,p){const f=new URL(i+"/authorize"),_={state:crypto.randomUUID()};if(f.searchParams.set("client_id",e.clientID),f.searchParams.set("redirect_uri",u),f.searchParams.set("response_type",d),f.searchParams.set("state",_.state),p!=null&&p.provider&&f.searchParams.set("provider",p.provider),p!=null&&p.pkce&&d==="code"){const T=await Dy();f.searchParams.set("code_challenge_method","S256"),f.searchParams.set("code_challenge",T.challenge),_.verifier=T.verifier}return{challenge:_,url:f.toString()}},async pkce(u,d){const p=new URL(i+"/authorize");d!=null&&d.provider&&p.searchParams.set("provider",d.provider),p.searchParams.set("client_id",e.clientID),p.searchParams.set("redirect_uri",u),p.searchParams.set("response_type","code");const f=await Dy();return p.searchParams.set("code_challenge_method","S256"),p.searchParams.set("code_challenge",f.challenge),[f.verifier,p.toString()]},async exchange(u,d,p){const f=await n(i+"/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:u,redirect_uri:d,grant_type:"authorization_code",client_id:e.clientID,code_verifier:p||""}).toString()}),_=await f.json();return f.ok?{err:!1,tokens:{access:_.access_token,refresh:_.refresh_token,expiresIn:_.expires_in}}:{err:new PI}},async refresh(u,d){if(d&&d.access){const _=OI(d.access);if(!_)return{err:new Oy};if((_.exp||0)>Date.now()/1e3+30)return{err:!1}}const p=await n(i+"/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:u}).toString()}),f=await p.json();return p.ok?{err:!1,tokens:{access:f.access_token,refresh:f.refresh_token,expiresIn:f.expires_in}}:{err:new UI}},async verify(u,d,p){const f=await a();try{const _=await xI(d,f,{issuer:i}),T=await u[_.payload.type]["~standard"].validate(_.payload.properties);return!T.issues&&_.payload.mode==="access"?{aud:_.payload.aud,subject:{type:_.payload.type,properties:T.value}}:{err:new DI}}catch(_){if(_ instanceof ll&&(p!=null&&p.refresh)){const T=await this.refresh(p.refresh);if(T.err)return T;const w=await l.verify(u,T.tokens.access,{refresh:T.tokens.refresh,issuer:i,fetch:p==null?void 0:p.fetch});return w.err||(w.tokens=T.tokens),w}return{err:new Oy}}}};return l}function YI(e){try{const t=e.split(".")[1];if(!t)throw new Error("Invalid JWT token structure");const r=t.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(r).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch(t){throw console.error("Error decoding JWT:",t),new Error("Could not parse JWT token")}}const yp="https://play.text2banger.fun/auth",mp="vibe-survival-game-client",Tp="https://play.text2banger.fun/callback",sr={ID_TOKEN:"oidc_id_token",ACCESS_TOKEN:"oidc_access_token",REFRESH_TOKEN:"oidc_refresh_token",PKCE_VERIFIER:"pkce_verifier"},ZS=b.createContext({userProfile:null,spacetimeToken:null,isLoading:!0,isAuthenticated:!1,authError:null,loginRedirect:async()=>{console.warn("AuthContext not initialized")},logout:async()=>{console.warn("AuthContext not initialized")},handleRedirectCallback:async()=>{console.warn("AuthContext not initialized")},invalidateCurrentToken:()=>{console.warn("AuthContext not initialized")}});function $I(e){const t=new Uint8Array(e);let r="";return t.forEach(n=>{r+=String.fromCharCode(n)}),window.btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function WI(e){const t=e,i=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",i),s=$I(n);return{code_verifier:t,code_challenge:s,code_challenge_method:"S256"}}function Uy(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let r="";const i=t.length;for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*i));return r}const XI=({children:e})=>{const[t,r]=b.useState(null),[i,n]=b.useState(()=>{const m=localStorage.getItem(sr.ID_TOKEN);return console.log(`[AuthContext LOG] Initializing token state. Found in storage: ${!!m}`),m}),[s,a]=b.useState(!0),[l,u]=b.useState(null),[d]=b.useState(()=>LI({issuer:yp,clientID:mp})),p=b.useCallback(async()=>{a(!0),u(null);try{console.log("[AuthContext] Initiating login redirect manually for password flow...");const m=Uy(128),g=await WI(m);localStorage.setItem(sr.PKCE_VERIFIER,g.code_verifier);const y=Uy(32),v=new URL("/password/login",yp);v.searchParams.set("client_id",mp),v.searchParams.set("redirect_uri",Tp),v.searchParams.set("response_type","code"),v.searchParams.set("state",y),v.searchParams.set("code_challenge",g.code_challenge),v.searchParams.set("code_challenge_method",g.code_challenge_method),v.searchParams.set("acr_values","pwd"),console.log("[AuthContext] Redirecting to manually constructed URL:",v.toString()),window.location.assign(v.toString())}catch(m){console.error("[AuthContext] Error initiating manual login redirect:",m),u(m.message||"Failed to start login process"),a(!1)}},[]),f=b.useCallback(async()=>{a(!0),u(null),console.log("[AuthContext LOG] START: Handling redirect callback...");const m=new URLSearchParams(window.location.search),g=m.get("code");if(m.get("state"),window.history.replaceState({},document.title,window.location.pathname),!g){console.warn("[AuthContext] No authorization code found in callback URL.");const v=m.get("error"),C=m.get("error_description");if(v)u(`Authentication failed: ${v} ${C?`(${C})`:""}`);else{const k=localStorage.getItem(sr.ID_TOKEN);if(k){console.log("[AuthContext] No code in URL, but found existing token."),n(k);const M=w(k);r(M)}else console.log("[AuthContext] No code and no existing token.")}a(!1),console.log("[AuthContext LOG] END: No code found in redirect callback.");return}const y=localStorage.getItem(sr.PKCE_VERIFIER);if(!y){console.error("[AuthContext] PKCE verifier missing from storage."),u("Authentication context lost. Please try logging in again."),a(!1),console.log("[AuthContext LOG] END: PKCE verifier missing.");return}localStorage.removeItem(sr.PKCE_VERIFIER);try{console.log("[AuthContext LOG] Exchanging code for tokens...");const v=new URLSearchParams;v.append("grant_type","authorization_code"),v.append("code",g),v.append("redirect_uri",Tp),v.append("client_id",mp),v.append("code_verifier",y);const C=await fetch(`${yp}/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.toString()}),k=await C.json();if(!C.ok){console.error("[AuthContext] Token exchange failed:",k);const F=k.error_description||k.error||`HTTP status ${C.status}`;throw new Error(`Token exchange failed: ${F}`)}const M=k.id_token,A=k.access_token,z=k.refresh_token;if(console.log("[AuthContext LOG] Tokens received (id_token present?):",!!M),!M)throw new Error("id_token missing from token response");localStorage.setItem(sr.ID_TOKEN,M),A&&localStorage.setItem(sr.ACCESS_TOKEN,A),z&&localStorage.setItem(sr.REFRESH_TOKEN,z),console.log("[AuthContext LOG] Setting spacetimeToken state AFTER successful callback."),n(M);const U=w(M);r(U),u(null),console.log("[AuthContext LOG] END: Callback handled successfully, redirecting to '/'..."),window.location.replace("/")}catch(v){console.error("[AuthContext] Error handling redirect callback:",v),u(v.message||"Failed to process login callback"),T(),n(null),r(null),console.log("[AuthContext LOG] END: Error during callback handling.")}finally{a(!1)}},[]),_=b.useCallback(async()=>{console.log("[AuthContext LOG] Logging out..."),a(!0),T(),n(null),r(null),u(null),console.log("[AuthContext LOG] Cleared state and tokens for logout."),a(!1),window.location.assign(window.location.origin)},[]),T=()=>{localStorage.removeItem(sr.ID_TOKEN),localStorage.removeItem(sr.ACCESS_TOKEN),localStorage.removeItem(sr.REFRESH_TOKEN),localStorage.removeItem(sr.PKCE_VERIFIER),n(null),r(null),console.log("[AuthContext LOG] Cleared tokens from storage AND state.")},w=m=>{try{const g=YI(m),y=g.sub||g.userId;return y?{userId:y}:(console.error("Could not find userId (sub or userId) in token payload:",g),null)}catch(g){return console.error("Error parsing token:",g),null}},S=b.useCallback(()=>{console.warn("[AuthContext LOG] Current token is being invalidated, likely due to rejection by a service (e.g., SpacetimeDB).");const m=!!localStorage.getItem(sr.ID_TOKEN);T(),m?u("Your session was rejected or has expired."):console.warn("[AuthContext LOG] invalidateCurrentToken called, but no token was present in storage to invalidate."),a(!1)},[u,a]);b.useEffect(()=>{if(window.location.pathname===new URL(Tp).pathname)console.log("[AuthContext LOG] Initial Load: Detected callback URL, invoking handler..."),f();else{if(i){console.log("[AuthContext LOG] Initial Load: Token was pre-loaded from storage. Parsing profile.");const m=w(i);m?(r(m),console.log("[AuthContext LOG] Initial Load: Profile parsed successfully.")):(console.error("[AuthContext LOG] Initial Load: Failed to parse pre-loaded token. Clearing token."),T())}else console.log("[AuthContext LOG] Initial Load: No token was pre-loaded from storage.");a(!1)}},[f]),b.useEffect(()=>{console.log("[AuthContext LOG] spacetimeToken STATE CHANGED to:",i?`token starting with ${i.substring(0,10)}...`:null)},[i]);const I=!!i;return P.jsx(ZS.Provider,{value:{userProfile:t,spacetimeToken:i,isLoading:s,isAuthenticated:I,authError:l,loginRedirect:p,logout:_,handleRedirectCallback:f,invalidateCurrentToken:S},children:e})},Au=()=>b.useContext(ZS),jI="rgba(40, 40, 60, 0.85)",ca="#a0a0c0",_p="2px 2px 0px rgba(0,0,0,0.5)",jn="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",Py="#777",qI="#555",VI="#1a1a2e",Ny=({handleJoinGame:e,loggedInPlayer:t})=>{const{userProfile:r,isAuthenticated:i,isLoading:n,authError:s,loginRedirect:a,logout:l}=Au(),[u,d]=b.useState(""),[p,f]=b.useState(null),_=b.useRef(null);b.useEffect(()=>{var I;i&&!t&&((I=_.current)==null||I.focus())},[i,t]);const T=()=>u.trim()?(f(null),!0):(f("Username is required to join the game"),!1),w=async I=>{if(I.preventDefault(),f(null),!i)await a();else{if(s){console.warn("[LoginScreen] Attempted to join game while authError is present. Aborting. Error:",s);return}t?e(null):T()&&e(u)}},S=I=>{I.key==="Enter"&&!n&&i&&!t&&w(I)};return P.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",width:"100%",fontFamily:jn,backgroundColor:VI},children:P.jsxs("div",{style:{backgroundColor:jI,color:"white",padding:"40px",borderRadius:"4px",border:`1px solid ${ca}`,boxShadow:_p,textAlign:"center",minWidth:"400px",maxWidth:"500px"},children:[P.jsx("div",{style:{fontSize:"24px",marginBottom:"10px",color:"#e0e0e0",fontFamily:jn},children:"Vibe Survival"}),P.jsx("div",{style:{fontSize:"14px",marginBottom:"30px",color:"#b0b0c0",fontFamily:jn},children:"2D Survival Multiplayer"}),n?P.jsx("p",{children:"Loading..."}):s?P.jsxs(P.Fragment,{children:[P.jsxs("p",{style:{color:"red",marginTop:"15px",fontSize:"12px",padding:"8px",backgroundColor:"rgba(255,0,0,0.1)",borderRadius:"4px",marginBottom:"20px"},children:[s,P.jsx("br",{}),"Please try signing out and signing in again."]}),P.jsx("button",{onClick:l,disabled:n,style:{padding:"10px 20px",border:`1px solid ${ca}`,backgroundColor:Py,color:"white",fontFamily:jn,fontSize:"14px",cursor:"pointer",boxShadow:_p,width:"100%",marginBottom:"15px",textTransform:"uppercase",borderRadius:"2px"},children:"Sign Out"})]}):i?t?P.jsxs("p",{style:{marginBottom:"20px",fontSize:"14px"},children:["Welcome back, ",t.username,"!"]}):P.jsx("input",{ref:_,type:"text",placeholder:"Choose Your Username",value:u,onChange:I=>d(I.target.value),onKeyDown:S,style:{padding:"10px",marginBottom:"20px",border:`1px solid ${ca}`,backgroundColor:"#333",color:"white",fontFamily:jn,fontSize:"14px",display:"block",width:"calc(100% - 22px)",textAlign:"center",boxSizing:"border-box",borderRadius:"2px"}}):null,!n&&!s&&P.jsx("form",{onSubmit:w,children:P.jsx("button",{type:"submit",disabled:i&&!!s,style:{padding:"12px 20px",border:`1px solid ${ca}`,backgroundColor:i&&s?qI:Py,color:i&&s?"#aaa":"white",fontFamily:jn,fontSize:"14px",cursor:i&&s?"not-allowed":"pointer",boxShadow:_p,display:"inline-block",boxSizing:"border-box",marginBottom:"20px",textTransform:"uppercase",borderRadius:"2px"},children:i?"Join Game":"Sign In / Sign Up"})}),p&&!s&&P.jsx("p",{style:{color:"red",marginTop:"0px",marginBottom:"15px",fontSize:"12px",padding:"8px",backgroundColor:"rgba(255,0,0,0.1)",borderRadius:"4px"},children:p}),i&&!s&&P.jsxs("div",{style:{marginTop:"20px"},children:[r&&P.jsxs("span",{style:{fontSize:"10px",color:"#ccc",display:"block",marginBottom:"8px"},children:["(ID: ",r.userId,")"]}),P.jsx("button",{onClick:l,disabled:n,style:{padding:"5px 10px",fontSize:"10px",background:"#444",color:"white",border:"1px solid #555",cursor:n?"not-allowed":"pointer",fontFamily:jn,borderRadius:"2px"},children:"Sign Out"})]})]})})};function KI(e,t){const[r,i]=b.useState(0),n=b.useRef(null);return b.useEffect(()=>(n.current=window.setInterval(()=>{i(s=>(s+1)%t)},e),()=>{n.current&&clearInterval(n.current)}),[e,t]),r}const GI="/assets/hero2-DwzNtk6R.png",QI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFoUExURTxIIz9LJDtHITdDIT5KJDhEIjpFIkJOIUZSIkdTIkNPIjhEITtGIUFNIT9LIT1JIUBLIkVRIUJOIEZSIUhUIkVRIklVIk1ZIkpXIkRQI0dSIkFMIEFNIENPIUJNITlFIT9KIT5KIURQIURQJkJPIkpWIk9bIkVSIUBMIUFNIkxYIk5bIkhVIk5aIkdTIUtXIkRPIUtYIklUIUlWIkhVIUxZIkJNIkZRIU1aIkpWIUhUIVBdI1BdIklVIURPIlBcIjpGIUFMIT1IIUVQIU9cIlNgIz1KITxIIUNOIUlUIkBLIU9cIzxHIU5bI0dUIUVSIkZTIUdSIUhTIUBNITtIITZCIThFIUtYITpFIUNQIUtXITpHIUlWITlEIT5JIUNQIjdEIURQIkpXITlGIUZRIkdUIkFOIVBcI0JPIURRITZDIUxZIUxYIT5KIj5LIVJfIlFeIjVBIT1IIEFOIj9LIDxJIVJfI0JOIkSZFuoAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuN4vW9zkAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuNwADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAAAlR56NozS1xQAABwhJREFUSEsVVe2D2zYZNzagpp5khFIrjOl8FrPPSLUULxGV1Zj4elod2hKuL9eubTjajEE7Ssfb4N9H++IvlvQ8z+/tiaIfxcmPf/JTcGN2M/0EogzFP8P454TMb+V0MZ/94lP4y8/YSXFa8htzAuM4+tWt2Y3Py/m8quvFWYP4r2/lQt7GrWxprjTBS919UWmcr9ZG13NwGv1mrpSqKnanq626TXRfSUoVmLcVzqnD5FTdVe5TuhFDlSvGUPTbPNdVRdR8SYXemgowPgOsHEFWwMoRcROdjuAc05rAexnkF5H2m9ZvW/ulV9TlFN6f4qwpxzS+KSrhay+r3Qn/nZ45FE8PFOcRJlVtW/GwI5A9grspzTibCrAyW0+7jZS/95LgvDLSNOBOntOInTNMhLrJ9zOcFUl8W66wy1fVRjtpezzUQnGiVyqMJirZishSNU1NWTROAXR/TttWyu0cGwIxIXjtCNayNlQsgf7DpBWMwq+8KrKmGFEBLN3Iy0GacLdsTvCi3bSYV51pu+3jYiohn8aItLURnaRhKKR0TwZeAl4WE5emlk80IcKuqLeuUTtO7RxHzdPKtrLTG6lWDiMAn6VX6XNm5cbaheYZw4N9sd99Vb48e2VsDqIEQEiGlgra+rt983osQcPM1hzkgCDIpqKEj3ZEn7Fe4OGHlopsLFKgZ1gJtyJqr7izm41m5RL+cYxJjtIkq2S9tbpSBJVJBEBTJlfTSwyvi4xIKWm78Q7GSVKwhai9JaQNOLU5GTowpdeRdtpUf8rexMlUEqmXg18FLOca38MiN8Z7euildWqtFCvGt6uoE57KjbmZnQAI1EDCEROakkaKds9UtzhgBOHY3IHX5zk1MppY17bO6oHOyuZAwLA6WH+U1krZuaYEDk8lQmgcr0aEHQHR19NODYP14QhhHJZTw90hqO4QGPkzexBg+qQJbDsEZ2qKx+voVpw2O9IppzhAaaPY2GAww3u+Q2MGsqwYr0lrhs5utaxieBl9MwvizGAZgybOAF5XIC2K16cXbEyAMgswf7wSPlAbOuwIcSoyba1VmZQrqXUvPa3o/C8QTHGRQO0Fpfvw9XW1ZpwRvV6Z6BsdLtcqt7StN74agmPWGLwdC6gwd9o+pOav1vdgGnnwGp1F8fWub7UQinDe0x8sgN7dTwHgnbfvERg6g51aKBY3oYJ7F0df3z/d4QV9qN0MYBHaDdGBzlaBsk5bWJQBuWbG0DiBZ0XTfDtFX50u43K1cKtAf1AnHw4cV6rbbGROyLoZkzF9k42IGJE3aTrNo2Z8AGB5DfZWHow9dD3PMj6Iv6kwqs45SifECtBvt8J34B1hUYO/GAQBSUHWzq0rz4qpmUoA+V4ZvctKnlc6r60ZAs068BfNOylsRfGbjHV+QE2ozs/Q+JrjBvLXZV5vfR0oOFihLvqOzKMVXR231IlvsvQUNykCwgmj2P1xLK7ic0VXs8Ca6iXtFSAfnIuKv2PnjK34y+kqKYlZ9EcZ3FKT4Lx56xfBZh+V1ZcETeiyO7DoHXzbINypJpkgFu2CfvePIBulgwOkN2HwHiYj59dJ8Z6+uoSnkRzO+NcFip8hvqA9n8BA8RN0rmxNFXEuwH358Z9FmiD8wtvuJYtWjlR8+nZESnpbV6DMTq4fIbYc3BKUJVAzGHIA3MyDcVunXBmhgYb0ZHMpxRPXK0WyeAq19mzXxONVUpRXBRva7daafM13TRHBS+UElVvTHzF/FeTqhFPGeqP4XnM0FnwxBD9IaZe3ijgpomxqMLZWkYG2ISgrFfz8wQRvy6PZvFAL86r2A28Y7kMGsMvPozksko+cQTw/6709HKQVojU4Y5xXilWbu7bzMs/SsRynXWcfRl6EVZdkuQtLR5GDzTl3uWPNlJZwTJHrvCPkYsBZYLHb20MUwDHNv4g9KDUVkLNyuprYveQRgM+Lf88xubgE8X8U6fSqCklyWEac5MFk6tB6P7z/Pk5jzMck5W2nGPFUIRiPEFzebmshhKzwEH10ofW1rW3V9VIzro93OFQba7xsh/MSJZPeGNn2QiwJYU0cjSU+YOYcdxeEbjwlKqAuu/UQ7EpO0MSk7/xxwIixaYzTLHoKgmpVU5bPGpwfXRD9d743ZPdEXDbMvaKDpq1RmID42ZhNpIsgG/5r9qwpEIqzl8Qxrn5o8liiKc5b6aXDnTc8bLG3C7cwJOrLaaXYwR57lV1BNj3/viSHA4ZFOvJXHxQ5hgRV5DP12NFa+tpGgbPzoB0hN0LB+CqFsHyEpnQE/OQaAfYEE/isRNkJluFNuWdRwS4AnvOhX4i+mZCTKw7TEuRUkqDTMQyXTs3TZYk4vjgq0ERJliUZ6fBu+SCIWRzzC2x05317m+/zk+JqHDMl/nevOAWkJefj+H/ehXfvCfZuSwAAAABJRU5ErkJggg==",ph="/assets/bone-B3ABvVgV.png",e0="/assets/bone-B3ABvVgV.png",JI="/assets/bone-B3ABvVgV.png",ZI="/assets/bone-B3ABvVgV.png",eA="/assets/bone-B3ABvVgV.png",tA="/assets/bone-B3ABvVgV.png",rA="/assets/bone-B3ABvVgV.png";function nA(){const[e,t]=b.useState(!0),r=b.useRef(null),i=b.useRef(null),n=b.useRef(null),s=b.useRef(null),a=b.useRef(new Map),l=b.useRef(new Map);return b.useEffect(()=>{let u=0;const d=9;let p=!1;const f=()=>{!p&&u===d&&(p=!0,t(!1))},_=(T,w,S,I)=>{const m=new Image;m.src=T,m.onload=()=>{w&&(w.current=m),S&&I&&S.current.set(I,m),u++,f()},m.onerror=()=>{console.error(`Failed to load image: ${I||T}`),u++,f()}};_(GI,r),_(QI,i),_(ph,n),_(e0,s,a,"burlap_sack.png"),_(JI,void 0,l,"cloud1.png"),_(ZI,void 0,l,"cloud2.png"),_(eA,void 0,l,"cloud3.png"),_(tA,void 0,l,"cloud4.png"),_(rA,void 0,l,"cloud5.png")},[]),{heroImageRef:r,grassImageRef:i,campfireImageRef:n,burlapSackImageRef:s,itemImagesRef:a,cloudImagesRef:l,isLoadingAssets:e}}function t0(e){const[t,r]=b.useState({width:window.innerWidth,height:window.innerHeight});b.useEffect(()=>{const s=()=>{r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const i=b.useMemo(()=>e?t.width/2-e.positionX:0,[e,t.width]),n=b.useMemo(()=>e?t.height/2-e.positionY:0,[e,t.height]);return{canvasSize:t,cameraOffsetX:i,cameraOffsetY:n}}function iA({canvasRef:e,cameraOffsetX:t,cameraOffsetY:r,canvasSize:i}){const[n,s]=b.useState({x:null,y:null}),[a,l]=b.useState({x:null,y:null}),[u,d]=b.useState({x:null,y:null});return b.useEffect(()=>{const p=e.current;if(!p)return;const f=T=>{const w=p.getBoundingClientRect(),S=p.width/w.width,I=p.height/w.height,m=(T.clientX-w.left)*S,g=(T.clientY-w.top)*I;s({x:m,y:g});const y=m-t,v=g-r;l({x:y,y:v});const C=m-w.left,k=g-w.top;d({x:C,y:k})},_=()=>{s({x:null,y:null}),l({x:null,y:null}),d({x:null,y:null})};return p.addEventListener("mousemove",f),p.addEventListener("mouseleave",_),()=>{p.removeEventListener("mousemove",f),p.removeEventListener("mouseleave",_)}},[e,t,r,i]),{screenMousePos:n,worldMousePos:a,canvasMousePos:u}}const r0="/assets/hero2-DwzNtk6R.png";function By(e,t,r,i,n){e.save(),e.fillStyle="rgba(0, 0, 0, 0.35)",e.beginPath(),e.ellipse(t,r,i,n,0,0,Math.PI*2),e.fill(),e.restore()}function _t(e,t,r){return e*(1-r)+t*r}function xo(e,t={}){const r=t.cycleProgress??.375;let i,n,s,a;const l=t.color??"0,0,0",u=(t.blur??5)-1>0?(t.blur??5)-1:1,d=(t.blur??5)+2,p=t.blur??5,f=.45,_=0;if(r<.05){const T=r/.05;i=_t(_,f,T),n=_t(12,4,T),s=_t(4,2,T),a=_t(d,p,T)}else if(r<.4){const T=(r-.05)/.35000000000000003;i=f,n=_t(8,0,T),s=_t(3,1,T),a=p}else if(r<.5)i=f,n=0,s=1,a=u;else if(r<.7){const T=(r-.5)/.19999999999999996;i=f,n=_t(0,-8,T),s=_t(1,3,T),a=p}else if(r<.75){const T=(r-.7)/.05;i=_t(f,_,T),n=_t(-4,-12,T),s=_t(2,4,T),a=_t(p,d,T)}else i=_,n=0,s=0,a=p;e.shadowColor=`rgba(${l},${i.toFixed(2)})`,e.shadowBlur=Math.round(a),e.shadowOffsetX=Math.round(n),e.shadowOffsetY=Math.round(s)}const Hy=new Map;function Ti({ctx:e,entityImage:t,entityCenterX:r,entityBaseY:i,imageDrawWidth:n,imageDrawHeight:s,cycleProgress:a,baseShadowColor:l="0,0,0",maxShadowAlpha:u=.35,maxStretchFactor:d=1.8,minStretchFactor:p=.1,shadowBlur:f=0,pivotYOffset:_=0}){let T,w,S;if(a<.05){const g=a/.05;T=_t(0,u,g),w=_t(d*.7,d*.5,g),S=_t(-.4,-.2,g)}else if(a<.4){const g=(a-.05)/.35000000000000003;T=u,w=_t(d*.5,p,g),S=_t(-.2,0,g)}else if(a<.5)T=u,w=p,S=0;else if(a<.7){const g=(a-.5)/.19999999999999996;T=u,w=_t(p,d*.5,g),S=_t(0,.2,g)}else if(a<.75){const g=(a-.7)/.05;T=_t(u,0,g),w=_t(d*.5,d*.7,g),S=_t(.2,.4,g)}else T=0,w=d*.7,S=.4;if(T<.01||w<.01)return;const I=`${t.src}-${l}`;let m=Hy.get(I);if(!m){const g=document.createElement("canvas");g.width=n,g.height=s;const y=g.getContext("2d");if(!y){console.error("Failed to get 2D context from offscreen canvas for shadow rendering.");return}y.drawImage(t,0,0,n,s),y.globalCompositeOperation="source-in",y.fillStyle=`rgba(${l}, 1.0)`,y.fillRect(0,0,n,s),Hy.set(I,g),m=g}e.save(),e.translate(r,i-_),e.scale(-1,-1),e.transform(1,S,0,w,0,0),f>0&&(e.filter=`blur(${f}px)`),e.globalAlpha=T,e.drawImage(m,-n/2,-s,n,s),f>0&&(e.filter="none"),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.restore()}class sA{constructor(){h(this,"cache",new Map)}preloadImage(t){if(!t||this.cache.has(t))return;const r=new Image,i={image:r,status:"loading"};this.cache.set(t,i),r.onload=()=>{i.status="loaded"},r.onerror=()=>{i.status="error",console.error(`[ImageManager] Failed to load image: ${t}`)},r.src=t}getImage(t){if(!t)return null;const r=this.cache.get(t);return r?r.status==="loaded"&&r.image.complete&&r.image.naturalHeight!==0?r.image:(r.status==="loading",null):(console.warn(`[ImageManager] Image not preloaded, attempting to load now: ${t}`),this.preloadImage(t),null)}isImageLoaded(t){if(!t)return!1;const r=this.cache.get(t);return!!r&&r.status==="loaded"&&r.image.complete&&r.image.naturalHeight!==0}}const Gt=new sA;function Ur({ctx:e,entity:t,config:r,nowMs:i,entityPosX:n,entityPosY:s,cycleProgress:a,onlyDrawShadow:l,skipDrawingShadow:u}){const d=r.getImageSource(t);if(!d&&!t.isDestroyed)return;const p=d?Gt.getImage(d):null;if(p&&p.complete&&p.naturalHeight!==0||t.isDestroyed&&r.drawOverlay){const{width:f,height:_}=p?r.getTargetDimensions(p,t):{width:0,height:0},{drawX:T,drawY:w}=r.calculateDrawPosition(t,f,_);if(l){r.drawCustomGroundShadow&&p&&r.drawCustomGroundShadow(e,t,p,n,s,f,_,a);return}e.save(),r.drawCustomGroundShadow&&p&&!u&&r.drawCustomGroundShadow(e,t,p,n,s,f,_,a);let S=0,I=0;if(r.applyEffects){const y=r.applyEffects(e,t,i,T,w,a);S=y.offsetX,I=y.offsetY}const m=T+S,g=w+I;if(p&&!t.isDestroyed&&e.drawImage(p,m,g,f,_),e.restore(),r.drawOverlay){const y=p?f:r.getTargetDimensions({naturalWidth:64,naturalHeight:64},t).width,v=p?_:r.getTargetDimensions({naturalWidth:64,naturalHeight:64},t).height,C=p?m:t.posX-y/2,k=p?g:t.posY-v;r.drawOverlay(e,t,C,k,y,v,i,T,w)}}else if(r.fallbackColor&&!t.isDestroyed){const{drawX:T,drawY:w}=r.calculateDrawPosition(t,32,32);e.fillStyle=r.fallbackColor,e.fillRect(T,w,32,32)}}const oA=64,Kr=64,Ly=64,Yy=64,Eo=10,dh=96*96,$y=25,aA=0,Wy=150,lA=8,ua=50,pa=6,cA=10,Xy=3e3,uA={getImageSource:e=>e.isDestroyed?null:e.isBurning?ph:r0,getTargetDimensions:(e,t)=>({width:oA,height:Kr}),calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r-Eo}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{t.isBurning&&!t.isDestroyed&&Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:1.2,minStretchFactor:.1,shadowBlur:2,pivotYOffset:35})},applyEffects:(e,t,r,i,n,s)=>{t.isDestroyed||t.isBurning||xo(e,{cycleProgress:s,blur:2,color:"0,0,0"});let a=0,l=0;if(t.lastHitTime&&!t.isDestroyed){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<Wy){const p=1-d/Wy,f=lA*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},drawOverlay:(e,t,r,i,n,s,a,l,u)=>{if(t.isDestroyed)return;const d=t.health??0,p=t.maxHealth??1;if(d<p&&t.lastHitTime){const f=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),_=a-f;if(_<Xy){const T=Math.max(0,d/p),w=r+(n-ua)/2,S=i-cA-pa,I=_/Xy,m=Math.max(0,1-Math.pow(I,2));e.fillStyle=`rgba(0, 0, 0, ${.5*m})`,e.fillRect(w,S,ua,pa);const g=ua*T,y=Math.floor(255*(1-T)),v=Math.floor(255*T);e.fillStyle=`rgba(${y}, ${v}, 0, ${m})`,e.fillRect(w,S,g,pa),e.strokeStyle=`rgba(0, 0, 0, ${.7*m})`,e.lineWidth=1,e.strokeRect(w,S,ua,pa)}}},fallbackColor:"#663300"};Gt.preloadImage(ph);Gt.preloadImage(r0);function n0(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:uA,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const Cu=150,fh=5,i0="rgba(255, 200, 100, 0.8)",s0="rgba(255, 200, 100, 0)",pA=Cu*.8,dA=fh*.7,fA=i0,gA=s0,hA=({ctx:e,player:t,activeEquipments:r,itemDefinitions:i,cameraOffsetX:n,cameraOffsetY:s})=>{if(!t.isTorchLit||!t.identity)return;const a=t.identity.toHexString(),l=r.get(a);if(l&&l.equippedItemDefId){const u=i.get(l.equippedItemDefId.toString());if(u&&u.name==="Torch"){const d={centerX:t.positionX,centerY:t.positionY,radius:pA,innerColor:fA,outerColor:gA,flickerAmount:dA},p=d.centerX+n,f=d.centerY+s,_=(Math.random()-.5)*2*d.flickerAmount,T=Math.max(0,d.radius+_),w=e.createRadialGradient(p,f,0,p,f,T);w.addColorStop(0,d.innerColor),w.addColorStop(1,d.outerColor),e.fillStyle=w,e.beginPath(),e.arc(p,f,T,0,Math.PI*2),e.fill()}}},yA=({ctx:e,campfire:t,cameraOffsetX:r,cameraOffsetY:i})=>{if(!t.isBurning)return;const n=t.posX,s=t.posY-Kr/2-Eo,a=n+r,l=s+i,u=(Math.random()-.5)*2*fh,d=Math.max(0,Cu+u)*2,p=e.createRadialGradient(a,l,0,a,l,d);p.addColorStop(.3,i0),p.addColorStop(1,s0),e.fillStyle=p,e.beginPath(),e.arc(a,l,d,0,Math.PI*2),e.fill()},mA=Cu*.8,TA=fh*.7,Ki={rgb:[0,0,0],alpha:0},Fs=[{progress:0,rgb:[0,0,1],alpha:.99},{progress:.02,rgb:[0,0,1],alpha:.99},{progress:.035,rgb:[30,25,65],alpha:.85},{progress:.05,rgb:[50,40,80],alpha:.78},{progress:.07,rgb:[90,60,100],alpha:.65},{progress:.09,rgb:[160,80,90],alpha:.5},{progress:.11,rgb:[220,110,70],alpha:.35},{progress:.13,rgb:[255,140,60],alpha:.2},{progress:.15,rgb:[255,170,80],alpha:.1},{progress:.18,rgb:[255,190,100],alpha:.05},{progress:.22,...Ki},{progress:.5,...Ki},{progress:.6,...Ki},{progress:.63,rgb:[255,190,110],alpha:.05},{progress:.66,rgb:[255,160,70],alpha:.15},{progress:.69,rgb:[240,120,50],alpha:.3},{progress:.72,rgb:[200,80,60],alpha:.5},{progress:.75,rgb:[150,70,100],alpha:.65},{progress:.78,rgb:[80,50,90],alpha:.8},{progress:.81,rgb:[5,5,10],alpha:.96},{progress:.9,rgb:[0,0,2],alpha:.98},{progress:1,rgb:[0,0,1],alpha:.99}],da=[{progress:0,rgb:[130,150,190],alpha:.4},{progress:.02,rgb:[135,155,195],alpha:.38},{progress:.035,rgb:[150,160,190],alpha:.32},{progress:.05,rgb:[170,165,180],alpha:.25},{progress:.07,rgb:[190,170,170],alpha:.18},{progress:.09,rgb:[210,180,160],alpha:.12},{progress:.11,rgb:[230,190,150],alpha:.08},{progress:.13,rgb:[250,200,140],alpha:.04},{progress:.15,rgb:[255,215,150],alpha:.02},{progress:.18,rgb:[255,225,170],alpha:.01},{progress:.22,...Ki},{progress:.5,...Ki},{progress:.6,...Ki},{progress:.63,rgb:[255,215,160],alpha:.01},{progress:.66,rgb:[250,190,130],alpha:.06},{progress:.69,rgb:[230,160,110],alpha:.12},{progress:.72,rgb:[200,140,120],alpha:.2},{progress:.75,rgb:[170,150,180],alpha:.28},{progress:.78,rgb:[150,150,190],alpha:.35},{progress:.81,rgb:[140,150,190],alpha:.38},{progress:.9,rgb:[135,155,195],alpha:.39},{progress:1,rgb:[130,150,190],alpha:.4}],jy=3;function _A(e,t){var I;const r=(t==null?void 0:t.isFullMoon)??!1,i=(t==null?void 0:t.cycleCount)??0,n=.03,s=((I=Fs.find(m=>m.progress===.15))==null?void 0:I.progress)??.15,a=i===0||(i-1)%jy!==0;if(r&&e<n&&a){const m=Fs[0],g=da[0];let y=0;y=e/n,y=Math.max(0,Math.min(y,1));const v=Math.round(m.rgb[0]*(1-y)+g.rgb[0]*y),C=Math.round(m.rgb[1]*(1-y)+g.rgb[1]*y),k=Math.round(m.rgb[2]*(1-y)+g.rgb[2]*y),M=m.alpha*(1-y)+g.alpha*y;return`rgba(${v},${C},${k},${M.toFixed(2)})`}const l=i>0&&(i-1)%jy===0;if(!r&&e<s&&l){const m=da[da.length-1],g=Fs.find(A=>A.progress===s)??Fs[1];let y=0;s>0&&(y=e/s),y=Math.max(0,Math.min(y,1));const v=Math.round(m.rgb[0]*(1-y)+g.rgb[0]*y),C=Math.round(m.rgb[1]*(1-y)+g.rgb[1]*y),k=Math.round(m.rgb[2]*(1-y)+g.rgb[2]*y),M=m.alpha*(1-y)+g.alpha*y;return`rgba(${v},${C},${k},${M.toFixed(2)})`}const u=r?da:Fs;let d=u[0],p=u[u.length-1];if(e<=u[0].progress)d=u[0],p=u[0];else if(e>=u[u.length-1].progress)d=u[u.length-1],p=u[u.length-1];else for(let m=0;m<u.length-1;m++)if(e>=u[m].progress&&e<u[m+1].progress){d=u[m],p=u[m+1];break}let f=0;p.progress>d.progress&&(f=(e-d.progress)/(p.progress-d.progress)),f=Math.max(0,Math.min(f,1));const _=Math.round(d.rgb[0]*(1-f)+p.rgb[0]*f),T=Math.round(d.rgb[1]*(1-f)+p.rgb[1]*f),w=Math.round(d.rgb[2]*(1-f)+p.rgb[2]*f),S=d.alpha*(1-f)+p.alpha*f;return`rgba(${_},${T},${w},${S.toFixed(2)})`}function SA({worldState:e,campfires:t,players:r,activeEquipments:i,itemDefinitions:n,cameraOffsetX:s,cameraOffsetY:a,canvasSize:l}){const u=b.useRef(null),[d,p]=b.useState("transparent"),f=b.useMemo(()=>{let _="torch_light_states:";return r.forEach((T,w)=>{const S=i.get(w);if(S&&S.equippedItemDefId){const I=n.get(S.equippedItemDefId.toString());I&&I.name==="Torch"&&(_+=`${w}:${T.isTorchLit};`)}}),_},[r,i,n]);return b.useEffect(()=>{u.current||(u.current=document.createElement("canvas"));const _=u.current,T=_.getContext("2d");if(!T||l.width===0||l.height===0){p("transparent");return}_.width=l.width,_.height=l.height;const w=e==null?void 0:e.cycleProgress;let S;typeof w=="number"?S=_A(w,e):S="rgba(0,0,0,0)",p(S),T.fillStyle=S,T.fillRect(0,0,_.width,_.height),T.globalCompositeOperation="destination-out",t.forEach(I=>{if(I.isBurning){const g=I.posY-Kr/2-Kr*0,y=I.posX+s,v=g+a,C=Cu,k=T.createRadialGradient(y,v,C*.1,y,v,C);k.addColorStop(0,"rgba(0,0,0,1)"),k.addColorStop(1,"rgba(0,0,0,0)"),T.fillStyle=k,T.beginPath(),T.arc(y,v,C,0,Math.PI*2),T.fill()}}),r.forEach((I,m)=>{if(!I||I.isDead)return;const g=i.get(m);if(!g||!g.equippedItemDefId)return;const y=n.get(g.equippedItemDefId.toString());if(!(!y||y.name!=="Torch")&&y&&y.name==="Torch"&&I.isTorchLit){const v=I.positionX+s,C=I.positionY+a,k=(Math.random()-.5)*2*TA,M=Math.max(0,mA+k),A=T.createRadialGradient(v,C,M*.1,v,C,M);A.addColorStop(0,"rgba(0,0,0,1)"),A.addColorStop(1,"rgba(0,0,0,0)"),T.fillStyle=A,T.beginPath(),T.arc(v,C,M,0,Math.PI*2),T.fill()}}),T.globalCompositeOperation="source-over"},[e,t,r,i,n,s,a,l.width,l.height,f]),{overlayRgba:d,maskCanvasRef:u}}const wA=64*64,bA=64*64,vA=64*64,IA=dh,AA=18,CA=64*64,xA=64,EA=96,RA=88,kA=64;function zA({localPlayer:e,mushrooms:t,corns:r,pumpkins:i,hemps:n,campfires:s,droppedItems:a,woodenStorageBoxes:l,playerCorpses:u,stashes:d,sleepingBags:p}){const[f,_]=b.useState(null),[T,w]=b.useState(null),[S,I]=b.useState(null),[m,g]=b.useState(null),[y,v]=b.useState(null),[C,k]=b.useState(null),[M,A]=b.useState(null),[z,U]=b.useState(!1),[F,j]=b.useState(null),[Y,B]=b.useState(null),[$,H]=b.useState(null),q=b.useMemo(()=>{let N=null,L=64*64,X=null,te=wA,ge=null,ue=bA,ie=null,J=vA,W=null,G=dh,Q=null,K=64*64,x=null,E=64*64,re=!1,Z=null,V=64*64,oe=null,Me=null,pt=IA;if(e){const dt=e.positionX,fe=e.positionY;if(t.forEach(ne=>{if(ne.respawnAt!==null&&ne.respawnAt!==void 0)return;const pe=ne.posY-64/2,be=dt-ne.posX,Te=fe-pe,ye=be*be+Te*Te;ye<L&&(L=ye,N=ne.id)}),r.forEach(ne=>{if(ne.respawnAt!==null&&ne.respawnAt!==void 0)return;const pe=ne.posY-96/2,be=dt-ne.posX,Te=fe-pe,ye=be*be+Te*Te;ye<te&&(te=ye,X=ne.id)}),i.forEach(ne=>{const pe=ne.posY-32,be=dt-ne.posX,Te=fe-pe,ye=be*be+Te*Te;ye<ue&&(ue=ye,ge=ne.id)}),n&&n.forEach(ne=>{if(ne.respawnAt!==null&&ne.respawnAt!==void 0)return;const pe=ne.posY-88/2,be=dt-ne.posX,Te=fe-pe,ye=be*be+Te*Te;ye<J&&(J=ye,ie=ne.id)}),s.forEach(ne=>{const pe=ne.posY-Kr/2-Eo,be=dt-ne.posX,Te=fe-pe,ye=be*be+Te*Te;ye<G&&(G=ye,W=ne.id)}),a.forEach(ne=>{const pe=dt-ne.posX,be=fe-ne.posY,Te=pe*pe+be*be;Te<K&&(K=Te,Q=ne.id)}),l.forEach(ne=>{const pe=dt-ne.posX,be=fe-ne.posY,Te=pe*pe+be*be;if(Te<E){E=Te,x=ne.id;let ye=!0;for(let xe=0;xe<AA;xe++){const Fe=`slotInstanceId${xe}`;if(ne[Fe]!==null&&ne[Fe]!==void 0){ye=!1;break}}re=ye}}),u&&u.forEach(ne=>{const pe=dt-ne.posX,be=fe-ne.posY,Te=pe*pe+be*be;Te<V&&(V=Te,Z=ne.id)}),d){let ne=1/0;d.forEach(pe=>{const be=dt-pe.posX,Te=fe-pe.posY,ye=be*be+Te*Te,xe=pe.isHidden?24*24:48*48;ye<xe&&ye<ne&&(ne=ye,oe=pe.id)})}p&&p.forEach(ne=>{const pe=dt-ne.posX,be=fe-ne.posY,Te=pe*pe+be*be;Te<pt&&(pt=Te,Me=ne.id)})}return{closestInteractableMushroomId:N,closestInteractableCornId:X,closestInteractablePumpkinId:ge,closestInteractableHempId:ie,closestInteractableCampfireId:W,closestInteractableDroppedItemId:Q,closestInteractableBoxId:x,isClosestInteractableBoxEmpty:re,closestInteractableCorpseId:Z,closestInteractableStashId:oe,closestInteractableSleepingBagId:Me}},[e,t,r,i,n,s,a,l,u,d,p]);return b.useEffect(()=>{q.closestInteractableMushroomId!==f&&_(q.closestInteractableMushroomId),q.closestInteractableCornId!==T&&w(q.closestInteractableCornId),q.closestInteractablePumpkinId!==S&&I(q.closestInteractablePumpkinId),q.closestInteractableHempId!==m&&g(q.closestInteractableHempId),q.closestInteractableCampfireId!==y&&v(q.closestInteractableCampfireId),q.closestInteractableDroppedItemId!==C&&k(q.closestInteractableDroppedItemId),q.closestInteractableBoxId!==M&&A(q.closestInteractableBoxId),q.isClosestInteractableBoxEmpty!==z&&U(q.isClosestInteractableBoxEmpty),q.closestInteractableCorpseId!==F&&j(q.closestInteractableCorpseId),q.closestInteractableStashId!==Y&&B(q.closestInteractableStashId),q.closestInteractableSleepingBagId!==$&&H(q.closestInteractableSleepingBagId)},[q]),{closestInteractableMushroomId:f,closestInteractableCornId:T,closestInteractablePumpkinId:S,closestInteractableHempId:m,closestInteractableCampfireId:y,closestInteractableDroppedItemId:C,closestInteractableBoxId:M,isClosestInteractableBoxEmpty:z,closestInteractableCorpseId:F,closestInteractableStashId:Y,closestInteractableSleepingBagId:$}}function FA(e){const t=b.useRef(0),r=b.useRef(e);b.useEffect(()=>{r.current=e},[e]),b.useEffect(()=>{const i=()=>{r.current(),t.current=requestAnimationFrame(i)};return t.current=requestAnimationFrame(i),()=>{cancelAnimationFrame(t.current)}},[])}const o0="utf-8";function Xe(e,t=void 0){if(e)throw TypeError("Decoder error");return t||65533}function Dr(e){throw TypeError("The code point "+e+" could not be encoded.")}function Id(e){const t=String(e).trim().toLowerCase();return t in Ad?Ad[t]:null}const a0=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","cp1252","cp819","ibm819","iso-ir-100","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["ascii","us-ascii","iso-8859-1","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","csisolatin1"],name:"iso-8859-1"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],Ad={};a0.forEach(e=>{e.encodings.forEach(t=>{t.labels.forEach(r=>{Ad[r]=t})})});const st=-1;function l0(e){return Array.isArray(e)?e:[e]}function Oe(e,t,r){return t<=e&&e<=r}function MA(e,t){return e.indexOf(t)!==-1}function pl(e){if(e==null)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function OA(e){const t=String(e),r=t.length;let i=0;const n=[];for(;i<r;){const s=t.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319)if(i===r-1)n.push(65533);else{const a=t.charCodeAt(i+1);if(56320<=a&&a<=57343){const l=s&1023,u=a&1023;n.push(65536+(l<<10)+u),i+=1}else n.push(65533)}i+=1}return n}function DA(e){let t="";for(let r=0;r<e.length;++r){let i=e[r];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return t}function c0(){if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}let Sp;function UA(){if(typeof TextEncodingIndexes<"u")return TextEncodingIndexes.encodingIndexes;const e=c0();return e?"TextEncodingIndexes"in e?global.TextEncodingIndexes.encodingIndexes:"encoding-indexes"in e?global.encodingIndexes:null:null}function u0(){if(Sp)return Sp;const e=UA();return e?(Sp=e,e):null}function hs(e,t){return t&&t[e]||null}function ys(e,t){const r=t.indexOf(e);return r===-1?null:r}function Qt(e){const t=u0();if(!t)throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return t[e]}function PA(e){if(e>39419&&e<189e3||e>1237575)return null;if(e===7457)return 59335;let t=0,r=0;const i=Qt("gb18030-ranges");for(let n=0;n<i.length;++n){const s=l0(i[n]);if(s[0]<=e)t=s[0],r=s[1];else break}return r+e-t}function NA(e){if(e===59335)return 7457;let t=0,r=0;const i=Qt("gb18030-ranges");for(let n=0;n<i.length;++n){const s=i[n],a=l0(s);if(a[1]<=e)t=a[1],r=a[0];else break}return r+e-t}function BA(e){return wp=wp||Qt("jis0208").map(function(r,i){return Oe(i,8272,8835)?null:r}),wp.indexOf(e)}let wp;function HA(e){bp=bp||Qt("big5").map((r,i)=>i<32*157?null:r);const t=bp;return e===9552||e===9566||e===9569||e===9578||e===21313||e===21317?t.lastIndexOf(e):ys(e,t)}let bp;function Ir(e){return 0<=e&&e<=127}const Sr=Ir,je=-1;class LA{constructor(t){this.fatal=t.fatal,this.Big5_lead=0}handler(t,r){if(r===je&&this.Big5_lead!==0)return this.Big5_lead=0,Xe(this.fatal);if(r===je&&this.Big5_lead===0)return st;if(this.Big5_lead!==0){const i=this.Big5_lead;let n=null;this.Big5_lead=0;const s=r<127?64:98;switch((Oe(r,64,126)||Oe(r,161,254))&&(n=(i-129)*157+(r-s)),n){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}const a=n===null?null:hs(n,Qt("big5"));return a===null&&Ir(r)&&t.prepend(r),a===null?Xe(this.fatal):a}return Ir(r)?r:Oe(r,129,254)?(this.Big5_lead=r,null):Xe(this.fatal)}}class YA{constructor(t){this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;const i=HA(r);if(i===null)return Dr(r);const n=Math.floor(i/157)+129;if(n<161)return Dr(r);const s=i%157,a=s<63?64:98;return[n,s+a]}}class $A{constructor(t){this.fatal=t.fatal,this.eucjp_jis0212_flag=!1,this.eucjp_lead=0}handler(t,r){if(r===je&&this.eucjp_lead!==0)return this.eucjp_lead=0,Xe(this.fatal);if(r===je&&this.eucjp_lead===0)return st;if(this.eucjp_lead===142&&Oe(r,161,223))return this.eucjp_lead=0,65216+r;if(this.eucjp_lead===143&&Oe(r,161,254))return this.eucjp_jis0212_flag=!0,this.eucjp_lead=r,null;if(this.eucjp_lead!==0){const i=this.eucjp_lead;this.eucjp_lead=0;let n=null;return Oe(i,161,254)&&Oe(r,161,254)&&(n=hs((i-161)*94+(r-161),Qt(this.eucjp_jis0212_flag?"jis0212":"jis0208"))),this.eucjp_jis0212_flag=!1,Oe(r,161,254)||t.prepend(r),n===null?Xe(this.fatal):n}return Ir(r)?r:r===142||r===143||Oe(r,161,254)?(this.eucjp_lead=r,null):Xe(this.fatal)}}class WA{constructor(t){this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;if(r===165)return 92;if(r===8254)return 126;if(Oe(r,65377,65439))return[142,r-65377+161];r===8722&&(r=65293);const i=ys(r,Qt("jis0208"));if(i===null)return Dr(r);const n=Math.floor(i/94)+161,s=i%94+161;return[n,s]}}class XA{constructor(t){this.fatal=t.fatal,this.euckr_lead=0}handler(t,r){if(r===je&&this.euckr_lead!==0)return this.euckr_lead=0,Xe(this.fatal);if(r===je&&this.euckr_lead===0)return st;if(this.euckr_lead!==0){const i=this.euckr_lead;let n=null;this.euckr_lead=0,Oe(r,65,254)&&(n=(i-129)*190+(r-65));const s=n===null?null:hs(n,Qt("euc-kr"));return n===null&&Ir(r)&&t.prepend(r),s===null?Xe(this.fatal):s}return Ir(r)?r:Oe(r,129,254)?(this.euckr_lead=r,null):Xe(this.fatal)}}class jA{constructor(t){this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;const i=ys(r,Qt("euc-kr"));if(i===null)return Dr(r);const n=Math.floor(i/190)+129,s=i%190+65;return[n,s]}}class qy{constructor(t){this.fatal=t.fatal,this.gb18030_first=0,this.gb18030_second=0,this.gb18030_third=0}handler(t,r){if(r===je&&this.gb18030_first===0&&this.gb18030_second===0&&this.gb18030_third===0)return st;r===je&&(this.gb18030_first!==0||this.gb18030_second!==0||this.gb18030_third!==0)&&(this.gb18030_first=0,this.gb18030_second=0,this.gb18030_third=0,Xe(this.fatal));let i;if(this.gb18030_third!==0){i=null,Oe(r,48,57)&&(i=PA((((this.gb18030_first-129)*10+this.gb18030_second-48)*126+this.gb18030_third-129)*10+r-48));const n=[this.gb18030_second,this.gb18030_third,r];return this.gb18030_first=0,this.gb18030_second=0,this.gb18030_third=0,i===null?(t.prepend(n),Xe(this.fatal)):i}if(this.gb18030_second!==0)return Oe(r,129,254)?(this.gb18030_third=r,null):(t.prepend([this.gb18030_second,r]),this.gb18030_first=0,this.gb18030_second=0,Xe(this.fatal));if(this.gb18030_first!==0){if(Oe(r,48,57))return this.gb18030_second=r,null;const n=this.gb18030_first;let s=null;this.gb18030_first=0;const a=r<127?64:65;return(Oe(r,64,126)||Oe(r,128,254))&&(s=(n-129)*190+(r-a)),i=s===null?null:hs(s,Qt("gb18030")),i===null&&Ir(r)&&t.prepend(r),i===null?Xe(this.fatal):i}return Ir(r)?r:r===128?8364:Oe(r,129,254)?(this.gb18030_first=r,null):Xe(this.fatal)}}class Vy{constructor(t,r=void 0){this.gbk_flag=r,this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;if(r===58853)return Dr(r);if(this.gbk_flag&&r===8364)return 128;let i=ys(r,Qt("gb18030"));if(i!==null){const u=Math.floor(i/190)+129,d=i%190,p=d<63?64:65;return[u,d+p]}if(this.gbk_flag)return Dr(r);i=NA(r);const n=Math.floor(i/10/126/10);i=i-n*10*126*10;const s=Math.floor(i/10/126);i=i-s*10*126;const a=Math.floor(i/10),l=i-a*10;return[n+129,s+48,a+129,l+48]}}var ct;(function(e){e[e.ASCII=0]="ASCII",e[e.Roman=1]="Roman",e[e.Katakana=2]="Katakana",e[e.LeadByte=3]="LeadByte",e[e.TrailByte=4]="TrailByte",e[e.EscapeStart=5]="EscapeStart",e[e.Escape=6]="Escape"})(ct||(ct={}));class qA{constructor(t){this.fatal=t.fatal,this.iso2022jp_decoder_state=ct.ASCII,this.iso2022jp_decoder_output_state=ct.ASCII,this.iso2022jp_lead=0,this.iso2022jp_output_flag=!1}handler(t,r){switch(this.iso2022jp_decoder_state){default:case ct.ASCII:return r===27?(this.iso2022jp_decoder_state=ct.EscapeStart,null):Oe(r,0,127)&&r!==14&&r!==15&&r!==27?(this.iso2022jp_output_flag=!1,r):r===je?st:(this.iso2022jp_output_flag=!1,Xe(this.fatal));case ct.Roman:return r===27?(this.iso2022jp_decoder_state=ct.EscapeStart,null):r===92?(this.iso2022jp_output_flag=!1,165):r===126?(this.iso2022jp_output_flag=!1,8254):Oe(r,0,127)&&r!==14&&r!==15&&r!==27&&r!==92&&r!==126?(this.iso2022jp_output_flag=!1,r):r===je?st:(this.iso2022jp_output_flag=!1,Xe(this.fatal));case ct.Katakana:return r===27?(this.iso2022jp_decoder_state=ct.EscapeStart,null):Oe(r,33,95)?(this.iso2022jp_output_flag=!1,65344+r):r===je?st:(this.iso2022jp_output_flag=!1,Xe(this.fatal));case ct.LeadByte:return r===27?(this.iso2022jp_decoder_state=ct.EscapeStart,null):Oe(r,33,126)?(this.iso2022jp_output_flag=!1,this.iso2022jp_lead=r,this.iso2022jp_decoder_state=ct.TrailByte,null):r===je?st:(this.iso2022jp_output_flag=!1,Xe(this.fatal));case ct.TrailByte:if(r===27)return this.iso2022jp_decoder_state=ct.EscapeStart,Xe(this.fatal);if(Oe(r,33,126)){this.iso2022jp_decoder_state=ct.LeadByte;const s=(this.iso2022jp_lead-33)*94+r-33,a=hs(s,Qt("jis0208"));return a===null?Xe(this.fatal):a}return r===je?(this.iso2022jp_decoder_state=ct.LeadByte,t.prepend(r),Xe(this.fatal)):(this.iso2022jp_decoder_state=ct.LeadByte,Xe(this.fatal));case ct.EscapeStart:return r===36||r===40?(this.iso2022jp_lead=r,this.iso2022jp_decoder_state=ct.Escape,null):(t.prepend(r),this.iso2022jp_output_flag=!1,this.iso2022jp_decoder_state=this.iso2022jp_decoder_output_state,Xe(this.fatal));case ct.Escape:const i=this.iso2022jp_lead;this.iso2022jp_lead=0;let n=null;if(i===40&&r===66&&(n=ct.ASCII),i===40&&r===74&&(n=ct.Roman),i===40&&r===73&&(n=ct.Katakana),i===36&&(r===64||r===66)&&(n=ct.LeadByte),n!==null){this.iso2022jp_decoder_state=this.iso2022jp_decoder_state=n;const s=this.iso2022jp_output_flag;return this.iso2022jp_output_flag=!0,s?Xe(this.fatal):null}return t.prepend([i,r]),this.iso2022jp_output_flag=!1,this.iso2022jp_decoder_state=this.iso2022jp_decoder_output_state,Xe(this.fatal)}}}var Yt;(function(e){e[e.ASCII=0]="ASCII",e[e.Roman=1]="Roman",e[e.jis0208=2]="jis0208"})(Yt||(Yt={}));class VA{constructor(t){this.fatal=t.fatal,this.iso2022jp_state=Yt.ASCII}handler(t,r){if(r===je&&this.iso2022jp_state!==Yt.ASCII)return t.prepend(r),this.iso2022jp_state=Yt.ASCII,[27,40,66];if(r===je&&this.iso2022jp_state===Yt.ASCII)return st;if((this.iso2022jp_state===Yt.ASCII||this.iso2022jp_state===Yt.Roman)&&(r===14||r===15||r===27))return Dr(65533);if(this.iso2022jp_state===Yt.ASCII&&Sr(r))return r;if(this.iso2022jp_state===Yt.Roman&&(Sr(r)&&r!==92&&r!==126||r==165||r==8254)){if(Sr(r))return r;if(r===165)return 92;if(r===8254)return 126}if(Sr(r)&&this.iso2022jp_state!==Yt.ASCII)return t.prepend(r),this.iso2022jp_state=Yt.ASCII,[27,40,66];if((r===165||r===8254)&&this.iso2022jp_state!==Yt.Roman)return t.prepend(r),this.iso2022jp_state=Yt.Roman,[27,40,74];r===8722&&(r=65293);const i=ys(r,Qt("jis0208"));if(i===null)return Dr(r);if(this.iso2022jp_state!==Yt.jis0208)return t.prepend(r),this.iso2022jp_state=Yt.jis0208,[27,36,66];const n=Math.floor(i/94)+33,s=i%94+33;return[n,s]}}class KA{constructor(t){this.fatal=t.fatal,this.Shift_JIS_lead=0}handler(t,r){if(r===je&&this.Shift_JIS_lead!==0)return this.Shift_JIS_lead=0,Xe(this.fatal);if(r===je&&this.Shift_JIS_lead===0)return st;if(this.Shift_JIS_lead!==0){const i=this.Shift_JIS_lead;let n=null;this.Shift_JIS_lead=0;const s=r<127?64:65,a=i<160?129:193;if((Oe(r,64,126)||Oe(r,128,252))&&(n=(i-a)*188+r-s),Oe(n,8836,10715))return 48508+n;const l=n===null?null:hs(n,Qt("jis0208"));return l===null&&Ir(r)&&t.prepend(r),l===null?Xe(this.fatal):l}return Ir(r)||r===128?r:Oe(r,161,223)?65216+r:Oe(r,129,159)||Oe(r,224,252)?(this.Shift_JIS_lead=r,null):Xe(this.fatal)}}class GA{constructor(t){this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r)||r===128)return r;if(r===165)return 92;if(r===8254)return 126;if(Oe(r,65377,65439))return r-65377+161;r===8722&&(r=65293);const i=BA(r);if(i===null)return Dr(r);const n=Math.floor(i/188),s=n<31?129:193,a=i%188,l=a<63?64:65;return[n+s,a+l]}}class QA{constructor(t,r){this.index=t,this.fatal=r.fatal}handler(t,r){if(r===je)return st;if(Ir(r))return r;const i=this.index[r-128];return i||Xe(this.fatal)}}class JA{constructor(t,r){this.index=t,this.fatal=r.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;const i=ys(r,this.index);return i===null&&Dr(r),i+128}}function Da(e,t){const r=e>>8,i=e&255;return t?[r,i]:[i,r]}class Ky{constructor(t,r){this.utf16_be=t,this.fatal=r.fatal,this.utf16_lead_byte=null,this.utf16_lead_surrogate=null}handler(t,r){if(r===je&&(this.utf16_lead_byte!==null||this.utf16_lead_surrogate!==null))return Xe(this.fatal);if(r===je&&this.utf16_lead_byte===null&&this.utf16_lead_surrogate===null)return st;if(this.utf16_lead_byte===null)return this.utf16_lead_byte=r,null;let i;if(this.utf16_be?i=(this.utf16_lead_byte<<8)+r:i=(r<<8)+this.utf16_lead_byte,this.utf16_lead_byte=null,this.utf16_lead_surrogate!==null){const n=this.utf16_lead_surrogate;return this.utf16_lead_surrogate=null,Oe(i,56320,57343)?65536+(n-55296)*1024+(i-56320):(t.prepend(Da(i,this.utf16_be)),Xe(this.fatal))}return Oe(i,55296,56319)?(this.utf16_lead_surrogate=i,null):Oe(i,56320,57343)?Xe(this.fatal):i}}class Gy{constructor(t,r){this.utf16_be=t,this.fatal=r.fatal}handler(t,r){if(r===je)return st;if(Oe(r,0,65535))return Da(r,this.utf16_be);const i=Da((r-65536>>10)+55296,this.utf16_be),n=Da((r-65536&1023)+56320,this.utf16_be);return i.concat(n)}}class ZA{constructor(t){this.fatal=t.fatal,this.utf8_code_point=0,this.utf8_bytes_seen=0,this.utf8_bytes_needed=0,this.utf8_lower_boundary=128,this.utf8_upper_boundary=191}handler(t,r){if(r===je&&this.utf8_bytes_needed!==0)return this.utf8_bytes_needed=0,Xe(this.fatal);if(r===je)return st;if(this.utf8_bytes_needed===0){if(Oe(r,0,127))return r;if(Oe(r,194,223))this.utf8_bytes_needed=1,this.utf8_code_point=r&31;else if(Oe(r,224,239))r===224&&(this.utf8_lower_boundary=160),r===237&&(this.utf8_upper_boundary=159),this.utf8_bytes_needed=2,this.utf8_code_point=r&15;else if(Oe(r,240,244))r===240&&(this.utf8_lower_boundary=144),r===244&&(this.utf8_upper_boundary=143),this.utf8_bytes_needed=3,this.utf8_code_point=r&7;else return Xe(this.fatal);return null}if(!Oe(r,this.utf8_lower_boundary,this.utf8_upper_boundary))return this.utf8_code_point=this.utf8_bytes_needed=this.utf8_bytes_seen=0,this.utf8_lower_boundary=128,this.utf8_upper_boundary=191,t.prepend(r),Xe(this.fatal);if(this.utf8_lower_boundary=128,this.utf8_upper_boundary=191,this.utf8_code_point=this.utf8_code_point<<6|r&63,this.utf8_bytes_seen+=1,this.utf8_bytes_seen!==this.utf8_bytes_needed)return null;const i=this.utf8_code_point;return this.utf8_code_point=this.utf8_bytes_needed=this.utf8_bytes_seen=0,i}}class eC{constructor(t){this.fatal=t.fatal}handler(t,r){if(r===je)return st;if(Sr(r))return r;let i,n;Oe(r,128,2047)?(i=1,n=192):Oe(r,2048,65535)?(i=2,n=224):Oe(r,65536,1114111)&&(i=3,n=240);const s=[(r>>6*i)+n];for(;i>0;){const a=r>>6*(i-1);s.push(128|a&63),i-=1}return s}}class tC{constructor(t){this.fatal=t.fatal}handler(t,r){return r===je?st:Ir(r)?r:63360+r-128}}class rC{constructor(t){this.fatal=t.fatal}handler(t,r){return r===je?st:Sr(r)?r:Oe(r,63360,63487)?r-63360+128:Dr(r)}}const nC=u0(),Cd={"UTF-8":e=>new eC(e),GBK:e=>new Vy(e,!0),gb18030:e=>new Vy(e),Big5:e=>new YA(e),"EUC-JP":e=>new WA(e),"ISO-2022-JP":e=>new VA(e),Shift_JIS:e=>new GA(e),"EUC-KR":e=>new jA(e),"UTF-16BE":e=>new Gy(!0,e),"UTF-16LE":e=>new Gy(!1,e),"x-user-defined":e=>new rC(e)},xd={"UTF-8":e=>new ZA(e),GBK:e=>new qy(e),gb18030:e=>new qy(e),Big5:e=>new LA(e),"EUC-JP":e=>new $A(e),"ISO-2022-JP":e=>new qA(e),Shift_JIS:e=>new KA(e),"EUC-KR":e=>new XA(e),"UTF-16BE":e=>new Ky(!0,e),"UTF-16LE":e=>new Ky(!1,e),"x-user-defined":e=>new tC(e)};nC&&a0.forEach(function(e){e.heading==="Legacy single-byte encodings"&&e.encodings.forEach(function(t){const r=t.name,i=Qt(r.toLowerCase());xd[r]=function(n){return new QA(i,n)},Cd[r]=function(n){return new JA(i,n)}})});class p0{constructor(t){this.tokens=Array.from(t),this.tokens.reverse()}endOfStream(){return!this.tokens.length}read(){return this.tokens.length?this.tokens.pop():je}prepend(t){if(Array.isArray(t)){const r=t;for(;r.length;)this.tokens.push(r.pop())}else this.tokens.push(t)}push(t){if(Array.isArray(t)){const r=t;for(;r.length;)this.tokens.unshift(r.shift())}else this.tokens.unshift(t)}}let d0=class{constructor(t,r){t=t!==void 0?String(t):o0;const i=pl(r);this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;const n=Id(t);if(n===null||n.name==="replacement")throw RangeError("Unknown encoding: "+t);if(!xd[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n,i.fatal&&(this._error_mode="fatal"),i.ignoreBOM&&(this._ignoreBOM=!0)}get encoding(){return this._encoding.name.toLowerCase()}get fatal(){return this._error_mode==="fatal"}get ignoreBOM(){return this._ignoreBOM}decode(t,r){const i=iC(t),n=pl(r);this._do_not_flush||(this._decoder=xd[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!n.stream;const s=new p0(i),a=[];let l;for(;;){const u=s.read();if(u===je||(l=this._decoder.handler(s,u),l===st))break;l!==null&&(Array.isArray(l)?a.push.apply(a,l):a.push(l))}if(!this._do_not_flush){do{if(l=this._decoder.handler(s,s.read()),l===st)break;l&&(Array.isArray(l)?a.push.apply(a,l):a.push(l))}while(!s.endOfStream());this._decoder=null}return this.serializeStream(a)}serializeStream(t){return MA(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)&&!this._ignoreBOM&&!this._BOMseen&&(t.length>0&&t[0]===65279?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),DA(t)}};function Qy(e){try{return e instanceof ArrayBuffer}catch(t){return console.error(t),!1}}function iC(e){return typeof e!="object"?new Uint8Array(0):Qy(e)?new Uint8Array(e):"buffer"in e&&Qy(e.buffer)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0)}let f0=class{constructor(t,r){const i=pl(r);if(this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=i.fatal?"fatal":"replacement",i.NONSTANDARD_allowLegacyEncoding){t=t?String(t):o0;const n=Id(t);if(n===null||n.name==="replacement")throw RangeError("Unknown encoding: "+t);if(!Cd[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else{this._encoding=Id("utf-8");const n=c0()||{};t!==void 0&&"console"in n&&console.warn("TextEncoder constructor called with encoding label, which is ignored.")}}get encoding(){return this._encoding.name.toLowerCase()}encode(t,r){t=t===void 0?"":String(t);const i=pl(r);this._do_not_flush||(this._encoder=Cd[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!i.stream;const n=new p0(OA(t)),s=[];let a;for(;;){const l=n.read();if(l===je||(a=this._encoder.handler(n,l),a===st))break;Array.isArray(a)?s.push.apply(s,a):s.push(a)}if(!this._do_not_flush){for(;a=this._encoder.handler(n,n.read()),a!==st;)Array.isArray(a)?s.push.apply(s,a):s.push(a);this._encoder=null}return new Uint8Array(s)}};if(typeof window<"u"){const e=t=>!(t in window)||typeof window[t]>"u"||window[t]===null;e("TextDecoder")&&(window.TextDecoder=d0),e("TextEncoder")&&(window.TextEncoder=f0)}var g0=lC,Xr=[],Jy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fa=0,sC=Jy.length;fa<sC;++fa)Xr[fa]=Jy[fa];function oC(e){return Xr[e>>18&63]+Xr[e>>12&63]+Xr[e>>6&63]+Xr[e&63]}function aC(e,t,r){for(var i,n=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),n.push(oC(i));return n.join("")}function lC(e){for(var t,r=e.length,i=r%3,n=[],s=16383,a=0,l=r-i;a<l;a+=s)n.push(aC(e,a,a+s>l?l:a+s));return i===1?(t=e[r-1],n.push(Xr[t>>2]+Xr[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(Xr[t>>10]+Xr[t>>4&63]+Xr[t<<2&63]+"=")),n.join("")}var Ge,Ce,mT,Gi=(mT=class{constructor(e){We(this,Ge);We(this,Ce,0);me(this,Ge,new DataView(e.buffer)),me(this,Ce,e.byteOffset)}get offset(){return R(this,Ce)}readUInt8Array(){const e=this.readU32(),t=new Uint8Array(R(this,Ge).buffer,R(this,Ce),e);return me(this,Ce,R(this,Ce)+e),t}readBool(){const e=R(this,Ge).getUint8(R(this,Ce));return me(this,Ce,R(this,Ce)+1),e!==0}readByte(){const e=R(this,Ge).getUint8(R(this,Ce));return me(this,Ce,R(this,Ce)+1),e}readBytes(e){const t=new DataView(R(this,Ge).buffer,R(this,Ce),e);return me(this,Ce,R(this,Ce)+e),new Uint8Array(t.buffer)}readI8(){const e=R(this,Ge).getInt8(R(this,Ce));return me(this,Ce,R(this,Ce)+1),e}readU8(){const e=R(this,Ge).getUint8(R(this,Ce));return me(this,Ce,R(this,Ce)+1),e}readI16(){const e=R(this,Ge).getInt16(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+2),e}readU16(){const e=R(this,Ge).getUint16(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+2),e}readI32(){const e=R(this,Ge).getInt32(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+4),e}readU32(){const e=R(this,Ge).getUint32(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+4),e}readI64(){const e=R(this,Ge).getBigInt64(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+8),e}readU64(){const e=R(this,Ge).getBigUint64(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+8),e}readU128(){const e=R(this,Ge).getBigUint64(R(this,Ce),!0),t=R(this,Ge).getBigUint64(R(this,Ce)+8,!0);return me(this,Ce,R(this,Ce)+16),(t<<BigInt(64))+e}readI128(){const e=R(this,Ge).getBigUint64(R(this,Ce),!0),t=R(this,Ge).getBigInt64(R(this,Ce)+8,!0);return me(this,Ce,R(this,Ce)+16),(t<<BigInt(64))+e}readU256(){const e=R(this,Ge).getBigUint64(R(this,Ce),!0),t=R(this,Ge).getBigUint64(R(this,Ce)+8,!0),r=R(this,Ge).getBigUint64(R(this,Ce)+16,!0),i=R(this,Ge).getBigUint64(R(this,Ce)+24,!0);return me(this,Ce,R(this,Ce)+32),(i<<BigInt(3*64))+(r<<BigInt(2*64))+(t<<BigInt(1*64))+e}readI256(){const e=R(this,Ge).getBigUint64(R(this,Ce),!0),t=R(this,Ge).getBigUint64(R(this,Ce)+8,!0),r=R(this,Ge).getBigUint64(R(this,Ce)+16,!0),i=R(this,Ge).getBigInt64(R(this,Ce)+24,!0);return me(this,Ce,R(this,Ce)+32),(i<<BigInt(3*64))+(r<<BigInt(2*64))+(t<<BigInt(1*64))+e}readF32(){const e=R(this,Ge).getFloat32(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+4),e}readF64(){const e=R(this,Ge).getFloat64(R(this,Ce),!0);return me(this,Ce,R(this,Ce)+8),e}readString(){const e=this.readU32(),t=new Uint8Array(R(this,Ge).buffer,R(this,Ce),e),i=new d0("utf-8").decode(t);return me(this,Ce,R(this,Ce)+e),i}},Ge=new WeakMap,Ce=new WeakMap,mT),Zt,Ze,ze,bt,Ct,TT,ce=(TT=class{constructor(e){We(this,bt);We(this,Zt);We(this,Ze);We(this,ze,0);me(this,Zt,new Uint8Array(e)),me(this,Ze,new DataView(R(this,Zt).buffer))}toBase64(){return g0(R(this,Zt).subarray(0,R(this,ze)))}getBuffer(){return R(this,Zt).slice(0,R(this,ze))}writeUInt8Array(e){const t=e.length;_e(this,bt,Ct).call(this,4+t),this.writeU32(t),R(this,Zt).set(e,R(this,ze)),me(this,ze,R(this,ze)+e.length)}writeBool(e){_e(this,bt,Ct).call(this,1),R(this,Ze).setUint8(R(this,ze),e?1:0),me(this,ze,R(this,ze)+1)}writeByte(e){_e(this,bt,Ct).call(this,1),R(this,Ze).setUint8(R(this,ze),e),me(this,ze,R(this,ze)+1)}writeI8(e){_e(this,bt,Ct).call(this,1),R(this,Ze).setInt8(R(this,ze),e),me(this,ze,R(this,ze)+1)}writeU8(e){_e(this,bt,Ct).call(this,1),R(this,Ze).setUint8(R(this,ze),e),me(this,ze,R(this,ze)+1)}writeI16(e){_e(this,bt,Ct).call(this,2),R(this,Ze).setInt16(R(this,ze),e,!0),me(this,ze,R(this,ze)+2)}writeU16(e){_e(this,bt,Ct).call(this,2),R(this,Ze).setUint16(R(this,ze),e,!0),me(this,ze,R(this,ze)+2)}writeI32(e){_e(this,bt,Ct).call(this,4),R(this,Ze).setInt32(R(this,ze),e,!0),me(this,ze,R(this,ze)+4)}writeU32(e){_e(this,bt,Ct).call(this,4),R(this,Ze).setUint32(R(this,ze),e,!0),me(this,ze,R(this,ze)+4)}writeI64(e){_e(this,bt,Ct).call(this,8),R(this,Ze).setBigInt64(R(this,ze),e,!0),me(this,ze,R(this,ze)+8)}writeU64(e){_e(this,bt,Ct).call(this,8),R(this,Ze).setBigUint64(R(this,ze),e,!0),me(this,ze,R(this,ze)+8)}writeU128(e){_e(this,bt,Ct).call(this,16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);R(this,Ze).setBigUint64(R(this,ze),t,!0),R(this,Ze).setBigUint64(R(this,ze)+8,r,!0),me(this,ze,R(this,ze)+16)}writeI128(e){_e(this,bt,Ct).call(this,16);const t=e&BigInt("0xFFFFFFFFFFFFFFFF"),r=e>>BigInt(64);R(this,Ze).setBigInt64(R(this,ze),t,!0),R(this,Ze).setBigInt64(R(this,ze)+8,r,!0),me(this,ze,R(this,ze)+16)}writeU256(e){_e(this,bt,Ct).call(this,32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),r=e&t,i=e>>BigInt(64*1)&t,n=e>>BigInt(64*2)&t,s=e>>BigInt(64*3);R(this,Ze).setBigUint64(R(this,ze)+8*0,r,!0),R(this,Ze).setBigUint64(R(this,ze)+8*1,i,!0),R(this,Ze).setBigUint64(R(this,ze)+8*2,n,!0),R(this,Ze).setBigUint64(R(this,ze)+8*3,s,!0),me(this,ze,R(this,ze)+32)}writeI256(e){_e(this,bt,Ct).call(this,32);const t=BigInt("0xFFFFFFFFFFFFFFFF"),r=e&t,i=e>>BigInt(64*1)&t,n=e>>BigInt(64*2)&t,s=e>>BigInt(64*3);R(this,Ze).setBigUint64(R(this,ze)+8*0,r,!0),R(this,Ze).setBigUint64(R(this,ze)+8*1,i,!0),R(this,Ze).setBigUint64(R(this,ze)+8*2,n,!0),R(this,Ze).setBigInt64(R(this,ze)+8*3,s,!0),me(this,ze,R(this,ze)+32)}writeF32(e){_e(this,bt,Ct).call(this,4),R(this,Ze).setFloat32(R(this,ze),e,!0),me(this,ze,R(this,ze)+4)}writeF64(e){_e(this,bt,Ct).call(this,8),R(this,Ze).setFloat64(R(this,ze),e,!0),me(this,ze,R(this,ze)+8)}writeString(e){const r=new f0().encode(e);this.writeU32(r.length),_e(this,bt,Ct).call(this,r.length),R(this,Zt).set(r,R(this,ze)),me(this,ze,R(this,ze)+r.length)}},Zt=new WeakMap,Ze=new WeakMap,ze=new WeakMap,bt=new WeakSet,Ct=function(e){const t=R(this,ze)+e+1;if(t<=R(this,Zt).length)return;let r=R(this,Zt).length*2;r<t&&(r=t);const i=new Uint8Array(r);i.set(R(this,Zt)),me(this,Zt,i),me(this,Ze,new DataView(R(this,Zt).buffer))},TT);function Ye(e,t){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let n of r)if(!i.includes(n)||!Ye(e[n],t[n]))return!1;return!0}function h0(e){return Array.prototype.map.call(e.reverse(),t=>("00"+t.toString(16)).slice(-2)).join("")}function cC(e){if(e.length!=16)throw new Error(`Uint8Array is not 16 bytes long: ${e}`);return new Gi(e).readU128()}function uC(e){if(e.length!=32)throw new Error(`Uint8Array is not 32 bytes long: [${e}]`);return new Gi(e).readU256()}function y0(e){e.startsWith("0x")&&(e=e.slice(2));let t=e.match(/.{1,2}/g)||[],r=Uint8Array.from(t.map(i=>parseInt(i,16)));return r.length!=32?new Uint8Array(0):r.reverse()}function pC(e){return cC(y0(e))}function dC(e){return uC(y0(e))}function m0(e){let t=new ce(16);return t.writeU128(e),t.getBuffer()}function fC(e){return h0(m0(e))}function T0(e){let t=new ce(32);return t.writeU256(e),t.getBuffer()}function gC(e){return h0(T0(e))}var Ed=class Ua{constructor(t){h(this,"data");this.data=t}get __connection_id__(){return this.data}isZero(){return this.data===BigInt(0)}static nullIfZero(t){return t.isZero()?null:t}static random(){function t(){return Math.floor(Math.random()*255)}let r=BigInt(0);for(let i=0;i<16;i++)r=r<<BigInt(8)|BigInt(t());return new Ua(r)}isEqual(t){return this.data==t.data}toHexString(){return fC(this.data)}toUint8Array(){return m0(this.data)}static fromString(t){return new Ua(pC(t))}static fromStringOrNull(t){let r=Ua.fromString(t);return r.isZero()?null:r}},cn,hC=(cn=class{constructor(t){h(this,"__time_duration_micros__");this.__time_duration_micros__=t}get micros(){return this.__time_duration_micros__}get millis(){return Number(this.micros/cn.MICROS_PER_MILLIS)}static fromMillis(t){return new cn(BigInt(t)*cn.MICROS_PER_MILLIS)}},h(cn,"MICROS_PER_MILLIS",1000n),cn),Tr,yC=(Tr=class{constructor(t){h(this,"__timestamp_micros_since_unix_epoch__");this.__timestamp_micros_since_unix_epoch__=t}get microsSinceUnixEpoch(){return this.__timestamp_micros_since_unix_epoch__}static now(){return Tr.fromDate(new Date)}static fromDate(t){const r=t.getTime(),i=BigInt(r)*Tr.MICROS_PER_MILLIS;return new Tr(i)}toDate(){const r=this.__timestamp_micros_since_unix_epoch__/Tr.MICROS_PER_MILLIS;if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(Number.MIN_SAFE_INTEGER))throw new RangeError("Timestamp is outside of the representable range of JS's Date");return new Date(Number(r))}},h(Tr,"MICROS_PER_MILLIS",1000n),h(Tr,"UNIX_EPOCH",new Tr(0n)),Tr),mC=class _0{constructor(t){h(this,"data");this.data=typeof t=="string"?dC(t):t}get __identity__(){return this.data}isEqual(t){return this.toHexString()===t.toHexString()}toHexString(){return gC(this.data)}toUint8Array(){return T0(this.data)}static fromString(t){return new _0(t)}},Rd;(e=>{function t(){return o.createSumType([new de("Interval",o.createTimeDurationType()),new de("Time",o.createTimestampType())])}e.getAlgebraicType=t,e.Interval=i=>({tag:"Interval",value:{__time_duration_micros__:i}}),e.Time=i=>({tag:"Time",value:{__timestamp_micros_since_unix_epoch__:i}});function r(i){let n=i.asSumValue();switch(n.tag){case 0:return{tag:"Interval",value:{__time_duration_micros__:n.value.asProductValue().elements[0].asBigInt()}};case 1:return{tag:"Time",value:{__timestamp_micros_since_unix_epoch__:n.value.asBigInt()}};default:throw"unreachable"}}e.fromValue=r})(Rd||(Rd={}));var TC=Rd,de=class{constructor(e,t){h(this,"name");h(this,"algebraicType");this.name=e,this.algebraicType=t}},_C=class{constructor(e){h(this,"variants");h(this,"serialize",(e,t)=>{if(this.variants.length==2&&this.variants[0].name==="some"&&this.variants[1].name==="none")t!=null?(e.writeByte(0),this.variants[0].algebraicType.serialize(e,t)):e.writeByte(1);else{let r=t.tag;const i=this.variants.findIndex(n=>n.name===r);if(i<0)throw`Can't serialize a sum type, couldn't find ${t.tag} tag`;e.writeU8(i),this.variants[i].algebraicType.serialize(e,t.value)}});h(this,"deserialize",e=>{let t=e.readU8();if(this.variants.length==2&&this.variants[0].name==="some"&&this.variants[1].name==="none"){if(t===0)return this.variants[0].algebraicType.deserialize(e);if(t===1)return;throw`Can't deserialize an option type, couldn't find ${t} tag`}else{let r=this.variants[t],i=r.algebraicType.deserialize(e);return{tag:r.name,value:i}}});this.variants=e}},c=class{constructor(e,t){h(this,"name");h(this,"algebraicType");this.name=e,this.algebraicType=t}},SC=class{constructor(e){h(this,"elements");h(this,"serialize",(e,t)=>{for(let r of this.elements)r.algebraicType.serialize(e,t[r.name])});h(this,"deserialize",e=>{let t={};if(this.elements.length===1){if(this.elements[0].name==="__time_duration_micros__")return new hC(e.readI64());if(this.elements[0].name==="__timestamp_micros_since_unix_epoch__")return new yC(e.readI64());if(this.elements[0].name==="__identity__")return new mC(e.readU256());if(this.elements[0].name==="__connection_id__")return new Ed(e.readU128())}for(let r of this.elements)t[r.name]=r.algebraicType.deserialize(e);return t});this.elements=e}isEmpty(){return this.elements.length===0}intoMapKey(e){if(this.elements.length===1){if(this.elements[0].name==="__time_duration_micros__")return e.__time_duration_micros__;if(this.elements[0].name==="__timestamp_micros_since_unix_epoch__")return e.__timestamp_micros_since_unix_epoch__;if(this.elements[0].name==="__identity__")return e.__identity__;if(this.elements[0].name==="__connection_id__")return e.__connection_id__}const t=new ce(10);return this.serialize(t,e),t.toBase64()}},wC=class{constructor(e,t){h(this,"keyType");h(this,"valueType");this.keyType=e,this.valueType=t}},Dt,Ci,ht,ni,wt,kd,zd,Fd,o=(ni=class{constructor(){We(this,Dt);h(this,"type");h(this,"type_")}get product(){if(this.type!==ae.ProductType)throw"product type was requested, but the type is not ProductType";return this.type_}set product(t){_e(this,Dt,Ci).call(this,ae.ProductType,t)}get sum(){if(this.type!==ae.SumType)throw"sum type was requested, but the type is not SumType";return this.type_}set sum(t){_e(this,Dt,Ci).call(this,ae.SumType,t)}get array(){if(this.type!==ae.ArrayType)throw"array type was requested, but the type is not ArrayType";return this.type_}set array(t){_e(this,Dt,Ci).call(this,ae.ArrayType,t)}get map(){if(this.type!==ae.MapType)throw"map type was requested, but the type is not MapType";return this.type_}set map(t){_e(this,Dt,Ci).call(this,ae.MapType,t)}static createProductType(t){return _e(this,ht,wt).call(this,ae.ProductType,new SC(t))}static createSumType(t){return _e(this,ht,wt).call(this,ae.SumType,new _C(t))}static createArrayType(t){return _e(this,ht,wt).call(this,ae.ArrayType,t)}static createMapType(t,r){return _e(this,ht,wt).call(this,ae.MapType,new wC(t,r))}static createBoolType(){return _e(this,ht,wt).call(this,ae.Bool,null)}static createI8Type(){return _e(this,ht,wt).call(this,ae.I8,null)}static createU8Type(){return _e(this,ht,wt).call(this,ae.U8,null)}static createI16Type(){return _e(this,ht,wt).call(this,ae.I16,null)}static createU16Type(){return _e(this,ht,wt).call(this,ae.U16,null)}static createI32Type(){return _e(this,ht,wt).call(this,ae.I32,null)}static createU32Type(){return _e(this,ht,wt).call(this,ae.U32,null)}static createI64Type(){return _e(this,ht,wt).call(this,ae.I64,null)}static createU64Type(){return _e(this,ht,wt).call(this,ae.U64,null)}static createI128Type(){return _e(this,ht,wt).call(this,ae.I128,null)}static createU128Type(){return _e(this,ht,wt).call(this,ae.U128,null)}static createI256Type(){return _e(this,ht,wt).call(this,ae.I256,null)}static createU256Type(){return _e(this,ht,wt).call(this,ae.U256,null)}static createF32Type(){return _e(this,ht,wt).call(this,ae.F32,null)}static createF64Type(){return _e(this,ht,wt).call(this,ae.F64,null)}static createStringType(){return _e(this,ht,wt).call(this,ae.String,null)}static createBytesType(){return this.createArrayType(this.createU8Type())}static createOptionType(t){return this.createSumType([new de("some",t),new de("none",this.createProductType([]))])}static createIdentityType(){return this.createProductType([new c("__identity__",this.createU256Type())])}static createConnectionIdType(){return this.createProductType([new c("__connection_id__",this.createU128Type())])}static createScheduleAtType(){return TC.getAlgebraicType()}static createTimestampType(){return this.createProductType([new c("__timestamp_micros_since_unix_epoch__",this.createI64Type())])}static createTimeDurationType(){return this.createProductType([new c("__time_duration_micros__",this.createI64Type())])}isProductType(){return this.type===ae.ProductType}isSumType(){return this.type===ae.SumType}isArrayType(){return this.type===ae.ArrayType}isMapType(){return this.type===ae.MapType}isIdentity(){return _e(this,Dt,zd).call(this,"__identity__")}isConnectionId(){return _e(this,Dt,zd).call(this,"__connection_id__")}isScheduleAt(){return this.isSumType()&&this.sum.variants.length===2&&this.sum.variants[0].name==="Interval"&&this.sum.variants[0].algebraicType.type===ae.U64&&this.sum.variants[1].name==="Time"&&this.sum.variants[1].algebraicType.type===ae.U64}isTimestamp(){return _e(this,Dt,Fd).call(this,"__timestamp_micros_since_unix_epoch__")}isTimeDuration(){return _e(this,Dt,Fd).call(this,"__time_duration_micros__")}intoMapKey(t){switch(this.type){case ae.U8:case ae.U16:case ae.U32:case ae.U64:case ae.U128:case ae.U256:case ae.I8:case ae.I16:case ae.I64:case ae.I128:case ae.F32:case ae.F64:case ae.String:case ae.Bool:return t;case ae.ProductType:return this.product.intoMapKey(t);default:const r=new ce(10);return this.serialize(r,t),r.toBase64()}}serialize(t,r){switch(this.type){case ae.ProductType:this.product.serialize(t,r);break;case ae.SumType:this.sum.serialize(t,r);break;case ae.ArrayType:if(_e(this,Dt,kd).call(this))t.writeUInt8Array(r);else{const i=this.array;t.writeU32(r.length);for(let n of r)i.serialize(t,n)}break;case ae.MapType:throw new Error("not implemented");case ae.Bool:t.writeBool(r);break;case ae.I8:t.writeI8(r);break;case ae.U8:t.writeU8(r);break;case ae.I16:t.writeI16(r);break;case ae.U16:t.writeU16(r);break;case ae.I32:t.writeI32(r);break;case ae.U32:t.writeU32(r);break;case ae.I64:t.writeI64(r);break;case ae.U64:t.writeU64(r);break;case ae.I128:t.writeI128(r);break;case ae.U128:t.writeU128(r);break;case ae.I256:t.writeI256(r);break;case ae.U256:t.writeU256(r);break;case ae.F32:t.writeF32(r);break;case ae.F64:t.writeF64(r);break;case ae.String:t.writeString(r);break;default:throw new Error(`not implemented, ${this.type}`)}}deserialize(t){switch(this.type){case ae.ProductType:return this.product.deserialize(t);case ae.SumType:return this.sum.deserialize(t);case ae.ArrayType:if(_e(this,Dt,kd).call(this))return t.readUInt8Array();{const r=this.array,i=t.readU32();let n=[];for(let s=0;s<i;s++)n.push(r.deserialize(t));return n}case ae.MapType:throw new Error("not implemented");case ae.Bool:return t.readBool();case ae.I8:return t.readI8();case ae.U8:return t.readU8();case ae.I16:return t.readI16();case ae.U16:return t.readU16();case ae.I32:return t.readI32();case ae.U32:return t.readU32();case ae.I64:return t.readI64();case ae.U64:return t.readU64();case ae.I128:return t.readI128();case ae.U128:return t.readU128();case ae.U256:return t.readU256();case ae.F32:return t.readF32();case ae.F64:return t.readF64();case ae.String:return t.readString();default:throw new Error(`not implemented, ${this.type}`)}}},Dt=new WeakSet,Ci=function(t,r){this.type_=r,this.type=r===void 0?ae.None:t},ht=new WeakSet,wt=function(t,r){var n;let i=new ni;return _e(n=i,Dt,Ci).call(n,t,r),i},kd=function(){return this.isArrayType()&&this.array.type==ae.U8},zd=function(t){return this.isProductType()&&this.product.elements.length===1&&(this.product.elements[0].algebraicType.type==ae.U128||this.product.elements[0].algebraicType.type==ae.U256)&&this.product.elements[0].name===t},Fd=function(t){return this.isProductType()&&this.product.elements.length===1&&this.product.elements[0].algebraicType.type===ae.I64&&this.product.elements[0].name===t},We(ni,ht),ni);(e=>{(t=>{t.SumType="SumType",t.ProductType="ProductType",t.ArrayType="ArrayType",t.MapType="MapType",t.Bool="Bool",t.I8="I8",t.U8="U8",t.I16="I16",t.U16="U16",t.I32="I32",t.U32="U32",t.I64="I64",t.U64="U64",t.I128="I128",t.U128="U128",t.I256="I256",t.U256="U256",t.F32="F32",t.F64="F64",t.String="String",t.None="None"})(e.Type||(e.Type={}))})(o||(o={}));var ae=o.Type;function bC(e,t){const r=new Gi(t);return e.deserialize(r)}var Md;(e=>{e.FixedSize=n=>({tag:"FixedSize",value:n}),e.RowOffsets=n=>({tag:"RowOffsets",value:n});function t(){return o.createSumType([new de("FixedSize",o.createU16Type()),new de("RowOffsets",o.createArrayType(o.createU64Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Md||(Md={}));var fo;(e=>{function t(){return o.createProductType([new c("sizeHint",Md.getTypeScriptAlgebraicType()),new c("rowsData",o.createArrayType(o.createU8Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(fo||(fo={}));var Od;(e=>{function t(){return o.createProductType([new c("reducer",o.createStringType()),new c("args",o.createArrayType(o.createU8Type())),new c("requestId",o.createU32Type()),new c("flags",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Od||(Od={}));var Dd;(e=>{function t(){return o.createProductType([new c("queryStrings",o.createArrayType(o.createStringType())),new c("requestId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Dd||(Dd={}));var Ud;(e=>{function t(){return o.createProductType([new c("messageId",o.createArrayType(o.createU8Type())),new c("queryString",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ud||(Ud={}));var Gr;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Gr||(Gr={}));var Pd;(e=>{function t(){return o.createProductType([new c("query",o.createStringType()),new c("requestId",o.createU32Type()),new c("queryId",Gr.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Pd||(Pd={}));var Nd;(e=>{function t(){return o.createProductType([new c("queryStrings",o.createArrayType(o.createStringType())),new c("requestId",o.createU32Type()),new c("queryId",Gr.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Nd||(Nd={}));var Bd;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("queryId",Gr.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Bd||(Bd={}));var Hd;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("queryId",Gr.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Hd||(Hd={}));var Li;(e=>{e.CallReducer=n=>({tag:"CallReducer",value:n}),e.Subscribe=n=>({tag:"Subscribe",value:n}),e.OneOffQuery=n=>({tag:"OneOffQuery",value:n}),e.SubscribeSingle=n=>({tag:"SubscribeSingle",value:n}),e.SubscribeMulti=n=>({tag:"SubscribeMulti",value:n}),e.Unsubscribe=n=>({tag:"Unsubscribe",value:n}),e.UnsubscribeMulti=n=>({tag:"UnsubscribeMulti",value:n});function t(){return o.createSumType([new de("CallReducer",Od.getTypeScriptAlgebraicType()),new de("Subscribe",Dd.getTypeScriptAlgebraicType()),new de("OneOffQuery",Ud.getTypeScriptAlgebraicType()),new de("SubscribeSingle",Pd.getTypeScriptAlgebraicType()),new de("SubscribeMulti",Nd.getTypeScriptAlgebraicType()),new de("Unsubscribe",Bd.getTypeScriptAlgebraicType()),new de("UnsubscribeMulti",Hd.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Li||(Li={}));var dl;(e=>{function t(){return o.createProductType([new c("deletes",fo.getTypeScriptAlgebraicType()),new c("inserts",fo.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(dl||(dl={}));var Ld;(e=>{e.Uncompressed=n=>({tag:"Uncompressed",value:n}),e.Brotli=n=>({tag:"Brotli",value:n}),e.Gzip=n=>({tag:"Gzip",value:n});function t(){return o.createSumType([new de("Uncompressed",dl.getTypeScriptAlgebraicType()),new de("Brotli",o.createArrayType(o.createU8Type())),new de("Gzip",o.createArrayType(o.createU8Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ld||(Ld={}));var fl;(e=>{function t(){return o.createProductType([new c("tableId",o.createU32Type()),new c("tableName",o.createStringType()),new c("numRows",o.createU64Type()),new c("updates",o.createArrayType(Ld.getTypeScriptAlgebraicType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(fl||(fl={}));var hi;(e=>{function t(){return o.createProductType([new c("tables",o.createArrayType(fl.getTypeScriptAlgebraicType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(hi||(hi={}));var Yd;(e=>{function t(){return o.createProductType([new c("databaseUpdate",hi.getTypeScriptAlgebraicType()),new c("requestId",o.createU32Type()),new c("totalHostExecutionDuration",o.createTimeDurationType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Yd||(Yd={}));var $d;(e=>{e.Committed=n=>({tag:"Committed",value:n}),e.Failed=n=>({tag:"Failed",value:n}),e.OutOfEnergy={tag:"OutOfEnergy"};function t(){return o.createSumType([new de("Committed",hi.getTypeScriptAlgebraicType()),new de("Failed",o.createStringType()),new de("OutOfEnergy",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})($d||($d={}));var Wd;(e=>{function t(){return o.createProductType([new c("reducerName",o.createStringType()),new c("reducerId",o.createU32Type()),new c("args",o.createArrayType(o.createU8Type())),new c("requestId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Wd||(Wd={}));var Xd;(e=>{function t(){return o.createProductType([new c("quanta",o.createU128Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Xd||(Xd={}));var jd;(e=>{function t(){return o.createProductType([new c("status",$d.getTypeScriptAlgebraicType()),new c("timestamp",o.createTimestampType()),new c("callerIdentity",o.createIdentityType()),new c("callerConnectionId",o.createConnectionIdType()),new c("reducerCall",Wd.getTypeScriptAlgebraicType()),new c("energyQuantaUsed",Xd.getTypeScriptAlgebraicType()),new c("totalHostExecutionDuration",o.createTimeDurationType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(jd||(jd={}));var qd;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("update",hi.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(qd||(qd={}));var Vd;(e=>{function t(){return o.createProductType([new c("identity",o.createIdentityType()),new c("token",o.createStringType()),new c("connectionId",o.createConnectionIdType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Vd||(Vd={}));var Kd;(e=>{function t(){return o.createProductType([new c("tableName",o.createStringType()),new c("rows",fo.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Kd||(Kd={}));var Gd;(e=>{function t(){return o.createProductType([new c("messageId",o.createArrayType(o.createU8Type())),new c("error",o.createOptionType(o.createStringType())),new c("tables",o.createArrayType(Kd.getTypeScriptAlgebraicType())),new c("totalHostExecutionDuration",o.createTimeDurationType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Gd||(Gd={}));var gl;(e=>{function t(){return o.createProductType([new c("tableId",o.createU32Type()),new c("tableName",o.createStringType()),new c("tableRows",fl.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(gl||(gl={}));var Qd;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("totalHostExecutionDurationMicros",o.createU64Type()),new c("queryId",Gr.getTypeScriptAlgebraicType()),new c("rows",gl.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Qd||(Qd={}));var Jd;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("totalHostExecutionDurationMicros",o.createU64Type()),new c("queryId",Gr.getTypeScriptAlgebraicType()),new c("rows",gl.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Jd||(Jd={}));var Zd;(e=>{function t(){return o.createProductType([new c("totalHostExecutionDurationMicros",o.createU64Type()),new c("requestId",o.createOptionType(o.createU32Type())),new c("queryId",o.createOptionType(o.createU32Type())),new c("tableId",o.createOptionType(o.createU32Type())),new c("error",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Zd||(Zd={}));var ef;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("totalHostExecutionDurationMicros",o.createU64Type()),new c("queryId",Gr.getTypeScriptAlgebraicType()),new c("update",hi.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ef||(ef={}));var tf;(e=>{function t(){return o.createProductType([new c("requestId",o.createU32Type()),new c("totalHostExecutionDurationMicros",o.createU64Type()),new c("queryId",Gr.getTypeScriptAlgebraicType()),new c("update",hi.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(tf||(tf={}));var rf;(e=>{e.InitialSubscription=n=>({tag:"InitialSubscription",value:n}),e.TransactionUpdate=n=>({tag:"TransactionUpdate",value:n}),e.TransactionUpdateLight=n=>({tag:"TransactionUpdateLight",value:n}),e.IdentityToken=n=>({tag:"IdentityToken",value:n}),e.OneOffQueryResponse=n=>({tag:"OneOffQueryResponse",value:n}),e.SubscribeApplied=n=>({tag:"SubscribeApplied",value:n}),e.UnsubscribeApplied=n=>({tag:"UnsubscribeApplied",value:n}),e.SubscriptionError=n=>({tag:"SubscriptionError",value:n}),e.SubscribeMultiApplied=n=>({tag:"SubscribeMultiApplied",value:n}),e.UnsubscribeMultiApplied=n=>({tag:"UnsubscribeMultiApplied",value:n});function t(){return o.createSumType([new de("InitialSubscription",Yd.getTypeScriptAlgebraicType()),new de("TransactionUpdate",jd.getTypeScriptAlgebraicType()),new de("TransactionUpdateLight",qd.getTypeScriptAlgebraicType()),new de("IdentityToken",Vd.getTypeScriptAlgebraicType()),new de("OneOffQueryResponse",Gd.getTypeScriptAlgebraicType()),new de("SubscribeApplied",Qd.getTypeScriptAlgebraicType()),new de("UnsubscribeApplied",Jd.getTypeScriptAlgebraicType()),new de("SubscriptionError",Zd.getTypeScriptAlgebraicType()),new de("SubscribeMultiApplied",ef.getTypeScriptAlgebraicType()),new de("UnsubscribeMultiApplied",tf.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(rf||(rf={}));var ii,_T,xu=(_T=class{constructor(){We(this,ii,new Map)}on(e,t){let r=R(this,ii).get(e);r||(r=new Set,R(this,ii).set(e,r)),r.add(t)}off(e,t){let r=R(this,ii).get(e);r&&r.delete(t)}emit(e,...t){let r=R(this,ii).get(e);if(r)for(let i of r)i(...t)}},ii=new WeakMap,_T),vC={component:"",info:"",warn:"",error:"",debug:""},IC={component:"color: #fff; background-color: #8D6FDD; padding: 2px 5px; border-radius: 3px;",info:"color: #fff; background-color: #007bff; padding: 2px 5px; border-radius: 3px;",warn:"color: #fff; background-color: #ffc107; padding: 2px 5px; border-radius: 3px;",error:"color: #fff; background-color: #dc3545; padding: 2px 5px; border-radius: 3px;",debug:"color: #fff; background-color: #28a745; padding: 2px 5px; border-radius: 3px;"},AC={component:"color: #8D6FDD;",info:"color: #007bff;",warn:"color: #ffc107;",error:"color: #dc3545;",debug:"color: #28a745;"},kn=(e,t)=>{console.log(`%c${vC[e]} ${e.toUpperCase()}%c ${t}`,IC[e],AC[e])},CC=class{constructor(e){h(this,"rows");h(this,"tableTypeInfo");h(this,"emitter");h(this,"applyOperations",(e,t)=>{const r=[];if(this.tableTypeInfo.primaryKeyInfo!==void 0){const i=new Map,n=new Map;for(const s of e)if(s.type==="insert"){const[a,l]=i.get(s.rowId)||[s,0];i.set(s.rowId,[s,l+1])}else{const[a,l]=n.get(s.rowId)||[s,0];n.set(s.rowId,[s,l+1])}for(const[s,[a,l]]of i){const u=n.get(s);if(u){const[d,p]=u,f=l-p,_=this.update(t,s,a.row,f);_&&r.push(_),n.delete(s)}else{const d=this.insert(t,a,l);d&&r.push(d)}}for(const[s,a]of n.values()){const l=this.delete(t,s,a);l&&r.push(l)}}else for(const i of e)if(i.type==="insert"){const n=this.insert(t,i);n&&r.push(n)}else{const n=this.delete(t,i);n&&r.push(n)}return r});h(this,"update",(e,t,r,i=0)=>{const n=this.rows.get(t);if(!n){kn("error",`Updating a row that was not present in the cache. Table: ${this.tableTypeInfo.tableName}, RowId: ${t}`);return}const[s,a]=n,l=Math.max(1,a+i);if(a+i<=0){kn("error",`Negative reference count for in table ${this.tableTypeInfo.tableName} row ${t} (${a} + ${i})`);return}return this.rows.set(t,[r,l]),a===0?(kn("error",`Updating a row id in table ${this.tableTypeInfo.tableName} which was not present in the cache (rowId: ${t})`),{type:"insert",table:this.tableTypeInfo.tableName,cb:()=>{this.emitter.emit("insert",e,r)}}):{type:"update",table:this.tableTypeInfo.tableName,cb:()=>{this.emitter.emit("update",e,s,r)}}});h(this,"insert",(e,t,r=1)=>{const[i,n]=this.rows.get(t.rowId)||[t.row,0];if(this.rows.set(t.rowId,[t.row,n+r]),n===0)return{type:"insert",table:this.tableTypeInfo.tableName,cb:()=>{this.emitter.emit("insert",e,t.row)}}});h(this,"delete",(e,t,r=1)=>{const[i,n]=this.rows.get(t.rowId)||[t.row,0];if(n===0){kn("warn","Deleting a row that was not present in the cache");return}if(n<=r)return this.rows.delete(t.rowId),{type:"delete",table:this.tableTypeInfo.tableName,cb:()=>{this.emitter.emit("delete",e,t.row)}};this.rows.set(t.rowId,[t.row,n-r])});h(this,"onInsert",e=>{this.emitter.on("insert",e)});h(this,"onDelete",e=>{this.emitter.on("delete",e)});h(this,"onUpdate",e=>{this.emitter.on("update",e)});h(this,"removeOnInsert",e=>{this.emitter.off("insert",e)});h(this,"removeOnDelete",e=>{this.emitter.off("delete",e)});h(this,"removeOnUpdate",e=>{this.emitter.off("update",e)});this.tableTypeInfo=e,this.rows=new Map,this.emitter=new xu}count(){return this.rows.size}iter(){return Array.from(this.rows.values()).map(([e])=>e)}},xC=class{constructor(){h(this,"tables");this.tables=new Map}getTable(e){const t=this.tables.get(e);if(!t)throw console.error("The table has not been registered for this client. Please register the table before using it. If you have registered global tables using the SpacetimeDBClient.registerTables() or `registerTable()` method, please make sure that is executed first!"),new Error(`Table ${e} does not exist`);return t}getOrCreateTable(e){let t;return this.tables.has(e.tableName)?t=this.tables.get(e.tableName):(t=new CC(e),this.tables.set(e.tableName,t)),t}};function EC(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const n=e[i],s=t[i];if(n!==s)return typeof n=="number"&&typeof s=="number"?n-s:typeof n=="string"&&typeof s=="string"?n.localeCompare(s):typeof n=="string"?1:-1}return e.length-t.length}var S0=class nf{constructor(t,r,i,n=null,s=null){h(this,"major");h(this,"minor");h(this,"patch");h(this,"preRelease");h(this,"buildInfo");this.major=t,this.minor=r,this.patch=i,this.preRelease=n,this.buildInfo=s}toString(){let t=`${this.major}.${this.minor}.${this.patch}`;return this.preRelease&&(t+=`-${this.preRelease.join(".")}`),this.buildInfo&&(t+=`+${this.buildInfo}`),t}compare(t){return this.major!==t.major?this.major-t.major:this.minor!==t.minor?this.minor-t.minor:this.patch!==t.patch?this.patch-t.patch:this.preRelease&&t.preRelease?EC(this.preRelease,t.preRelease):this.preRelease||t.preRelease?-1:0}clone(){return new nf(this.major,this.minor,this.patch,this.preRelease?[...this.preRelease]:null,this.buildInfo)}static parseVersionString(t){const r=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-([\da-zA-Z-]+(?:\.[\da-zA-Z-]+)*))?(?:\+([\da-zA-Z-]+(?:\.[\da-zA-Z-]+)*))?$/,i=t.match(r);if(!i)throw new Error(`Invalid version string: ${t}`);const n=parseInt(i[1],10),s=parseInt(i[2],10),a=parseInt(i[3],10),l=i[4]?i[4].split(".").map(d=>isNaN(Number(d))?d:Number(d)):null,u=i[5]||null;return new nf(n,s,a,l,u)}},w0=new S0(1,2,0);function RC(e){if(e===void 0)throw new Error(Zy(e));if(S0.parseVersionString(e).compare(w0)<0)throw new Error(Zy(e))}function Zy(e){return`Module code was generated with an incompatible version of the spacetimedb cli (${e}).  Update the cli version to at least ${w0.toString()} and regenerate the bindings. You can upgrade to the latest cli version by running: spacetime version upgrade`}async function b0(e,t,r=128*1024){let i=0;const n=new ReadableStream({pull(T){if(i<e.length){const w=e.subarray(i,Math.min(i+r,e.length));T.enqueue(w),i+=r}else T.close()}}),s=new DecompressionStream(t),l=n.pipeThrough(s).getReader(),u=[];let d=0,p;for(;!(p=await l.read()).done;)u.push(p.value),d+=p.value.length;const f=new Uint8Array(d);let _=0;for(const T of u)f.set(T,_),_+=T.length;return f}var Qi,hn,v0,I0,sf,Ji,kC=(Ji=class{constructor(t){We(this,hn);h(this,"onclose");h(this,"onopen");h(this,"onmessage");h(this,"onerror");We(this,Qi);this.onmessage=void 0,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,t.onmessage=_e(this,hn,v0).bind(this),t.onerror=_e(this,hn,sf).bind(this),t.onclose=_e(this,hn,sf).bind(this),t.onopen=_e(this,hn,I0).bind(this),t.binaryType="arraybuffer",me(this,Qi,t)}send(t){R(this,Qi).send(t)}close(){R(this,Qi).close()}static async createWebSocketFn({url:t,nameOrAddress:r,wsProtocol:i,authToken:n,compression:s,lightMode:a}){const l=new Headers;let u;u=WebSocket;let d;if(n){l.set("Authorization",`Bearer ${n}`);const _=new URL("v1/identity/websocket-token",t);_.protocol=t.protocol==="wss:"?"https:":"http:";const T=await fetch(_,{method:"POST",headers:l});if(T.ok){const{token:w}=await T.json();d=w}else return Promise.reject(new Error(`Failed to verify token: ${T.statusText}`))}const p=new URL(`v1/database/${r}/subscribe`,t);d&&p.searchParams.set("token",d),p.searchParams.set("compression",s==="gzip"?"Gzip":"None"),a&&p.searchParams.set("light","true");const f=new u(p.toString(),i);return new Ji(f)}},Qi=new WeakMap,hn=new WeakSet,v0=async function(t){var n;const r=new Uint8Array(t.data);let i;if(r[0]===0)i=r.slice(1);else{if(r[0]===1)throw new Error("Brotli Compression not supported. Please use gzip or none compression in withCompression method on DbConnection.");if(r[0]===2)i=await b0(r.slice(1),"gzip");else throw new Error("Unexpected Compression Algorithm. Please use `gzip` or `none`")}(n=this.onmessage)==null||n.call(this,{data:i})},I0=function(t){var r;(r=this.onopen)==null||r.call(this,t)},sf=function(t){var r;(r=this.onerror)==null||r.call(this,t)},Ji),Zi,es,ou,go,si,ho,yo,ts,ST,zC=(ST=class{constructor(e,t){We(this,Zi);We(this,es);We(this,ou);We(this,go);We(this,si,new xu);We(this,ho,"gzip");We(this,yo,!1);We(this,ts);this.remoteModule=e,this.dbConnectionConstructor=t,me(this,ts,kC.createWebSocketFn)}withUri(e){return me(this,Zi,new URL(e)),this}withModuleName(e){return me(this,es,e),this}withToken(e){return me(this,go,e),this}withWSFn(e){return me(this,ts,e),this}withCompression(e){return me(this,ho,e),this}withLightMode(e){return me(this,yo,e),this}onConnect(e){return R(this,si).on("connect",e),this}onConnectError(e){return R(this,si).on("connectError",e),this}onDisconnect(e){return R(this,si).on("disconnect",e),this}build(){var e;if(!R(this,Zi))throw new Error("URI is required to connect to SpacetimeDB");if(!R(this,es))throw new Error("Database name or address is required to connect to SpacetimeDB");return RC((e=this.remoteModule.versionInfo)==null?void 0:e.cliVersion),this.dbConnectionConstructor(new C0({uri:R(this,Zi),nameOrAddress:R(this,es),identity:R(this,ou),token:R(this,go),emitter:R(this,si),compression:R(this,ho),lightMode:R(this,yo),createWSFn:R(this,ts),remoteModule:this.remoteModule}))}},Zi=new WeakMap,es=new WeakMap,ou=new WeakMap,go=new WeakMap,si=new WeakMap,ho=new WeakMap,yo=new WeakMap,ts=new WeakMap,ST),mo,To,wT,A0=(wT=class{constructor(e){We(this,mo);We(this,To);this.db=e}onApplied(e){return me(this,mo,e),this}onError(e){return me(this,To,e),this}subscribe(e){const t=Array.isArray(e)?e:[e];if(t.length===0)throw new Error("Subscriptions must have at least one query");return new MC(this.db,t,R(this,mo),R(this,To))}subscribeToAllTables(){this.subscribe("SELECT * FROM *")}},mo=new WeakMap,To=new WeakMap,wT),FC=class{constructor(){h(this,"subscriptions",new Map)}},rs,oi,An,Cn,xn,bT,MC=(bT=class{constructor(e,t,r,i){We(this,rs);We(this,oi,!1);We(this,An,!1);We(this,Cn,!1);We(this,xn,new xu);this.db=e,R(this,xn).on("applied",n=>{me(this,Cn,!0),r&&r(n)}),R(this,xn).on("error",(n,s)=>{me(this,Cn,!1),me(this,An,!0),i&&i(n,s)}),me(this,rs,this.db.registerSubscription(this,R(this,xn),t))}unsubscribe(){if(R(this,oi))throw new Error("Unsubscribe has already been called");me(this,oi,!0),this.db.unregisterSubscription(R(this,rs)),R(this,xn).on("end",e=>{me(this,An,!0),me(this,Cn,!1)})}unsubscribeThen(e){if(R(this,An))throw new Error("Subscription has already ended");if(R(this,oi))throw new Error("Unsubscribe has already been called");me(this,oi,!0),this.db.unregisterSubscription(R(this,rs)),R(this,xn).on("end",t=>{me(this,An,!0),me(this,Cn,!1),e(t)})}isEnded(){return R(this,An)}isActive(){return R(this,Cn)}},rs=new WeakMap,oi=new WeakMap,An=new WeakMap,Cn=new WeakMap,xn=new WeakMap,bT);function OC(e){switch(e){case"FullUpdate":return 0;case"NoSuccessNotify":return 1}}var _o,Mt,ns,au,kt,So,$r,lu,et,x0,Pa,E0,Gn,R0,k0,DC,UC,PC,NC,BC,HC,LC,YC,vT,C0=(vT=class{constructor({uri:e,nameOrAddress:t,identity:r,token:i,emitter:n,remoteModule:s,createWSFn:a,compression:l,lightMode:u}){We(this,et);h(this,"isActive",!1);h(this,"identity");h(this,"token");h(this,"db");h(this,"reducers");h(this,"setReducerFlags");h(this,"connectionId",Ed.random());We(this,_o,0);We(this,Mt);We(this,ns,new xu);We(this,au);We(this,kt);We(this,So,Promise.resolve());We(this,$r,new FC);h(this,"clientCache");h(this,"ws");h(this,"wsPromise");We(this,lu,()=>{const e=R(this,_o);return me(this,_o,R(this,_o)+1),e});h(this,"subscriptionBuilder",()=>new A0(this));kn("info","Connecting to SpacetimeDB WS...");let d=new URL(e.toString());/^wss?:/.test(e.protocol)||(d.protocol=d.protocol==="https:"?"wss:":"ws:"),this.identity=r,this.token=i,me(this,kt,s),me(this,Mt,n);let p=this.connectionId.toHexString();d.searchParams.set("connection_id",p),this.clientCache=new xC,this.db=R(this,kt).dbViewConstructor(this),this.setReducerFlags=R(this,kt).setReducerFlagsConstructor(),this.reducers=R(this,kt).reducersConstructor(this,this.setReducerFlags),this.wsPromise=a({url:d,nameOrAddress:t,wsProtocol:"v1.bsatn.spacetimedb",authToken:i,compression:l,lightMode:u}).then(f=>(this.ws=f,this.ws.onclose=()=>{R(this,Mt).emit("disconnect",this)},this.ws.onerror=_=>{R(this,Mt).emit("connectError",this,_)},this.ws.onopen=_e(this,et,E0).bind(this),this.ws.onmessage=_e(this,et,k0).bind(this),f)).catch(f=>{kn("error","Error connecting to SpacetimeDB WS"),R(this,Mt).emit("connectError",this,f)})}registerSubscription(e,t,r){const i=R(this,lu).call(this);return R(this,$r).subscriptions.set(i,{handle:e,emitter:t}),_e(this,et,Pa).call(this,Li.SubscribeMulti({queryStrings:r,queryId:{id:i},requestId:0})),i}unregisterSubscription(e){_e(this,et,Pa).call(this,Li.UnsubscribeMulti({queryId:{id:e},requestId:0}))}callReducer(e,t,r){const i=Li.CallReducer({reducer:e,args:t,requestId:0,flags:OC(r)});_e(this,et,Pa).call(this,i)}disconnect(){this.wsPromise.then(e=>{e&&e.close()})}onReducer(e,t){R(this,ns).on(e,t)}offReducer(e,t){R(this,ns).off(e,t)}},_o=new WeakMap,Mt=new WeakMap,ns=new WeakMap,au=new WeakMap,kt=new WeakMap,So=new WeakMap,$r=new WeakMap,lu=new WeakMap,et=new WeakSet,x0=async function(e){const t=(n,s,a)=>{const l=a.rowsData,u=new Gi(l),d=[],p=R(this,kt).tables[s].rowType,f=R(this,kt).tables[s].primaryKeyInfo;for(;u.offset<l.length+l.byteOffset;){const _=u.offset,T=p.deserialize(u);let w;if(f!==void 0)w=f.colType.intoMapKey(T[f.colName]);else{const S=l.subarray(_-l.byteOffset,u.offset-l.byteOffset);w=g0(S)}d.push({type:n,rowId:w,row:T})}return d},r=async n=>{const s=n.tableName;let a=[];for(const l of n.updates){let u;if(l.tag==="Gzip"){const d=await b0(l.value,"gzip");u=dl.deserialize(new Gi(d))}else{if(l.tag==="Brotli")throw new Error("Brotli compression not supported. Please use gzip or none compression in withCompression method on DbConnection.");u=l.value}a=a.concat(t("insert",s,u.inserts)),a=a.concat(t("delete",s,u.deletes))}return{tableName:s,operations:a}},i=async n=>{const s=[];for(const a of n.tables)s.push(await r(a));return s};switch(e.tag){case"InitialSubscription":{const n=e.value.databaseUpdate;return{tag:"InitialSubscription",tableUpdates:await i(n)}}case"TransactionUpdateLight":{const n=e.value.update;return{tag:"TransactionUpdateLight",tableUpdates:await i(n)}}case"TransactionUpdate":{const n=e.value,s=n.callerIdentity,a=Ed.nullIfZero(n.callerConnectionId),l=n.reducerCall.reducerName,u=n.reducerCall.args,d=n.energyQuantaUsed;let p,f="";switch(n.status.tag){case"Committed":p=await i(n.status.value);break;case"Failed":p=[],f=n.status.value;break;case"OutOfEnergy":p=[];break}if(l==="<none>"){console.error(`Received an error from the database: ${f}`);return}let _;return l!==""&&(_={reducerName:l,args:u}),{tag:"TransactionUpdate",tableUpdates:p,identity:s,connectionId:a,reducerInfo:_,status:n.status,energyConsumed:d.quanta,message:f,timestamp:n.timestamp}}case"IdentityToken":return{tag:"IdentityToken",identity:e.value.identity,token:e.value.token,connectionId:e.value.connectionId};case"OneOffQueryResponse":throw new Error(`TypeScript SDK never sends one-off queries, but got OneOffQueryResponse ${e}`);case"SubscribeMultiApplied":{const n=await i(e.value.update);return{tag:"SubscribeApplied",queryId:e.value.queryId.id,tableUpdates:n}}case"UnsubscribeMultiApplied":{const n=await i(e.value.update);return{tag:"UnsubscribeApplied",queryId:e.value.queryId.id,tableUpdates:n}}case"SubscriptionError":return{tag:"SubscriptionError",queryId:e.value.queryId,error:e.value.error}}},Pa=function(e){this.wsPromise.then(t=>{if(t){const r=new ce(1024);Li.serialize(r,e);const i=r.getBuffer();t.send(i)}})},E0=function(){this.isActive=!0},Gn=function(e,t){let r=[];for(let i of e){const n=i.tableName,s=R(this,kt).tables[n],l=this.clientCache.getOrCreateTable(s).applyOperations(i.operations,t);for(const u of l)r.push(u)}return r},R0=async function(e){var i,n;const t=bC(rf,e),r=await _e(this,et,x0).call(this,t);if(r)switch(r.tag){case"InitialSubscription":{let s={tag:"SubscribeApplied"};const a=R(this,kt).eventContextConstructor(this,s),{event:l,...u}=a,d=_e(this,et,Gn).call(this,r.tableUpdates,a);R(this,Mt)&&((i=R(this,au))==null||i.call(this,u));for(const p of d)p.cb();break}case"TransactionUpdateLight":{let s={tag:"UnknownTransaction"};const a=R(this,kt).eventContextConstructor(this,s),l=_e(this,et,Gn).call(this,r.tableUpdates,a);for(const u of l)u.cb();break}case"TransactionUpdate":{let s=r.reducerInfo,a=!1,l,u;if(!s)a=!0;else{u=R(this,kt).reducers[s.reducerName];try{const S=new Gi(s.args);l=u.argsType.deserialize(S)}catch{console.debug("Failed to deserialize reducer arguments"),a=!0}}if(a){const S={tag:"UnknownTransaction"},I=R(this,kt).eventContextConstructor(this,S),m=_e(this,et,Gn).call(this,r.tableUpdates,I);for(const g of m)g.cb();return}s=s,u=u;const d={callerIdentity:r.identity,status:r.status,callerConnectionId:r.connectionId,timestamp:r.timestamp,energyConsumed:r.energyConsumed,reducer:{name:s.reducerName,args:l}},p={tag:"Reducer",value:d},f=R(this,kt).eventContextConstructor(this,p),_={...f,event:d},T=_e(this,et,Gn).call(this,r.tableUpdates,f),w=[];u.argsType.product.elements.forEach((S,I)=>{w.push(l[S.name])}),R(this,ns).emit(s.reducerName,_,...w);for(const S of T)S.cb();break}case"IdentityToken":{this.identity=r.identity,!this.token&&r.token&&(this.token=r.token),this.connectionId=r.connectionId,R(this,Mt).emit("connect",this,this.identity,this.token);break}case"SubscribeApplied":{const s=R(this,$r).subscriptions.get(r.queryId);if(s===void 0){kn("error",`Received SubscribeApplied for unknown queryId ${r.queryId}.`);break}const a={tag:"SubscribeApplied"},l=R(this,kt).eventContextConstructor(this,a),{event:u,...d}=l,p=_e(this,et,Gn).call(this,r.tableUpdates,l);s==null||s.emitter.emit("applied",d);for(const f of p)f.cb();break}case"UnsubscribeApplied":{const s=R(this,$r).subscriptions.get(r.queryId);if(s===void 0){kn("error",`Received UnsubscribeApplied for unknown queryId ${r.queryId}.`);break}const a={tag:"UnsubscribeApplied"},l=R(this,kt).eventContextConstructor(this,a),{event:u,...d}=l,p=_e(this,et,Gn).call(this,r.tableUpdates,l);s==null||s.emitter.emit("end",d),R(this,$r).subscriptions.delete(r.queryId);for(const f of p)f.cb();break}case"SubscriptionError":{const s=Error(r.error),a={tag:"Error",value:s},u={...R(this,kt).eventContextConstructor(this,a),event:s};r.queryId!==void 0?((n=R(this,$r).subscriptions.get(r.queryId))==null||n.emitter.emit("error",u,s),R(this,$r).subscriptions.delete(r.queryId)):(console.error("Received an error message without a queryId: ",s),R(this,$r).subscriptions.forEach(({emitter:d})=>{d.emit("error",u,s)}))}}},k0=function(e){me(this,So,R(this,So).then(()=>_e(this,et,R0).call(this,e.data)))},DC=function(e,t){R(this,Mt).on(e,t)},UC=function(e,t){R(this,Mt).off(e,t)},PC=function(e){R(this,Mt).on("connect",e)},NC=function(e){R(this,Mt).on("disconnect",e)},BC=function(e){R(this,Mt).on("connectError",e)},HC=function(e){R(this,Mt).off("connect",e)},LC=function(e){R(this,Mt).off("disconnect",e)},YC=function(e){R(this,Mt).off("connectError",e)},vT),hl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(hl||(hl={}));var yl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(yl||(yl={}));var of;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(of||(of={}));var ml;(e=>{function t(){return o.createProductType([new c("queueItemId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ml||(ml={}));var Tl;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Tl||(Tl={}));var _l;(e=>{function t(){return o.createProductType([new c("schedule",Tl.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(_l||(_l={}));var af;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(af||(af={}));var Sl;(e=>{function t(){return o.createProductType([new c("playerIdentity",o.createIdentityType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Sl||(Sl={}));var wl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(wl||(wl={}));var bl;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(bl||(bl={}));var vl;(e=>{function t(){return o.createProductType([new c("schedule",bl.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(vl||(vl={}));var Il;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("quantityToDrop",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Il||(Il={}));var Al;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Al||(Al={}));var Cl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Cl||(Cl={}));var xl;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(xl||(xl={}));var El;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(El||(El={}));var Rl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Rl||(Rl={}));var kl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("targetSlotName",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(kl||(kl={}));var zl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(zl||(zl={}));var lf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(lf||(lf={}));var cf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(cf||(cf={}));var Fl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Fl||(Fl={}));var Ml;(e=>{function t(){return o.createProductType([new c("cornId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ml||(Ml={}));var Ol;(e=>{function t(){return o.createProductType([new c("hempId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ol||(Ol={}));var Dl;(e=>{function t(){return o.createProductType([new c("mushroomId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Dl||(Dl={}));var Ul;(e=>{function t(){return o.createProductType([new c("pumpkinId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ul||(Ul={}));var Pl;(e=>{function t(){return o.createProductType([new c("bagId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Pl||(Pl={}));var Nl;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Nl||(Nl={}));var uf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(uf||(uf={}));var Bl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Bl||(Bl={}));var Hl;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Hl||(Hl={}));var Ll;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ll||(Ll={}));var Yl;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Yl||(Yl={}));var $l;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})($l||($l={}));var Wl;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Wl||(Wl={}));var Xl;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Xl||(Xl={}));var jl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("targetHotbarSlot",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(jl||(jl={}));var ql;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("targetInventorySlot",o.createU16Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ql||(ql={}));var Vl;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Vl||(Vl={}));var Kl;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Kl||(Kl={}));var Gl;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Gl||(Gl={}));var Ql;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ql||(Ql={}));var Jl;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Jl||(Jl={}));var Zl;(e=>{function t(){return o.createProductType([new c("droppedItemId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Zl||(Zl={}));var ec;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ec||(ec={}));var tc;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("worldX",o.createF32Type()),new c("worldY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(tc||(tc={}));var rc;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("worldX",o.createF32Type()),new c("worldY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(rc||(rc={}));var nc;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("worldX",o.createF32Type()),new c("worldY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(nc||(nc={}));var ic;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type()),new c("worldX",o.createF32Type()),new c("worldY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ic||(ic={}));var sc;(e=>{function t(){return o.createProductType([new c("jobId",o.createU64Type()),new c("jobName",o.createStringType()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(sc||(sc={}));var oc;(e=>{function t(){return o.createProductType([new c("args",sc.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(oc||(oc={}));var ac;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ac||(ac={}));var lc;(e=>{function t(){return o.createProductType([new c("scheduleArgs",ac.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(lc||(lc={}));var cc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(cc||(cc={}));var uc;(e=>{function t(){return o.createProductType([new c("args",cc.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(uc||(uc={}));var pc;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(pc||(pc={}));var dc;(e=>{function t(){return o.createProductType([new c("schedule",pc.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(dc||(dc={}));var fc;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(fc||(fc={}));var gc;(e=>{function t(){return o.createProductType([new c("schedule",fc.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(gc||(gc={}));var hc;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(hc||(hc={}));var yc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(yc||(yc={}));var mc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(mc||(mc={}));var Tc;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Tc||(Tc={}));var _c;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(_c||(_c={}));var Sc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Sc||(Sc={}));var wc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(wc||(wc={}));var bc;(e=>{function t(){return o.createProductType([new c("username",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(bc||(bc={}));var vc;(e=>{function t(){return o.createProductType([new c("bagId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(vc||(vc={}));var pf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(pf||(pf={}));var Ic;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ic||(Ic={}));var df;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(df||(df={}));var ff;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ff||(ff={}));var gf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(gf||(gf={}));var hf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(hf||(hf={}));var Ac;(e=>{function t(){return o.createProductType([new c("text",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ac||(Ac={}));var Cc;(e=>{function t(){return o.createProductType([new c("itemInstanceId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Cc||(Cc={}));var xc;(e=>{function t(){return o.createProductType([new c("pinX",o.createI32Type()),new c("pinY",o.createI32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(xc||(xc={}));var Ec;(e=>{function t(){return o.createProductType([new c("sprinting",o.createBoolType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ec||(Ec={}));var Rc;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("slotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Rc||(Rc={}));var kc;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("slotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(kc||(kc={}));var zc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("slotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(zc||(zc={}));var Fc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("slotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Fc||(Fc={}));var Mc;(e=>{function t(){return o.createProductType([new c("sourceCampfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Mc||(Mc={}));var Oc;(e=>{function t(){return o.createProductType([new c("sourceItemInstanceId",o.createU64Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Oc||(Oc={}));var Dc;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Dc||(Dc={}));var Uc;(e=>{function t(){return o.createProductType([new c("sourceCampfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Uc||(Uc={}));var Pc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Pc||(Pc={}));var Nc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotType",o.createStringType()),new c("targetSlotIndex",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Nc||(Nc={}));var Bc;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("sourceItemInstanceId",o.createU64Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Bc||(Bc={}));var Hc;(e=>{function t(){return o.createProductType([new c("sourceItemInstanceId",o.createU64Type()),new c("quantityToSplit",o.createU32Type()),new c("targetCampfireId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Hc||(Hc={}));var Lc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("sourceItemInstanceId",o.createU64Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Lc||(Lc={}));var Yc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("targetSlotIndex",o.createU8Type()),new c("sourceItemInstanceId",o.createU64Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Yc||(Yc={}));var $c;(e=>{function t(){return o.createProductType([new c("boxId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})($c||($c={}));var Wc;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type()),new c("targetSlotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Wc||(Wc={}));var Xc;(e=>{function t(){return o.createProductType([new c("corpseId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Xc||(Xc={}));var jc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type()),new c("sourceSlotIndex",o.createU8Type()),new c("targetSlotIndex",o.createU8Type()),new c("quantityToSplit",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(jc||(jc={}));var qc;(e=>{function t(){return o.createProductType([new c("recipeId",o.createU64Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(qc||(qc={}));var Vc;(e=>{function t(){return o.createProductType([new c("recipeId",o.createU64Type()),new c("quantityToCraft",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Vc||(Vc={}));var Kc;(e=>{function t(){return o.createProductType([new c("timestamp",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Kc||(Kc={}));var Gc;(e=>{function t(){return o.createProductType([new c("campfireId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Gc||(Gc={}));var yf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(yf||(yf={}));var Qc;(e=>{function t(){return o.createProductType([new c("stashId",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Qc||(Qc={}));var mf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(mf||(mf={}));var Jc;(e=>{function t(){return o.createProductType([new c("scheduleId",o.createU64Type()),new c("scheduledAt",o.createScheduleAtType()),new c("deltaTimeSeconds",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Jc||(Jc={}));var Zc;(e=>{function t(){return o.createProductType([new c("scheduleArgs",Jc.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Zc||(Zc={}));var eu;(e=>{function t(){return o.createProductType([new c("moveX",o.createF32Type()),new c("moveY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(eu||(eu={}));var tu;(e=>{function t(){return o.createProductType([new c("minX",o.createF32Type()),new c("minY",o.createF32Type()),new c("maxX",o.createF32Type()),new c("maxY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(tu||(tu={}));var Tf;(e=>{function t(){return o.createProductType([])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Tf||(Tf={}));class $C{constructor(t){h(this,"tableCache");h(this,"identity",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.identity,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class WC{constructor(t){h(this,"tableCache");h(this,"effect_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.effect_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class XC{constructor(t){h(this,"tableCache");h(this,"player_identity",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.player_identity,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class jC{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class qC{constructor(t){h(this,"tableCache");h(this,"campfire_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.campfire_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class VC{constructor(t){h(this,"tableCache");h(this,"client_identity",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.client_identity,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class KC{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class GC{constructor(t){h(this,"tableCache");h(this,"schedule_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.schedule_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class QC{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class JC{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ZC{constructor(t){h(this,"tableCache");h(this,"queue_item_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.queue_item_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ex{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class tx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class rx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class nx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ix{constructor(t){h(this,"tableCache");h(this,"instance_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.instance_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class sx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ox{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ax{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class lx{constructor(t){h(this,"tableCache");h(this,"identity",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.identity,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class cx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class ux{constructor(t){h(this,"tableCache");h(this,"corpse_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.corpse_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class px{constructor(t){h(this,"tableCache");h(this,"player_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.player_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class dx{constructor(t){h(this,"tableCache");h(this,"player_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.player_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class fx{constructor(t){h(this,"tableCache");h(this,"player_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.player_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class gx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class hx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class yx{constructor(t){h(this,"tableCache");h(this,"job_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.job_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class mx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class Tx{constructor(t){h(this,"tableCache");h(this,"recipe_id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.recipe_id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class _x{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class Sx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class wx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class bx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class vx{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class Ix{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}class Ax{constructor(t){h(this,"tableCache");h(this,"id",{find:t=>{for(let r of this.tableCache.iter())if(Ye(r.id,t))return r}});h(this,"onInsert",t=>this.tableCache.onInsert(t));h(this,"removeOnInsert",t=>this.tableCache.removeOnInsert(t));h(this,"onDelete",t=>this.tableCache.onDelete(t));h(this,"removeOnDelete",t=>this.tableCache.removeOnDelete(t));h(this,"onUpdate",t=>this.tableCache.onUpdate(t));h(this,"removeOnUpdate",t=>this.tableCache.removeOnUpdate(t));this.tableCache=t}count(){return this.tableCache.count()}iter(){return this.tableCache.iter()}}var _f;(e=>{function t(){return o.createProductType([new c("identity",o.createIdentityType()),new c("connectionId",o.createConnectionIdType()),new c("timestamp",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(_f||(_f={}));var Sf;(e=>{e.HealthRegen={tag:"HealthRegen"},e.Burn={tag:"Burn"},e.Bleed={tag:"Bleed"},e.BandageBurst={tag:"BandageBurst"};function t(){return o.createSumType([new de("HealthRegen",o.createProductType([])),new de("Burn",o.createProductType([])),new de("Bleed",o.createProductType([])),new de("BandageBurst",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Sf||(Sf={}));var wf;(e=>{function t(){return o.createProductType([new c("effectId",o.createU64Type()),new c("playerId",o.createIdentityType()),new c("itemDefId",o.createU64Type()),new c("consumingItemInstanceId",o.createOptionType(o.createU64Type())),new c("startedAt",o.createTimestampType()),new c("endsAt",o.createTimestampType()),new c("totalAmount",o.createOptionType(o.createF32Type())),new c("amountAppliedSoFar",o.createOptionType(o.createF32Type())),new c("effectType",Sf.getTypeScriptAlgebraicType()),new c("tickIntervalMicros",o.createU64Type()),new c("nextTickAt",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(wf||(wf={}));var bf;(e=>{function t(){return o.createProductType([new c("playerIdentity",o.createIdentityType()),new c("equippedItemDefId",o.createOptionType(o.createU64Type())),new c("equippedItemInstanceId",o.createOptionType(o.createU64Type())),new c("iconAssetName",o.createOptionType(o.createStringType())),new c("swingStartTimeMs",o.createU64Type()),new c("headItemInstanceId",o.createOptionType(o.createU64Type())),new c("chestItemInstanceId",o.createOptionType(o.createU64Type())),new c("legsItemInstanceId",o.createOptionType(o.createU64Type())),new c("feetItemInstanceId",o.createOptionType(o.createU64Type())),new c("handsItemInstanceId",o.createOptionType(o.createU64Type())),new c("backItemInstanceId",o.createOptionType(o.createU64Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(bf||(bf={}));var Qn;(e=>{function t(){return o.createProductType([new c("currentCookTimeSecs",o.createF32Type()),new c("targetCookTimeSecs",o.createF32Type()),new c("targetItemDefName",o.createStringType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Qn||(Qn={}));var vf;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("placedBy",o.createIdentityType()),new c("placedAt",o.createTimestampType()),new c("isBurning",o.createBoolType()),new c("fuelInstanceId0",o.createOptionType(o.createU64Type())),new c("fuelDefId0",o.createOptionType(o.createU64Type())),new c("fuelInstanceId1",o.createOptionType(o.createU64Type())),new c("fuelDefId1",o.createOptionType(o.createU64Type())),new c("fuelInstanceId2",o.createOptionType(o.createU64Type())),new c("fuelDefId2",o.createOptionType(o.createU64Type())),new c("fuelInstanceId3",o.createOptionType(o.createU64Type())),new c("fuelDefId3",o.createOptionType(o.createU64Type())),new c("fuelInstanceId4",o.createOptionType(o.createU64Type())),new c("fuelDefId4",o.createOptionType(o.createU64Type())),new c("currentFuelDefId",o.createOptionType(o.createU64Type())),new c("remainingFuelBurnTimeSecs",o.createOptionType(o.createF32Type())),new c("health",o.createF32Type()),new c("maxHealth",o.createF32Type()),new c("isDestroyed",o.createBoolType()),new c("destroyedAt",o.createOptionType(o.createTimestampType())),new c("lastHitTime",o.createOptionType(o.createTimestampType())),new c("slot0CookingProgress",o.createOptionType(Qn.getTypeScriptAlgebraicType())),new c("slot1CookingProgress",o.createOptionType(Qn.getTypeScriptAlgebraicType())),new c("slot2CookingProgress",o.createOptionType(Qn.getTypeScriptAlgebraicType())),new c("slot3CookingProgress",o.createOptionType(Qn.getTypeScriptAlgebraicType())),new c("slot4CookingProgress",o.createOptionType(Qn.getTypeScriptAlgebraicType())),new c("lastDamageApplicationTime",o.createOptionType(o.createTimestampType())),new c("isPlayerInHotZone",o.createBoolType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(vf||(vf={}));var If;(e=>{function t(){return o.createProductType([new c("clientIdentity",o.createIdentityType()),new c("minX",o.createF32Type()),new c("minY",o.createF32Type()),new c("maxX",o.createF32Type()),new c("maxY",o.createF32Type()),new c("lastUpdate",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(If||(If={}));var Af;(e=>{e.CloudImage1={tag:"CloudImage1"},e.CloudImage2={tag:"CloudImage2"},e.CloudImage3={tag:"CloudImage3"},e.CloudImage4={tag:"CloudImage4"},e.CloudImage5={tag:"CloudImage5"};function t(){return o.createSumType([new de("CloudImage1",o.createProductType([])),new de("CloudImage2",o.createProductType([])),new de("CloudImage3",o.createProductType([])),new de("CloudImage4",o.createProductType([])),new de("CloudImage5",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Af||(Af={}));var Cf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("shape",Af.getTypeScriptAlgebraicType()),new c("width",o.createF32Type()),new c("height",o.createF32Type()),new c("rotationDegrees",o.createF32Type()),new c("baseOpacity",o.createF32Type()),new c("blurStrength",o.createF32Type()),new c("driftSpeedX",o.createF32Type()),new c("driftSpeedY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Cf||(Cf={}));var xf;(e=>{e.Campfire={tag:"Campfire"},e.WoodenStorageBox={tag:"WoodenStorageBox"},e.PlayerCorpse={tag:"PlayerCorpse"},e.Stash={tag:"Stash"};function t(){return o.createSumType([new de("Campfire",o.createProductType([])),new de("WoodenStorageBox",o.createProductType([])),new de("PlayerCorpse",o.createProductType([])),new de("Stash",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(xf||(xf={}));var Ef;(e=>{function t(){return o.createProductType([new c("containerType",xf.getTypeScriptAlgebraicType()),new c("containerId",o.createU64Type()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ef||(Ef={}));var Rf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Rf||(Rf={}));var kf;(e=>{function t(){return o.createProductType([new c("itemName",o.createStringType()),new c("quantity",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(kf||(kf={}));var zf;(e=>{function t(){return o.createProductType([new c("queueItemId",o.createU64Type()),new c("playerIdentity",o.createIdentityType()),new c("recipeId",o.createU64Type()),new c("outputItemDefId",o.createU64Type()),new c("outputQuantity",o.createU32Type()),new c("startTime",o.createTimestampType()),new c("finishTime",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(zf||(zf={}));var Ff;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("itemDefId",o.createU64Type()),new c("quantity",o.createU32Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("createdAt",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Ff||(Ff={}));var Mf;(e=>{function t(){return o.createProductType([new c("posX",o.createF32Type()),new c("posY",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Mf||(Mf={}));var ru;(e=>{e.Head={tag:"Head"},e.Chest={tag:"Chest"},e.Legs={tag:"Legs"},e.Feet={tag:"Feet"},e.Hands={tag:"Hands"},e.Back={tag:"Back"};function t(){return o.createSumType([new de("Head",o.createProductType([])),new de("Chest",o.createProductType([])),new de("Legs",o.createProductType([])),new de("Feet",o.createProductType([])),new de("Hands",o.createProductType([])),new de("Back",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ru||(ru={}));var Of;(e=>{function t(){return o.createProductType([new c("ownerId",o.createIdentityType()),new c("slotType",ru.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Of||(Of={}));var Df;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Df||(Df={}));var Uf;(e=>{function t(){return o.createProductType([new c("ownerId",o.createIdentityType()),new c("slotIndex",o.createU8Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Uf||(Uf={}));var Pf;(e=>{function t(){return o.createProductType([new c("ownerId",o.createIdentityType()),new c("slotIndex",o.createU16Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Pf||(Pf={}));var Nf;(e=>{e.Inventory=n=>({tag:"Inventory",value:n}),e.Hotbar=n=>({tag:"Hotbar",value:n}),e.Equipped=n=>({tag:"Equipped",value:n}),e.Container=n=>({tag:"Container",value:n}),e.Dropped=n=>({tag:"Dropped",value:n}),e.Unknown={tag:"Unknown"};function t(){return o.createSumType([new de("Inventory",Pf.getTypeScriptAlgebraicType()),new de("Hotbar",Uf.getTypeScriptAlgebraicType()),new de("Equipped",Of.getTypeScriptAlgebraicType()),new de("Container",Ef.getTypeScriptAlgebraicType()),new de("Dropped",Mf.getTypeScriptAlgebraicType()),new de("Unknown",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Nf||(Nf={}));var Bf;(e=>{function t(){return o.createProductType([new c("instanceId",o.createU64Type()),new c("itemDefId",o.createU64Type()),new c("quantity",o.createU32Type()),new c("location",Nf.getTypeScriptAlgebraicType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Bf||(Bf={}));var Hf;(e=>{e.Tool={tag:"Tool"},e.Material={tag:"Material"},e.Placeable={tag:"Placeable"},e.Armor={tag:"Armor"},e.Consumable={tag:"Consumable"},e.Ammunition={tag:"Ammunition"};function t(){return o.createSumType([new de("Tool",o.createProductType([])),new de("Material",o.createProductType([])),new de("Placeable",o.createProductType([])),new de("Armor",o.createProductType([])),new de("Consumable",o.createProductType([])),new de("Ammunition",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Hf||(Hf={}));var nu;(e=>{e.Tree={tag:"Tree"},e.Stone={tag:"Stone"},e.Player={tag:"Player"},e.Campfire={tag:"Campfire"},e.WoodenStorageBox={tag:"WoodenStorageBox"},e.Stash={tag:"Stash"},e.SleepingBag={tag:"SleepingBag"},e.Animal={tag:"Animal"};function t(){return o.createSumType([new de("Tree",o.createProductType([])),new de("Stone",o.createProductType([])),new de("Player",o.createProductType([])),new de("Campfire",o.createProductType([])),new de("WoodenStorageBox",o.createProductType([])),new de("Stash",o.createProductType([])),new de("SleepingBag",o.createProductType([])),new de("Animal",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(nu||(nu={}));var Lf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("name",o.createStringType()),new c("description",o.createStringType()),new c("category",Hf.getTypeScriptAlgebraicType()),new c("iconAssetName",o.createStringType()),new c("isStackable",o.createBoolType()),new c("stackSize",o.createU32Type()),new c("isEquippable",o.createBoolType()),new c("equipmentSlotType",o.createOptionType(ru.getTypeScriptAlgebraicType())),new c("fuelBurnDurationSecs",o.createOptionType(o.createF32Type())),new c("primaryTargetDamageMin",o.createOptionType(o.createU32Type())),new c("primaryTargetDamageMax",o.createOptionType(o.createU32Type())),new c("primaryTargetYieldMin",o.createOptionType(o.createU32Type())),new c("primaryTargetYieldMax",o.createOptionType(o.createU32Type())),new c("primaryTargetType",o.createOptionType(nu.getTypeScriptAlgebraicType())),new c("primaryYieldResourceName",o.createOptionType(o.createStringType())),new c("secondaryTargetDamageMin",o.createOptionType(o.createU32Type())),new c("secondaryTargetDamageMax",o.createOptionType(o.createU32Type())),new c("secondaryTargetYieldMin",o.createOptionType(o.createU32Type())),new c("secondaryTargetYieldMax",o.createOptionType(o.createU32Type())),new c("secondaryTargetType",o.createOptionType(nu.getTypeScriptAlgebraicType())),new c("secondaryYieldResourceName",o.createOptionType(o.createStringType())),new c("pvpDamageMin",o.createOptionType(o.createU32Type())),new c("pvpDamageMax",o.createOptionType(o.createU32Type())),new c("bleedDamagePerTick",o.createOptionType(o.createF32Type())),new c("bleedDurationSeconds",o.createOptionType(o.createF32Type())),new c("bleedTickIntervalSeconds",o.createOptionType(o.createF32Type())),new c("craftingCost",o.createOptionType(o.createArrayType(kf.getTypeScriptAlgebraicType()))),new c("craftingOutputQuantity",o.createOptionType(o.createU32Type())),new c("craftingTimeSecs",o.createOptionType(o.createU32Type())),new c("consumableHealthGain",o.createOptionType(o.createF32Type())),new c("consumableHungerSatiated",o.createOptionType(o.createF32Type())),new c("consumableThirstQuenched",o.createOptionType(o.createF32Type())),new c("consumableStaminaGain",o.createOptionType(o.createF32Type())),new c("consumableDurationSecs",o.createOptionType(o.createF32Type())),new c("cookTimeSecs",o.createOptionType(o.createF32Type())),new c("cookedItemDefName",o.createOptionType(o.createStringType())),new c("damageResistance",o.createOptionType(o.createF32Type())),new c("warmthBonus",o.createOptionType(o.createF32Type())),new c("respawnTimeSeconds",o.createOptionType(o.createU32Type())),new c("attackIntervalSecs",o.createOptionType(o.createF32Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Lf||(Lf={}));var Yf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("sender",o.createIdentityType()),new c("text",o.createStringType()),new c("sent",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Yf||(Yf={}));var $f;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})($f||($f={}));var Wf;(e=>{function t(){return o.createProductType([new c("identity",o.createIdentityType()),new c("username",o.createStringType()),new c("positionX",o.createF32Type()),new c("positionY",o.createF32Type()),new c("color",o.createStringType()),new c("direction",o.createStringType()),new c("lastUpdate",o.createTimestampType()),new c("lastStatUpdate",o.createTimestampType()),new c("jumpStartTimeMs",o.createU64Type()),new c("health",o.createF32Type()),new c("stamina",o.createF32Type()),new c("thirst",o.createF32Type()),new c("hunger",o.createF32Type()),new c("warmth",o.createF32Type()),new c("isSprinting",o.createBoolType()),new c("isDead",o.createBoolType()),new c("deathTimestamp",o.createOptionType(o.createTimestampType())),new c("lastHitTime",o.createOptionType(o.createTimestampType())),new c("isOnline",o.createBoolType()),new c("isTorchLit",o.createBoolType()),new c("lastConsumedAt",o.createOptionType(o.createTimestampType())),new c("isCrouching",o.createBoolType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Wf||(Wf={}));var Xf;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("playerIdentity",o.createIdentityType()),new c("username",o.createStringType()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("deathTime",o.createTimestampType()),new c("despawnScheduledAt",o.createTimestampType()),new c("slotInstanceId0",o.createOptionType(o.createU64Type())),new c("slotDefId0",o.createOptionType(o.createU64Type())),new c("slotInstanceId1",o.createOptionType(o.createU64Type())),new c("slotDefId1",o.createOptionType(o.createU64Type())),new c("slotInstanceId2",o.createOptionType(o.createU64Type())),new c("slotDefId2",o.createOptionType(o.createU64Type())),new c("slotInstanceId3",o.createOptionType(o.createU64Type())),new c("slotDefId3",o.createOptionType(o.createU64Type())),new c("slotInstanceId4",o.createOptionType(o.createU64Type())),new c("slotDefId4",o.createOptionType(o.createU64Type())),new c("slotInstanceId5",o.createOptionType(o.createU64Type())),new c("slotDefId5",o.createOptionType(o.createU64Type())),new c("slotInstanceId6",o.createOptionType(o.createU64Type())),new c("slotDefId6",o.createOptionType(o.createU64Type())),new c("slotInstanceId7",o.createOptionType(o.createU64Type())),new c("slotDefId7",o.createOptionType(o.createU64Type())),new c("slotInstanceId8",o.createOptionType(o.createU64Type())),new c("slotDefId8",o.createOptionType(o.createU64Type())),new c("slotInstanceId9",o.createOptionType(o.createU64Type())),new c("slotDefId9",o.createOptionType(o.createU64Type())),new c("slotInstanceId10",o.createOptionType(o.createU64Type())),new c("slotDefId10",o.createOptionType(o.createU64Type())),new c("slotInstanceId11",o.createOptionType(o.createU64Type())),new c("slotDefId11",o.createOptionType(o.createU64Type())),new c("slotInstanceId12",o.createOptionType(o.createU64Type())),new c("slotDefId12",o.createOptionType(o.createU64Type())),new c("slotInstanceId13",o.createOptionType(o.createU64Type())),new c("slotDefId13",o.createOptionType(o.createU64Type())),new c("slotInstanceId14",o.createOptionType(o.createU64Type())),new c("slotDefId14",o.createOptionType(o.createU64Type())),new c("slotInstanceId15",o.createOptionType(o.createU64Type())),new c("slotDefId15",o.createOptionType(o.createU64Type())),new c("slotInstanceId16",o.createOptionType(o.createU64Type())),new c("slotDefId16",o.createOptionType(o.createU64Type())),new c("slotInstanceId17",o.createOptionType(o.createU64Type())),new c("slotDefId17",o.createOptionType(o.createU64Type())),new c("slotInstanceId18",o.createOptionType(o.createU64Type())),new c("slotDefId18",o.createOptionType(o.createU64Type())),new c("slotInstanceId19",o.createOptionType(o.createU64Type())),new c("slotDefId19",o.createOptionType(o.createU64Type())),new c("slotInstanceId20",o.createOptionType(o.createU64Type())),new c("slotDefId20",o.createOptionType(o.createU64Type())),new c("slotInstanceId21",o.createOptionType(o.createU64Type())),new c("slotDefId21",o.createOptionType(o.createU64Type())),new c("slotInstanceId22",o.createOptionType(o.createU64Type())),new c("slotDefId22",o.createOptionType(o.createU64Type())),new c("slotInstanceId23",o.createOptionType(o.createU64Type())),new c("slotDefId23",o.createOptionType(o.createU64Type())),new c("slotInstanceId24",o.createOptionType(o.createU64Type())),new c("slotDefId24",o.createOptionType(o.createU64Type())),new c("slotInstanceId25",o.createOptionType(o.createU64Type())),new c("slotDefId25",o.createOptionType(o.createU64Type())),new c("slotInstanceId26",o.createOptionType(o.createU64Type())),new c("slotDefId26",o.createOptionType(o.createU64Type())),new c("slotInstanceId27",o.createOptionType(o.createU64Type())),new c("slotDefId27",o.createOptionType(o.createU64Type())),new c("slotInstanceId28",o.createOptionType(o.createU64Type())),new c("slotDefId28",o.createOptionType(o.createU64Type())),new c("slotInstanceId29",o.createOptionType(o.createU64Type())),new c("slotDefId29",o.createOptionType(o.createU64Type())),new c("slotInstanceId30",o.createOptionType(o.createU64Type())),new c("slotDefId30",o.createOptionType(o.createU64Type())),new c("slotInstanceId31",o.createOptionType(o.createU64Type())),new c("slotDefId31",o.createOptionType(o.createU64Type())),new c("slotInstanceId32",o.createOptionType(o.createU64Type())),new c("slotDefId32",o.createOptionType(o.createU64Type())),new c("slotInstanceId33",o.createOptionType(o.createU64Type())),new c("slotDefId33",o.createOptionType(o.createU64Type())),new c("slotInstanceId34",o.createOptionType(o.createU64Type())),new c("slotDefId34",o.createOptionType(o.createU64Type()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Xf||(Xf={}));var jf;(e=>{function t(){return o.createProductType([new c("playerId",o.createIdentityType()),new c("lastKillCommandAt",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(jf||(jf={}));var qf;(e=>{function t(){return o.createProductType([new c("playerId",o.createIdentityType()),new c("lastAttackTimestamp",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(qf||(qf={}));var Vf;(e=>{function t(){return o.createProductType([new c("playerId",o.createIdentityType()),new c("pinX",o.createI32Type()),new c("pinY",o.createI32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Vf||(Vf={}));var Kf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("recipientIdentity",o.createIdentityType()),new c("senderDisplayName",o.createStringType()),new c("text",o.createStringType()),new c("sent",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Kf||(Kf={}));var Gf;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Gf||(Gf={}));var Qf;(e=>{function t(){return o.createProductType([new c("itemDefId",o.createU64Type()),new c("quantity",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Qf||(Qf={}));var Jf;(e=>{function t(){return o.createProductType([new c("recipeId",o.createU64Type()),new c("outputItemDefId",o.createU64Type()),new c("outputQuantity",o.createU32Type()),new c("ingredients",o.createArrayType(Qf.getTypeScriptAlgebraicType())),new c("craftingTimeSecs",o.createU32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Jf||(Jf={}));var Zf;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("placedBy",o.createIdentityType()),new c("placedAt",o.createTimestampType()),new c("health",o.createF32Type()),new c("maxHealth",o.createF32Type()),new c("isDestroyed",o.createBoolType()),new c("destroyedAt",o.createOptionType(o.createTimestampType())),new c("lastHitTime",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(Zf||(Zf={}));var eg;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("placedBy",o.createIdentityType()),new c("isHidden",o.createBoolType()),new c("lastSurfacedBy",o.createOptionType(o.createIdentityType())),new c("slotInstanceId0",o.createOptionType(o.createU64Type())),new c("slotDefId0",o.createOptionType(o.createU64Type())),new c("slotInstanceId1",o.createOptionType(o.createU64Type())),new c("slotDefId1",o.createOptionType(o.createU64Type())),new c("slotInstanceId2",o.createOptionType(o.createU64Type())),new c("slotDefId2",o.createOptionType(o.createU64Type())),new c("slotInstanceId3",o.createOptionType(o.createU64Type())),new c("slotDefId3",o.createOptionType(o.createU64Type())),new c("slotInstanceId4",o.createOptionType(o.createU64Type())),new c("slotDefId4",o.createOptionType(o.createU64Type())),new c("slotInstanceId5",o.createOptionType(o.createU64Type())),new c("slotDefId5",o.createOptionType(o.createU64Type())),new c("health",o.createF32Type()),new c("maxHealth",o.createF32Type()),new c("isDestroyed",o.createBoolType()),new c("destroyedAt",o.createOptionType(o.createTimestampType())),new c("lastHitTime",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(eg||(eg={}));var tg;(e=>{function t(){return o.createProductType([new c("id",o.createU8Type()),new c("lowNeedThreshold",o.createF32Type())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(tg||(tg={}));var rg;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("health",o.createU32Type()),new c("chunkIndex",o.createU32Type()),new c("lastHitTime",o.createOptionType(o.createTimestampType())),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(rg||(rg={}));var ng;(e=>{e.Dawn={tag:"Dawn"},e.TwilightMorning={tag:"TwilightMorning"},e.Morning={tag:"Morning"},e.Noon={tag:"Noon"},e.Afternoon={tag:"Afternoon"},e.Dusk={tag:"Dusk"},e.TwilightEvening={tag:"TwilightEvening"},e.Night={tag:"Night"},e.Midnight={tag:"Midnight"};function t(){return o.createSumType([new de("Dawn",o.createProductType([])),new de("TwilightMorning",o.createProductType([])),new de("Morning",o.createProductType([])),new de("Noon",o.createProductType([])),new de("Afternoon",o.createProductType([])),new de("Dusk",o.createProductType([])),new de("TwilightEvening",o.createProductType([])),new de("Night",o.createProductType([])),new de("Midnight",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ng||(ng={}));var ig;(e=>{e.AleppoPine={tag:"AleppoPine"},e.MannaAsh={tag:"MannaAsh"},e.DownyOak={tag:"DownyOak"};function t(){return o.createSumType([new de("AleppoPine",o.createProductType([])),new de("MannaAsh",o.createProductType([])),new de("DownyOak",o.createProductType([]))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ig||(ig={}));var sg;(e=>{function t(){return o.createProductType([new c("id",o.createU64Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("health",o.createU32Type()),new c("treeType",ig.getTypeScriptAlgebraicType()),new c("chunkIndex",o.createU32Type()),new c("lastHitTime",o.createOptionType(o.createTimestampType())),new c("respawnAt",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(sg||(sg={}));var og;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("posX",o.createF32Type()),new c("posY",o.createF32Type()),new c("chunkIndex",o.createU32Type()),new c("placedBy",o.createIdentityType()),new c("slotInstanceId0",o.createOptionType(o.createU64Type())),new c("slotDefId0",o.createOptionType(o.createU64Type())),new c("slotInstanceId1",o.createOptionType(o.createU64Type())),new c("slotDefId1",o.createOptionType(o.createU64Type())),new c("slotInstanceId2",o.createOptionType(o.createU64Type())),new c("slotDefId2",o.createOptionType(o.createU64Type())),new c("slotInstanceId3",o.createOptionType(o.createU64Type())),new c("slotDefId3",o.createOptionType(o.createU64Type())),new c("slotInstanceId4",o.createOptionType(o.createU64Type())),new c("slotDefId4",o.createOptionType(o.createU64Type())),new c("slotInstanceId5",o.createOptionType(o.createU64Type())),new c("slotDefId5",o.createOptionType(o.createU64Type())),new c("slotInstanceId6",o.createOptionType(o.createU64Type())),new c("slotDefId6",o.createOptionType(o.createU64Type())),new c("slotInstanceId7",o.createOptionType(o.createU64Type())),new c("slotDefId7",o.createOptionType(o.createU64Type())),new c("slotInstanceId8",o.createOptionType(o.createU64Type())),new c("slotDefId8",o.createOptionType(o.createU64Type())),new c("slotInstanceId9",o.createOptionType(o.createU64Type())),new c("slotDefId9",o.createOptionType(o.createU64Type())),new c("slotInstanceId10",o.createOptionType(o.createU64Type())),new c("slotDefId10",o.createOptionType(o.createU64Type())),new c("slotInstanceId11",o.createOptionType(o.createU64Type())),new c("slotDefId11",o.createOptionType(o.createU64Type())),new c("slotInstanceId12",o.createOptionType(o.createU64Type())),new c("slotDefId12",o.createOptionType(o.createU64Type())),new c("slotInstanceId13",o.createOptionType(o.createU64Type())),new c("slotDefId13",o.createOptionType(o.createU64Type())),new c("slotInstanceId14",o.createOptionType(o.createU64Type())),new c("slotDefId14",o.createOptionType(o.createU64Type())),new c("slotInstanceId15",o.createOptionType(o.createU64Type())),new c("slotDefId15",o.createOptionType(o.createU64Type())),new c("slotInstanceId16",o.createOptionType(o.createU64Type())),new c("slotDefId16",o.createOptionType(o.createU64Type())),new c("slotInstanceId17",o.createOptionType(o.createU64Type())),new c("slotDefId17",o.createOptionType(o.createU64Type())),new c("health",o.createF32Type()),new c("maxHealth",o.createF32Type()),new c("isDestroyed",o.createBoolType()),new c("destroyedAt",o.createOptionType(o.createTimestampType())),new c("lastHitTime",o.createOptionType(o.createTimestampType()))])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(og||(og={}));var ag;(e=>{function t(){return o.createProductType([new c("id",o.createU32Type()),new c("cycleProgress",o.createF32Type()),new c("timeOfDay",ng.getTypeScriptAlgebraicType()),new c("cycleCount",o.createU32Type()),new c("isFullMoon",o.createBoolType()),new c("lastTick",o.createTimestampType())])}e.getTypeScriptAlgebraicType=t;function r(n,s){e.getTypeScriptAlgebraicType().serialize(n,s)}e.serialize=r;function i(n){return e.getTypeScriptAlgebraicType().deserialize(n)}e.deserialize=i})(ag||(ag={}));const Le={tables:{active_connection:{tableName:"active_connection",rowType:_f.getTypeScriptAlgebraicType(),primaryKey:"identity"},active_consumable_effect:{tableName:"active_consumable_effect",rowType:wf.getTypeScriptAlgebraicType(),primaryKey:"effectId"},active_equipment:{tableName:"active_equipment",rowType:bf.getTypeScriptAlgebraicType(),primaryKey:"playerIdentity"},campfire:{tableName:"campfire",rowType:vf.getTypeScriptAlgebraicType(),primaryKey:"id"},campfire_processing_schedule:{tableName:"campfire_processing_schedule",rowType:ac.getTypeScriptAlgebraicType(),primaryKey:"campfireId"},client_viewport:{tableName:"client_viewport",rowType:If.getTypeScriptAlgebraicType(),primaryKey:"clientIdentity"},cloud:{tableName:"cloud",rowType:Cf.getTypeScriptAlgebraicType(),primaryKey:"id"},cloud_update_schedule:{tableName:"cloud_update_schedule",rowType:Jc.getTypeScriptAlgebraicType(),primaryKey:"scheduleId"},corn:{tableName:"corn",rowType:Rf.getTypeScriptAlgebraicType(),primaryKey:"id"},crafting_finish_schedule:{tableName:"crafting_finish_schedule",rowType:Tl.getTypeScriptAlgebraicType(),primaryKey:"id"},crafting_queue_item:{tableName:"crafting_queue_item",rowType:zf.getTypeScriptAlgebraicType(),primaryKey:"queueItemId"},dropped_item:{tableName:"dropped_item",rowType:Ff.getTypeScriptAlgebraicType(),primaryKey:"id"},dropped_item_despawn_schedule:{tableName:"dropped_item_despawn_schedule",rowType:bl.getTypeScriptAlgebraicType(),primaryKey:"id"},global_tick_schedule:{tableName:"global_tick_schedule",rowType:pc.getTypeScriptAlgebraicType(),primaryKey:"id"},hemp:{tableName:"hemp",rowType:Df.getTypeScriptAlgebraicType(),primaryKey:"id"},inventory_item:{tableName:"inventory_item",rowType:Bf.getTypeScriptAlgebraicType(),primaryKey:"instanceId"},item_definition:{tableName:"item_definition",rowType:Lf.getTypeScriptAlgebraicType(),primaryKey:"id"},message:{tableName:"message",rowType:Yf.getTypeScriptAlgebraicType(),primaryKey:"id"},mushroom:{tableName:"mushroom",rowType:$f.getTypeScriptAlgebraicType(),primaryKey:"id"},player:{tableName:"player",rowType:Wf.getTypeScriptAlgebraicType(),primaryKey:"identity"},player_corpse:{tableName:"player_corpse",rowType:Xf.getTypeScriptAlgebraicType(),primaryKey:"id"},player_corpse_despawn_schedule:{tableName:"player_corpse_despawn_schedule",rowType:cc.getTypeScriptAlgebraicType(),primaryKey:"corpseId"},player_kill_command_cooldown:{tableName:"player_kill_command_cooldown",rowType:jf.getTypeScriptAlgebraicType(),primaryKey:"playerId"},player_last_attack_timestamp:{tableName:"player_last_attack_timestamp",rowType:qf.getTypeScriptAlgebraicType(),primaryKey:"playerId"},player_pin:{tableName:"player_pin",rowType:Vf.getTypeScriptAlgebraicType(),primaryKey:"playerId"},player_stat_schedule:{tableName:"player_stat_schedule",rowType:fc.getTypeScriptAlgebraicType(),primaryKey:"id"},private_message:{tableName:"private_message",rowType:Kf.getTypeScriptAlgebraicType(),primaryKey:"id"},process_effects_schedule:{tableName:"process_effects_schedule",rowType:sc.getTypeScriptAlgebraicType(),primaryKey:"jobId"},pumpkin:{tableName:"pumpkin",rowType:Gf.getTypeScriptAlgebraicType(),primaryKey:"id"},recipe:{tableName:"recipe",rowType:Jf.getTypeScriptAlgebraicType(),primaryKey:"recipeId"},sleeping_bag:{tableName:"sleeping_bag",rowType:Zf.getTypeScriptAlgebraicType(),primaryKey:"id"},stash:{tableName:"stash",rowType:eg.getTypeScriptAlgebraicType(),primaryKey:"id"},stat_thresholds_config:{tableName:"stat_thresholds_config",rowType:tg.getTypeScriptAlgebraicType(),primaryKey:"id"},stone:{tableName:"stone",rowType:rg.getTypeScriptAlgebraicType(),primaryKey:"id"},tree:{tableName:"tree",rowType:sg.getTypeScriptAlgebraicType(),primaryKey:"id"},wooden_storage_box:{tableName:"wooden_storage_box",rowType:og.getTypeScriptAlgebraicType(),primaryKey:"id"},world_state:{tableName:"world_state",rowType:ag.getTypeScriptAlgebraicType(),primaryKey:"id"}},reducers:{add_fuel_to_campfire:{reducerName:"add_fuel_to_campfire",argsType:hl.getTypeScriptAlgebraicType()},auto_remove_fuel_from_campfire:{reducerName:"auto_remove_fuel_from_campfire",argsType:yl.getTypeScriptAlgebraicType()},cancel_all_crafting:{reducerName:"cancel_all_crafting",argsType:of.getTypeScriptAlgebraicType()},cancel_crafting_item:{reducerName:"cancel_crafting_item",argsType:ml.getTypeScriptAlgebraicType()},check_finished_crafting:{reducerName:"check_finished_crafting",argsType:_l.getTypeScriptAlgebraicType()},check_resource_respawns:{reducerName:"check_resource_respawns",argsType:af.getTypeScriptAlgebraicType()},clear_active_item_reducer:{reducerName:"clear_active_item_reducer",argsType:Sl.getTypeScriptAlgebraicType()},consume_item:{reducerName:"consume_item",argsType:wl.getTypeScriptAlgebraicType()},despawn_expired_items:{reducerName:"despawn_expired_items",argsType:vl.getTypeScriptAlgebraicType()},drop_item:{reducerName:"drop_item",argsType:Il.getTypeScriptAlgebraicType()},drop_item_from_box_slot_to_world:{reducerName:"drop_item_from_box_slot_to_world",argsType:Al.getTypeScriptAlgebraicType()},drop_item_from_campfire_slot_to_world:{reducerName:"drop_item_from_campfire_slot_to_world",argsType:Cl.getTypeScriptAlgebraicType()},drop_item_from_corpse_slot_to_world:{reducerName:"drop_item_from_corpse_slot_to_world",argsType:xl.getTypeScriptAlgebraicType()},drop_item_from_stash_slot_to_world:{reducerName:"drop_item_from_stash_slot_to_world",argsType:El.getTypeScriptAlgebraicType()},equip_armor:{reducerName:"equip_armor",argsType:Rl.getTypeScriptAlgebraicType()},equip_armor_from_drag:{reducerName:"equip_armor_from_drag",argsType:kl.getTypeScriptAlgebraicType()},equip_armor_from_inventory:{reducerName:"equip_armor_from_inventory",argsType:zl.getTypeScriptAlgebraicType()},identity_connected:{reducerName:"identity_connected",argsType:lf.getTypeScriptAlgebraicType()},identity_disconnected:{reducerName:"identity_disconnected",argsType:cf.getTypeScriptAlgebraicType()},interact_with_campfire:{reducerName:"interact_with_campfire",argsType:Fl.getTypeScriptAlgebraicType()},interact_with_corn:{reducerName:"interact_with_corn",argsType:Ml.getTypeScriptAlgebraicType()},interact_with_hemp:{reducerName:"interact_with_hemp",argsType:Ol.getTypeScriptAlgebraicType()},interact_with_mushroom:{reducerName:"interact_with_mushroom",argsType:Dl.getTypeScriptAlgebraicType()},interact_with_pumpkin:{reducerName:"interact_with_pumpkin",argsType:Ul.getTypeScriptAlgebraicType()},interact_with_sleeping_bag:{reducerName:"interact_with_sleeping_bag",argsType:Pl.getTypeScriptAlgebraicType()},interact_with_storage_box:{reducerName:"interact_with_storage_box",argsType:Nl.getTypeScriptAlgebraicType()},jump:{reducerName:"jump",argsType:uf.getTypeScriptAlgebraicType()},move_fuel_item_to_player_slot:{reducerName:"move_fuel_item_to_player_slot",argsType:Bl.getTypeScriptAlgebraicType()},move_fuel_within_campfire:{reducerName:"move_fuel_within_campfire",argsType:Hl.getTypeScriptAlgebraicType()},move_item_from_box:{reducerName:"move_item_from_box",argsType:Ll.getTypeScriptAlgebraicType()},move_item_from_corpse:{reducerName:"move_item_from_corpse",argsType:Yl.getTypeScriptAlgebraicType()},move_item_from_stash:{reducerName:"move_item_from_stash",argsType:$l.getTypeScriptAlgebraicType()},move_item_to_box:{reducerName:"move_item_to_box",argsType:Wl.getTypeScriptAlgebraicType()},move_item_to_corpse:{reducerName:"move_item_to_corpse",argsType:Xl.getTypeScriptAlgebraicType()},move_item_to_hotbar:{reducerName:"move_item_to_hotbar",argsType:jl.getTypeScriptAlgebraicType()},move_item_to_inventory:{reducerName:"move_item_to_inventory",argsType:ql.getTypeScriptAlgebraicType()},move_item_to_stash:{reducerName:"move_item_to_stash",argsType:Vl.getTypeScriptAlgebraicType()},move_item_within_box:{reducerName:"move_item_within_box",argsType:Kl.getTypeScriptAlgebraicType()},move_item_within_corpse:{reducerName:"move_item_within_corpse",argsType:Gl.getTypeScriptAlgebraicType()},move_item_within_stash:{reducerName:"move_item_within_stash",argsType:Ql.getTypeScriptAlgebraicType()},move_to_first_available_hotbar_slot:{reducerName:"move_to_first_available_hotbar_slot",argsType:Jl.getTypeScriptAlgebraicType()},pickup_dropped_item:{reducerName:"pickup_dropped_item",argsType:Zl.getTypeScriptAlgebraicType()},pickup_storage_box:{reducerName:"pickup_storage_box",argsType:ec.getTypeScriptAlgebraicType()},place_campfire:{reducerName:"place_campfire",argsType:tc.getTypeScriptAlgebraicType()},place_sleeping_bag:{reducerName:"place_sleeping_bag",argsType:rc.getTypeScriptAlgebraicType()},place_stash:{reducerName:"place_stash",argsType:nc.getTypeScriptAlgebraicType()},place_wooden_storage_box:{reducerName:"place_wooden_storage_box",argsType:ic.getTypeScriptAlgebraicType()},process_active_consumable_effects_tick:{reducerName:"process_active_consumable_effects_tick",argsType:oc.getTypeScriptAlgebraicType()},process_campfire_logic_scheduled:{reducerName:"process_campfire_logic_scheduled",argsType:lc.getTypeScriptAlgebraicType()},process_corpse_despawn:{reducerName:"process_corpse_despawn",argsType:uc.getTypeScriptAlgebraicType()},process_global_tick:{reducerName:"process_global_tick",argsType:dc.getTypeScriptAlgebraicType()},process_player_stats:{reducerName:"process_player_stats",argsType:gc.getTypeScriptAlgebraicType()},quick_move_from_box:{reducerName:"quick_move_from_box",argsType:hc.getTypeScriptAlgebraicType()},quick_move_from_corpse:{reducerName:"quick_move_from_corpse",argsType:yc.getTypeScriptAlgebraicType()},quick_move_from_stash:{reducerName:"quick_move_from_stash",argsType:mc.getTypeScriptAlgebraicType()},quick_move_to_box:{reducerName:"quick_move_to_box",argsType:Tc.getTypeScriptAlgebraicType()},quick_move_to_campfire:{reducerName:"quick_move_to_campfire",argsType:_c.getTypeScriptAlgebraicType()},quick_move_to_corpse:{reducerName:"quick_move_to_corpse",argsType:Sc.getTypeScriptAlgebraicType()},quick_move_to_stash:{reducerName:"quick_move_to_stash",argsType:wc.getTypeScriptAlgebraicType()},register_player:{reducerName:"register_player",argsType:bc.getTypeScriptAlgebraicType()},respawn_at_sleeping_bag:{reducerName:"respawn_at_sleeping_bag",argsType:vc.getTypeScriptAlgebraicType()},respawn_randomly:{reducerName:"respawn_randomly",argsType:pf.getTypeScriptAlgebraicType()},schedule_next_campfire_processing:{reducerName:"schedule_next_campfire_processing",argsType:Ic.getTypeScriptAlgebraicType()},seed_environment:{reducerName:"seed_environment",argsType:df.getTypeScriptAlgebraicType()},seed_items:{reducerName:"seed_items",argsType:ff.getTypeScriptAlgebraicType()},seed_recipes:{reducerName:"seed_recipes",argsType:gf.getTypeScriptAlgebraicType()},seed_world_state:{reducerName:"seed_world_state",argsType:hf.getTypeScriptAlgebraicType()},send_message:{reducerName:"send_message",argsType:Ac.getTypeScriptAlgebraicType()},set_active_item_reducer:{reducerName:"set_active_item_reducer",argsType:Cc.getTypeScriptAlgebraicType()},set_player_pin:{reducerName:"set_player_pin",argsType:xc.getTypeScriptAlgebraicType()},set_sprinting:{reducerName:"set_sprinting",argsType:Ec.getTypeScriptAlgebraicType()},split_and_drop_item_from_box_slot_to_world:{reducerName:"split_and_drop_item_from_box_slot_to_world",argsType:Rc.getTypeScriptAlgebraicType()},split_and_drop_item_from_campfire_slot_to_world:{reducerName:"split_and_drop_item_from_campfire_slot_to_world",argsType:kc.getTypeScriptAlgebraicType()},split_and_drop_item_from_corpse_slot_to_world:{reducerName:"split_and_drop_item_from_corpse_slot_to_world",argsType:zc.getTypeScriptAlgebraicType()},split_and_drop_item_from_stash_slot_to_world:{reducerName:"split_and_drop_item_from_stash_slot_to_world",argsType:Fc.getTypeScriptAlgebraicType()},split_and_move_from_campfire:{reducerName:"split_and_move_from_campfire",argsType:Mc.getTypeScriptAlgebraicType()},split_stack:{reducerName:"split_stack",argsType:Oc.getTypeScriptAlgebraicType()},split_stack_from_box:{reducerName:"split_stack_from_box",argsType:Dc.getTypeScriptAlgebraicType()},split_stack_from_campfire:{reducerName:"split_stack_from_campfire",argsType:Uc.getTypeScriptAlgebraicType()},split_stack_from_corpse:{reducerName:"split_stack_from_corpse",argsType:Pc.getTypeScriptAlgebraicType()},split_stack_from_stash:{reducerName:"split_stack_from_stash",argsType:Nc.getTypeScriptAlgebraicType()},split_stack_into_box:{reducerName:"split_stack_into_box",argsType:Bc.getTypeScriptAlgebraicType()},split_stack_into_campfire:{reducerName:"split_stack_into_campfire",argsType:Hc.getTypeScriptAlgebraicType()},split_stack_into_corpse:{reducerName:"split_stack_into_corpse",argsType:Lc.getTypeScriptAlgebraicType()},split_stack_into_stash:{reducerName:"split_stack_into_stash",argsType:Yc.getTypeScriptAlgebraicType()},split_stack_within_box:{reducerName:"split_stack_within_box",argsType:$c.getTypeScriptAlgebraicType()},split_stack_within_campfire:{reducerName:"split_stack_within_campfire",argsType:Wc.getTypeScriptAlgebraicType()},split_stack_within_corpse:{reducerName:"split_stack_within_corpse",argsType:Xc.getTypeScriptAlgebraicType()},split_stack_within_stash:{reducerName:"split_stack_within_stash",argsType:jc.getTypeScriptAlgebraicType()},start_crafting:{reducerName:"start_crafting",argsType:qc.getTypeScriptAlgebraicType()},start_crafting_multiple:{reducerName:"start_crafting_multiple",argsType:Vc.getTypeScriptAlgebraicType()},tick_world_state:{reducerName:"tick_world_state",argsType:Kc.getTypeScriptAlgebraicType()},toggle_campfire_burning:{reducerName:"toggle_campfire_burning",argsType:Gc.getTypeScriptAlgebraicType()},toggle_crouch:{reducerName:"toggle_crouch",argsType:yf.getTypeScriptAlgebraicType()},toggle_stash_visibility:{reducerName:"toggle_stash_visibility",argsType:Qc.getTypeScriptAlgebraicType()},toggle_torch:{reducerName:"toggle_torch",argsType:mf.getTypeScriptAlgebraicType()},update_cloud_positions:{reducerName:"update_cloud_positions",argsType:Zc.getTypeScriptAlgebraicType()},update_player_position:{reducerName:"update_player_position",argsType:eu.getTypeScriptAlgebraicType()},update_viewport:{reducerName:"update_viewport",argsType:tu.getTypeScriptAlgebraicType()},use_equipped_item:{reducerName:"use_equipped_item",argsType:Tf.getTypeScriptAlgebraicType()}},eventContextConstructor:(e,t)=>({...e,event:t}),dbViewConstructor:e=>new Ex(e),reducersConstructor:(e,t)=>new Cx(e,t),setReducerFlagsConstructor:()=>new xx};class Cx{constructor(t,r){this.connection=t,this.setCallReducerFlags=r}addFuelToCampfire(t,r,i){const n={campfireId:t,targetSlotIndex:r,itemInstanceId:i};let s=new ce(1024);hl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("add_fuel_to_campfire",a,this.setCallReducerFlags.addFuelToCampfireFlags)}onAddFuelToCampfire(t){this.connection.onReducer("add_fuel_to_campfire",t)}removeOnAddFuelToCampfire(t){this.connection.offReducer("add_fuel_to_campfire",t)}autoRemoveFuelFromCampfire(t,r){const i={campfireId:t,sourceSlotIndex:r};let n=new ce(1024);yl.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("auto_remove_fuel_from_campfire",s,this.setCallReducerFlags.autoRemoveFuelFromCampfireFlags)}onAutoRemoveFuelFromCampfire(t){this.connection.onReducer("auto_remove_fuel_from_campfire",t)}removeOnAutoRemoveFuelFromCampfire(t){this.connection.offReducer("auto_remove_fuel_from_campfire",t)}cancelAllCrafting(){this.connection.callReducer("cancel_all_crafting",new Uint8Array(0),this.setCallReducerFlags.cancelAllCraftingFlags)}onCancelAllCrafting(t){this.connection.onReducer("cancel_all_crafting",t)}removeOnCancelAllCrafting(t){this.connection.offReducer("cancel_all_crafting",t)}cancelCraftingItem(t){const r={queueItemId:t};let i=new ce(1024);ml.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("cancel_crafting_item",n,this.setCallReducerFlags.cancelCraftingItemFlags)}onCancelCraftingItem(t){this.connection.onReducer("cancel_crafting_item",t)}removeOnCancelCraftingItem(t){this.connection.offReducer("cancel_crafting_item",t)}checkFinishedCrafting(t){const r={schedule:t};let i=new ce(1024);_l.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("check_finished_crafting",n,this.setCallReducerFlags.checkFinishedCraftingFlags)}onCheckFinishedCrafting(t){this.connection.onReducer("check_finished_crafting",t)}removeOnCheckFinishedCrafting(t){this.connection.offReducer("check_finished_crafting",t)}checkResourceRespawns(){this.connection.callReducer("check_resource_respawns",new Uint8Array(0),this.setCallReducerFlags.checkResourceRespawnsFlags)}onCheckResourceRespawns(t){this.connection.onReducer("check_resource_respawns",t)}removeOnCheckResourceRespawns(t){this.connection.offReducer("check_resource_respawns",t)}clearActiveItemReducer(t){const r={playerIdentity:t};let i=new ce(1024);Sl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("clear_active_item_reducer",n,this.setCallReducerFlags.clearActiveItemReducerFlags)}onClearActiveItemReducer(t){this.connection.onReducer("clear_active_item_reducer",t)}removeOnClearActiveItemReducer(t){this.connection.offReducer("clear_active_item_reducer",t)}consumeItem(t){const r={itemInstanceId:t};let i=new ce(1024);wl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("consume_item",n,this.setCallReducerFlags.consumeItemFlags)}onConsumeItem(t){this.connection.onReducer("consume_item",t)}removeOnConsumeItem(t){this.connection.offReducer("consume_item",t)}despawnExpiredItems(t){const r={schedule:t};let i=new ce(1024);vl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("despawn_expired_items",n,this.setCallReducerFlags.despawnExpiredItemsFlags)}onDespawnExpiredItems(t){this.connection.onReducer("despawn_expired_items",t)}removeOnDespawnExpiredItems(t){this.connection.offReducer("despawn_expired_items",t)}dropItem(t,r){const i={itemInstanceId:t,quantityToDrop:r};let n=new ce(1024);Il.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("drop_item",s,this.setCallReducerFlags.dropItemFlags)}onDropItem(t){this.connection.onReducer("drop_item",t)}removeOnDropItem(t){this.connection.offReducer("drop_item",t)}dropItemFromBoxSlotToWorld(t,r){const i={boxId:t,slotIndex:r};let n=new ce(1024);Al.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("drop_item_from_box_slot_to_world",s,this.setCallReducerFlags.dropItemFromBoxSlotToWorldFlags)}onDropItemFromBoxSlotToWorld(t){this.connection.onReducer("drop_item_from_box_slot_to_world",t)}removeOnDropItemFromBoxSlotToWorld(t){this.connection.offReducer("drop_item_from_box_slot_to_world",t)}dropItemFromCampfireSlotToWorld(t,r){const i={campfireId:t,slotIndex:r};let n=new ce(1024);Cl.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("drop_item_from_campfire_slot_to_world",s,this.setCallReducerFlags.dropItemFromCampfireSlotToWorldFlags)}onDropItemFromCampfireSlotToWorld(t){this.connection.onReducer("drop_item_from_campfire_slot_to_world",t)}removeOnDropItemFromCampfireSlotToWorld(t){this.connection.offReducer("drop_item_from_campfire_slot_to_world",t)}dropItemFromCorpseSlotToWorld(t,r){const i={corpseId:t,slotIndex:r};let n=new ce(1024);xl.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("drop_item_from_corpse_slot_to_world",s,this.setCallReducerFlags.dropItemFromCorpseSlotToWorldFlags)}onDropItemFromCorpseSlotToWorld(t){this.connection.onReducer("drop_item_from_corpse_slot_to_world",t)}removeOnDropItemFromCorpseSlotToWorld(t){this.connection.offReducer("drop_item_from_corpse_slot_to_world",t)}dropItemFromStashSlotToWorld(t,r){const i={stashId:t,slotIndex:r};let n=new ce(1024);El.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("drop_item_from_stash_slot_to_world",s,this.setCallReducerFlags.dropItemFromStashSlotToWorldFlags)}onDropItemFromStashSlotToWorld(t){this.connection.onReducer("drop_item_from_stash_slot_to_world",t)}removeOnDropItemFromStashSlotToWorld(t){this.connection.offReducer("drop_item_from_stash_slot_to_world",t)}equipArmor(t){const r={itemInstanceId:t};let i=new ce(1024);Rl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("equip_armor",n,this.setCallReducerFlags.equipArmorFlags)}onEquipArmor(t){this.connection.onReducer("equip_armor",t)}removeOnEquipArmor(t){this.connection.offReducer("equip_armor",t)}equipArmorFromDrag(t,r){const i={itemInstanceId:t,targetSlotName:r};let n=new ce(1024);kl.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("equip_armor_from_drag",s,this.setCallReducerFlags.equipArmorFromDragFlags)}onEquipArmorFromDrag(t){this.connection.onReducer("equip_armor_from_drag",t)}removeOnEquipArmorFromDrag(t){this.connection.offReducer("equip_armor_from_drag",t)}equipArmorFromInventory(t){const r={itemInstanceId:t};let i=new ce(1024);zl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("equip_armor_from_inventory",n,this.setCallReducerFlags.equipArmorFromInventoryFlags)}onEquipArmorFromInventory(t){this.connection.onReducer("equip_armor_from_inventory",t)}removeOnEquipArmorFromInventory(t){this.connection.offReducer("equip_armor_from_inventory",t)}onIdentityConnected(t){this.connection.onReducer("identity_connected",t)}removeOnIdentityConnected(t){this.connection.offReducer("identity_connected",t)}onIdentityDisconnected(t){this.connection.onReducer("identity_disconnected",t)}removeOnIdentityDisconnected(t){this.connection.offReducer("identity_disconnected",t)}interactWithCampfire(t){const r={campfireId:t};let i=new ce(1024);Fl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_campfire",n,this.setCallReducerFlags.interactWithCampfireFlags)}onInteractWithCampfire(t){this.connection.onReducer("interact_with_campfire",t)}removeOnInteractWithCampfire(t){this.connection.offReducer("interact_with_campfire",t)}interactWithCorn(t){const r={cornId:t};let i=new ce(1024);Ml.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_corn",n,this.setCallReducerFlags.interactWithCornFlags)}onInteractWithCorn(t){this.connection.onReducer("interact_with_corn",t)}removeOnInteractWithCorn(t){this.connection.offReducer("interact_with_corn",t)}interactWithHemp(t){const r={hempId:t};let i=new ce(1024);Ol.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_hemp",n,this.setCallReducerFlags.interactWithHempFlags)}onInteractWithHemp(t){this.connection.onReducer("interact_with_hemp",t)}removeOnInteractWithHemp(t){this.connection.offReducer("interact_with_hemp",t)}interactWithMushroom(t){const r={mushroomId:t};let i=new ce(1024);Dl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_mushroom",n,this.setCallReducerFlags.interactWithMushroomFlags)}onInteractWithMushroom(t){this.connection.onReducer("interact_with_mushroom",t)}removeOnInteractWithMushroom(t){this.connection.offReducer("interact_with_mushroom",t)}interactWithPumpkin(t){const r={pumpkinId:t};let i=new ce(1024);Ul.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_pumpkin",n,this.setCallReducerFlags.interactWithPumpkinFlags)}onInteractWithPumpkin(t){this.connection.onReducer("interact_with_pumpkin",t)}removeOnInteractWithPumpkin(t){this.connection.offReducer("interact_with_pumpkin",t)}interactWithSleepingBag(t){const r={bagId:t};let i=new ce(1024);Pl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_sleeping_bag",n,this.setCallReducerFlags.interactWithSleepingBagFlags)}onInteractWithSleepingBag(t){this.connection.onReducer("interact_with_sleeping_bag",t)}removeOnInteractWithSleepingBag(t){this.connection.offReducer("interact_with_sleeping_bag",t)}interactWithStorageBox(t){const r={boxId:t};let i=new ce(1024);Nl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("interact_with_storage_box",n,this.setCallReducerFlags.interactWithStorageBoxFlags)}onInteractWithStorageBox(t){this.connection.onReducer("interact_with_storage_box",t)}removeOnInteractWithStorageBox(t){this.connection.offReducer("interact_with_storage_box",t)}jump(){this.connection.callReducer("jump",new Uint8Array(0),this.setCallReducerFlags.jumpFlags)}onJump(t){this.connection.onReducer("jump",t)}removeOnJump(t){this.connection.offReducer("jump",t)}moveFuelItemToPlayerSlot(t,r,i,n){const s={campfireId:t,sourceSlotIndex:r,targetSlotType:i,targetSlotIndex:n};let a=new ce(1024);Bl.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("move_fuel_item_to_player_slot",l,this.setCallReducerFlags.moveFuelItemToPlayerSlotFlags)}onMoveFuelItemToPlayerSlot(t){this.connection.onReducer("move_fuel_item_to_player_slot",t)}removeOnMoveFuelItemToPlayerSlot(t){this.connection.offReducer("move_fuel_item_to_player_slot",t)}moveFuelWithinCampfire(t,r,i){const n={campfireId:t,sourceSlotIndex:r,targetSlotIndex:i};let s=new ce(1024);Hl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_fuel_within_campfire",a,this.setCallReducerFlags.moveFuelWithinCampfireFlags)}onMoveFuelWithinCampfire(t){this.connection.onReducer("move_fuel_within_campfire",t)}removeOnMoveFuelWithinCampfire(t){this.connection.offReducer("move_fuel_within_campfire",t)}moveItemFromBox(t,r,i,n){const s={boxId:t,sourceSlotIndex:r,targetSlotType:i,targetSlotIndex:n};let a=new ce(1024);Ll.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("move_item_from_box",l,this.setCallReducerFlags.moveItemFromBoxFlags)}onMoveItemFromBox(t){this.connection.onReducer("move_item_from_box",t)}removeOnMoveItemFromBox(t){this.connection.offReducer("move_item_from_box",t)}moveItemFromCorpse(t,r,i,n){const s={corpseId:t,sourceSlotIndex:r,targetSlotType:i,targetSlotIndex:n};let a=new ce(1024);Yl.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("move_item_from_corpse",l,this.setCallReducerFlags.moveItemFromCorpseFlags)}onMoveItemFromCorpse(t){this.connection.onReducer("move_item_from_corpse",t)}removeOnMoveItemFromCorpse(t){this.connection.offReducer("move_item_from_corpse",t)}moveItemFromStash(t,r,i,n){const s={stashId:t,sourceSlotIndex:r,targetSlotType:i,targetSlotIndex:n};let a=new ce(1024);$l.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("move_item_from_stash",l,this.setCallReducerFlags.moveItemFromStashFlags)}onMoveItemFromStash(t){this.connection.onReducer("move_item_from_stash",t)}removeOnMoveItemFromStash(t){this.connection.offReducer("move_item_from_stash",t)}moveItemToBox(t,r,i){const n={boxId:t,targetSlotIndex:r,itemInstanceId:i};let s=new ce(1024);Wl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_to_box",a,this.setCallReducerFlags.moveItemToBoxFlags)}onMoveItemToBox(t){this.connection.onReducer("move_item_to_box",t)}removeOnMoveItemToBox(t){this.connection.offReducer("move_item_to_box",t)}moveItemToCorpse(t,r,i){const n={corpseId:t,targetSlotIndex:r,itemInstanceId:i};let s=new ce(1024);Xl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_to_corpse",a,this.setCallReducerFlags.moveItemToCorpseFlags)}onMoveItemToCorpse(t){this.connection.onReducer("move_item_to_corpse",t)}removeOnMoveItemToCorpse(t){this.connection.offReducer("move_item_to_corpse",t)}moveItemToHotbar(t,r){const i={itemInstanceId:t,targetHotbarSlot:r};let n=new ce(1024);jl.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("move_item_to_hotbar",s,this.setCallReducerFlags.moveItemToHotbarFlags)}onMoveItemToHotbar(t){this.connection.onReducer("move_item_to_hotbar",t)}removeOnMoveItemToHotbar(t){this.connection.offReducer("move_item_to_hotbar",t)}moveItemToInventory(t,r){const i={itemInstanceId:t,targetInventorySlot:r};let n=new ce(1024);ql.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("move_item_to_inventory",s,this.setCallReducerFlags.moveItemToInventoryFlags)}onMoveItemToInventory(t){this.connection.onReducer("move_item_to_inventory",t)}removeOnMoveItemToInventory(t){this.connection.offReducer("move_item_to_inventory",t)}moveItemToStash(t,r,i){const n={stashId:t,targetSlotIndex:r,itemInstanceId:i};let s=new ce(1024);Vl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_to_stash",a,this.setCallReducerFlags.moveItemToStashFlags)}onMoveItemToStash(t){this.connection.onReducer("move_item_to_stash",t)}removeOnMoveItemToStash(t){this.connection.offReducer("move_item_to_stash",t)}moveItemWithinBox(t,r,i){const n={boxId:t,sourceSlotIndex:r,targetSlotIndex:i};let s=new ce(1024);Kl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_within_box",a,this.setCallReducerFlags.moveItemWithinBoxFlags)}onMoveItemWithinBox(t){this.connection.onReducer("move_item_within_box",t)}removeOnMoveItemWithinBox(t){this.connection.offReducer("move_item_within_box",t)}moveItemWithinCorpse(t,r,i){const n={corpseId:t,sourceSlotIndex:r,targetSlotIndex:i};let s=new ce(1024);Gl.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_within_corpse",a,this.setCallReducerFlags.moveItemWithinCorpseFlags)}onMoveItemWithinCorpse(t){this.connection.onReducer("move_item_within_corpse",t)}removeOnMoveItemWithinCorpse(t){this.connection.offReducer("move_item_within_corpse",t)}moveItemWithinStash(t,r,i){const n={stashId:t,sourceSlotIndex:r,targetSlotIndex:i};let s=new ce(1024);Ql.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("move_item_within_stash",a,this.setCallReducerFlags.moveItemWithinStashFlags)}onMoveItemWithinStash(t){this.connection.onReducer("move_item_within_stash",t)}removeOnMoveItemWithinStash(t){this.connection.offReducer("move_item_within_stash",t)}moveToFirstAvailableHotbarSlot(t){const r={itemInstanceId:t};let i=new ce(1024);Jl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("move_to_first_available_hotbar_slot",n,this.setCallReducerFlags.moveToFirstAvailableHotbarSlotFlags)}onMoveToFirstAvailableHotbarSlot(t){this.connection.onReducer("move_to_first_available_hotbar_slot",t)}removeOnMoveToFirstAvailableHotbarSlot(t){this.connection.offReducer("move_to_first_available_hotbar_slot",t)}pickupDroppedItem(t){const r={droppedItemId:t};let i=new ce(1024);Zl.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("pickup_dropped_item",n,this.setCallReducerFlags.pickupDroppedItemFlags)}onPickupDroppedItem(t){this.connection.onReducer("pickup_dropped_item",t)}removeOnPickupDroppedItem(t){this.connection.offReducer("pickup_dropped_item",t)}pickupStorageBox(t){const r={boxId:t};let i=new ce(1024);ec.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("pickup_storage_box",n,this.setCallReducerFlags.pickupStorageBoxFlags)}onPickupStorageBox(t){this.connection.onReducer("pickup_storage_box",t)}removeOnPickupStorageBox(t){this.connection.offReducer("pickup_storage_box",t)}placeCampfire(t,r,i){const n={itemInstanceId:t,worldX:r,worldY:i};let s=new ce(1024);tc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("place_campfire",a,this.setCallReducerFlags.placeCampfireFlags)}onPlaceCampfire(t){this.connection.onReducer("place_campfire",t)}removeOnPlaceCampfire(t){this.connection.offReducer("place_campfire",t)}placeSleepingBag(t,r,i){const n={itemInstanceId:t,worldX:r,worldY:i};let s=new ce(1024);rc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("place_sleeping_bag",a,this.setCallReducerFlags.placeSleepingBagFlags)}onPlaceSleepingBag(t){this.connection.onReducer("place_sleeping_bag",t)}removeOnPlaceSleepingBag(t){this.connection.offReducer("place_sleeping_bag",t)}placeStash(t,r,i){const n={itemInstanceId:t,worldX:r,worldY:i};let s=new ce(1024);nc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("place_stash",a,this.setCallReducerFlags.placeStashFlags)}onPlaceStash(t){this.connection.onReducer("place_stash",t)}removeOnPlaceStash(t){this.connection.offReducer("place_stash",t)}placeWoodenStorageBox(t,r,i){const n={itemInstanceId:t,worldX:r,worldY:i};let s=new ce(1024);ic.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("place_wooden_storage_box",a,this.setCallReducerFlags.placeWoodenStorageBoxFlags)}onPlaceWoodenStorageBox(t){this.connection.onReducer("place_wooden_storage_box",t)}removeOnPlaceWoodenStorageBox(t){this.connection.offReducer("place_wooden_storage_box",t)}processActiveConsumableEffectsTick(t){const r={args:t};let i=new ce(1024);oc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("process_active_consumable_effects_tick",n,this.setCallReducerFlags.processActiveConsumableEffectsTickFlags)}onProcessActiveConsumableEffectsTick(t){this.connection.onReducer("process_active_consumable_effects_tick",t)}removeOnProcessActiveConsumableEffectsTick(t){this.connection.offReducer("process_active_consumable_effects_tick",t)}processCampfireLogicScheduled(t){const r={scheduleArgs:t};let i=new ce(1024);lc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("process_campfire_logic_scheduled",n,this.setCallReducerFlags.processCampfireLogicScheduledFlags)}onProcessCampfireLogicScheduled(t){this.connection.onReducer("process_campfire_logic_scheduled",t)}removeOnProcessCampfireLogicScheduled(t){this.connection.offReducer("process_campfire_logic_scheduled",t)}processCorpseDespawn(t){const r={args:t};let i=new ce(1024);uc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("process_corpse_despawn",n,this.setCallReducerFlags.processCorpseDespawnFlags)}onProcessCorpseDespawn(t){this.connection.onReducer("process_corpse_despawn",t)}removeOnProcessCorpseDespawn(t){this.connection.offReducer("process_corpse_despawn",t)}processGlobalTick(t){const r={schedule:t};let i=new ce(1024);dc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("process_global_tick",n,this.setCallReducerFlags.processGlobalTickFlags)}onProcessGlobalTick(t){this.connection.onReducer("process_global_tick",t)}removeOnProcessGlobalTick(t){this.connection.offReducer("process_global_tick",t)}processPlayerStats(t){const r={schedule:t};let i=new ce(1024);gc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("process_player_stats",n,this.setCallReducerFlags.processPlayerStatsFlags)}onProcessPlayerStats(t){this.connection.onReducer("process_player_stats",t)}removeOnProcessPlayerStats(t){this.connection.offReducer("process_player_stats",t)}quickMoveFromBox(t,r){const i={boxId:t,sourceSlotIndex:r};let n=new ce(1024);hc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_from_box",s,this.setCallReducerFlags.quickMoveFromBoxFlags)}onQuickMoveFromBox(t){this.connection.onReducer("quick_move_from_box",t)}removeOnQuickMoveFromBox(t){this.connection.offReducer("quick_move_from_box",t)}quickMoveFromCorpse(t,r){const i={corpseId:t,sourceSlotIndex:r};let n=new ce(1024);yc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_from_corpse",s,this.setCallReducerFlags.quickMoveFromCorpseFlags)}onQuickMoveFromCorpse(t){this.connection.onReducer("quick_move_from_corpse",t)}removeOnQuickMoveFromCorpse(t){this.connection.offReducer("quick_move_from_corpse",t)}quickMoveFromStash(t,r){const i={stashId:t,sourceSlotIndex:r};let n=new ce(1024);mc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_from_stash",s,this.setCallReducerFlags.quickMoveFromStashFlags)}onQuickMoveFromStash(t){this.connection.onReducer("quick_move_from_stash",t)}removeOnQuickMoveFromStash(t){this.connection.offReducer("quick_move_from_stash",t)}quickMoveToBox(t,r){const i={boxId:t,itemInstanceId:r};let n=new ce(1024);Tc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_to_box",s,this.setCallReducerFlags.quickMoveToBoxFlags)}onQuickMoveToBox(t){this.connection.onReducer("quick_move_to_box",t)}removeOnQuickMoveToBox(t){this.connection.offReducer("quick_move_to_box",t)}quickMoveToCampfire(t,r){const i={campfireId:t,itemInstanceId:r};let n=new ce(1024);_c.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_to_campfire",s,this.setCallReducerFlags.quickMoveToCampfireFlags)}onQuickMoveToCampfire(t){this.connection.onReducer("quick_move_to_campfire",t)}removeOnQuickMoveToCampfire(t){this.connection.offReducer("quick_move_to_campfire",t)}quickMoveToCorpse(t,r){const i={corpseId:t,itemInstanceId:r};let n=new ce(1024);Sc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_to_corpse",s,this.setCallReducerFlags.quickMoveToCorpseFlags)}onQuickMoveToCorpse(t){this.connection.onReducer("quick_move_to_corpse",t)}removeOnQuickMoveToCorpse(t){this.connection.offReducer("quick_move_to_corpse",t)}quickMoveToStash(t,r){const i={stashId:t,itemInstanceId:r};let n=new ce(1024);wc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("quick_move_to_stash",s,this.setCallReducerFlags.quickMoveToStashFlags)}onQuickMoveToStash(t){this.connection.onReducer("quick_move_to_stash",t)}removeOnQuickMoveToStash(t){this.connection.offReducer("quick_move_to_stash",t)}registerPlayer(t){const r={username:t};let i=new ce(1024);bc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("register_player",n,this.setCallReducerFlags.registerPlayerFlags)}onRegisterPlayer(t){this.connection.onReducer("register_player",t)}removeOnRegisterPlayer(t){this.connection.offReducer("register_player",t)}respawnAtSleepingBag(t){const r={bagId:t};let i=new ce(1024);vc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("respawn_at_sleeping_bag",n,this.setCallReducerFlags.respawnAtSleepingBagFlags)}onRespawnAtSleepingBag(t){this.connection.onReducer("respawn_at_sleeping_bag",t)}removeOnRespawnAtSleepingBag(t){this.connection.offReducer("respawn_at_sleeping_bag",t)}respawnRandomly(){this.connection.callReducer("respawn_randomly",new Uint8Array(0),this.setCallReducerFlags.respawnRandomlyFlags)}onRespawnRandomly(t){this.connection.onReducer("respawn_randomly",t)}removeOnRespawnRandomly(t){this.connection.offReducer("respawn_randomly",t)}scheduleNextCampfireProcessing(t){const r={campfireId:t};let i=new ce(1024);Ic.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("schedule_next_campfire_processing",n,this.setCallReducerFlags.scheduleNextCampfireProcessingFlags)}onScheduleNextCampfireProcessing(t){this.connection.onReducer("schedule_next_campfire_processing",t)}removeOnScheduleNextCampfireProcessing(t){this.connection.offReducer("schedule_next_campfire_processing",t)}seedEnvironment(){this.connection.callReducer("seed_environment",new Uint8Array(0),this.setCallReducerFlags.seedEnvironmentFlags)}onSeedEnvironment(t){this.connection.onReducer("seed_environment",t)}removeOnSeedEnvironment(t){this.connection.offReducer("seed_environment",t)}seedItems(){this.connection.callReducer("seed_items",new Uint8Array(0),this.setCallReducerFlags.seedItemsFlags)}onSeedItems(t){this.connection.onReducer("seed_items",t)}removeOnSeedItems(t){this.connection.offReducer("seed_items",t)}seedRecipes(){this.connection.callReducer("seed_recipes",new Uint8Array(0),this.setCallReducerFlags.seedRecipesFlags)}onSeedRecipes(t){this.connection.onReducer("seed_recipes",t)}removeOnSeedRecipes(t){this.connection.offReducer("seed_recipes",t)}seedWorldState(){this.connection.callReducer("seed_world_state",new Uint8Array(0),this.setCallReducerFlags.seedWorldStateFlags)}onSeedWorldState(t){this.connection.onReducer("seed_world_state",t)}removeOnSeedWorldState(t){this.connection.offReducer("seed_world_state",t)}sendMessage(t){const r={text:t};let i=new ce(1024);Ac.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("send_message",n,this.setCallReducerFlags.sendMessageFlags)}onSendMessage(t){this.connection.onReducer("send_message",t)}removeOnSendMessage(t){this.connection.offReducer("send_message",t)}setActiveItemReducer(t){const r={itemInstanceId:t};let i=new ce(1024);Cc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("set_active_item_reducer",n,this.setCallReducerFlags.setActiveItemReducerFlags)}onSetActiveItemReducer(t){this.connection.onReducer("set_active_item_reducer",t)}removeOnSetActiveItemReducer(t){this.connection.offReducer("set_active_item_reducer",t)}setPlayerPin(t,r){const i={pinX:t,pinY:r};let n=new ce(1024);xc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("set_player_pin",s,this.setCallReducerFlags.setPlayerPinFlags)}onSetPlayerPin(t){this.connection.onReducer("set_player_pin",t)}removeOnSetPlayerPin(t){this.connection.offReducer("set_player_pin",t)}setSprinting(t){const r={sprinting:t};let i=new ce(1024);Ec.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("set_sprinting",n,this.setCallReducerFlags.setSprintingFlags)}onSetSprinting(t){this.connection.onReducer("set_sprinting",t)}removeOnSetSprinting(t){this.connection.offReducer("set_sprinting",t)}splitAndDropItemFromBoxSlotToWorld(t,r,i){const n={boxId:t,slotIndex:r,quantityToSplit:i};let s=new ce(1024);Rc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("split_and_drop_item_from_box_slot_to_world",a,this.setCallReducerFlags.splitAndDropItemFromBoxSlotToWorldFlags)}onSplitAndDropItemFromBoxSlotToWorld(t){this.connection.onReducer("split_and_drop_item_from_box_slot_to_world",t)}removeOnSplitAndDropItemFromBoxSlotToWorld(t){this.connection.offReducer("split_and_drop_item_from_box_slot_to_world",t)}splitAndDropItemFromCampfireSlotToWorld(t,r,i){const n={campfireId:t,slotIndex:r,quantityToSplit:i};let s=new ce(1024);kc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("split_and_drop_item_from_campfire_slot_to_world",a,this.setCallReducerFlags.splitAndDropItemFromCampfireSlotToWorldFlags)}onSplitAndDropItemFromCampfireSlotToWorld(t){this.connection.onReducer("split_and_drop_item_from_campfire_slot_to_world",t)}removeOnSplitAndDropItemFromCampfireSlotToWorld(t){this.connection.offReducer("split_and_drop_item_from_campfire_slot_to_world",t)}splitAndDropItemFromCorpseSlotToWorld(t,r,i){const n={corpseId:t,slotIndex:r,quantityToSplit:i};let s=new ce(1024);zc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("split_and_drop_item_from_corpse_slot_to_world",a,this.setCallReducerFlags.splitAndDropItemFromCorpseSlotToWorldFlags)}onSplitAndDropItemFromCorpseSlotToWorld(t){this.connection.onReducer("split_and_drop_item_from_corpse_slot_to_world",t)}removeOnSplitAndDropItemFromCorpseSlotToWorld(t){this.connection.offReducer("split_and_drop_item_from_corpse_slot_to_world",t)}splitAndDropItemFromStashSlotToWorld(t,r,i){const n={stashId:t,slotIndex:r,quantityToSplit:i};let s=new ce(1024);Fc.getTypeScriptAlgebraicType().serialize(s,n);let a=s.getBuffer();this.connection.callReducer("split_and_drop_item_from_stash_slot_to_world",a,this.setCallReducerFlags.splitAndDropItemFromStashSlotToWorldFlags)}onSplitAndDropItemFromStashSlotToWorld(t){this.connection.onReducer("split_and_drop_item_from_stash_slot_to_world",t)}removeOnSplitAndDropItemFromStashSlotToWorld(t){this.connection.offReducer("split_and_drop_item_from_stash_slot_to_world",t)}splitAndMoveFromCampfire(t,r,i,n,s){const a={sourceCampfireId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotType:n,targetSlotIndex:s};let l=new ce(1024);Mc.getTypeScriptAlgebraicType().serialize(l,a);let u=l.getBuffer();this.connection.callReducer("split_and_move_from_campfire",u,this.setCallReducerFlags.splitAndMoveFromCampfireFlags)}onSplitAndMoveFromCampfire(t){this.connection.onReducer("split_and_move_from_campfire",t)}removeOnSplitAndMoveFromCampfire(t){this.connection.offReducer("split_and_move_from_campfire",t)}splitStack(t,r,i,n){const s={sourceItemInstanceId:t,quantityToSplit:r,targetSlotType:i,targetSlotIndex:n};let a=new ce(1024);Oc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack",l,this.setCallReducerFlags.splitStackFlags)}onSplitStack(t){this.connection.onReducer("split_stack",t)}removeOnSplitStack(t){this.connection.offReducer("split_stack",t)}splitStackFromBox(t,r,i,n,s){const a={boxId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotType:n,targetSlotIndex:s};let l=new ce(1024);Dc.getTypeScriptAlgebraicType().serialize(l,a);let u=l.getBuffer();this.connection.callReducer("split_stack_from_box",u,this.setCallReducerFlags.splitStackFromBoxFlags)}onSplitStackFromBox(t){this.connection.onReducer("split_stack_from_box",t)}removeOnSplitStackFromBox(t){this.connection.offReducer("split_stack_from_box",t)}splitStackFromCampfire(t,r,i,n,s){const a={sourceCampfireId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotType:n,targetSlotIndex:s};let l=new ce(1024);Uc.getTypeScriptAlgebraicType().serialize(l,a);let u=l.getBuffer();this.connection.callReducer("split_stack_from_campfire",u,this.setCallReducerFlags.splitStackFromCampfireFlags)}onSplitStackFromCampfire(t){this.connection.onReducer("split_stack_from_campfire",t)}removeOnSplitStackFromCampfire(t){this.connection.offReducer("split_stack_from_campfire",t)}splitStackFromCorpse(t,r,i,n,s){const a={corpseId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotType:n,targetSlotIndex:s};let l=new ce(1024);Pc.getTypeScriptAlgebraicType().serialize(l,a);let u=l.getBuffer();this.connection.callReducer("split_stack_from_corpse",u,this.setCallReducerFlags.splitStackFromCorpseFlags)}onSplitStackFromCorpse(t){this.connection.onReducer("split_stack_from_corpse",t)}removeOnSplitStackFromCorpse(t){this.connection.offReducer("split_stack_from_corpse",t)}splitStackFromStash(t,r,i,n,s){const a={stashId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotType:n,targetSlotIndex:s};let l=new ce(1024);Nc.getTypeScriptAlgebraicType().serialize(l,a);let u=l.getBuffer();this.connection.callReducer("split_stack_from_stash",u,this.setCallReducerFlags.splitStackFromStashFlags)}onSplitStackFromStash(t){this.connection.onReducer("split_stack_from_stash",t)}removeOnSplitStackFromStash(t){this.connection.offReducer("split_stack_from_stash",t)}splitStackIntoBox(t,r,i,n){const s={boxId:t,targetSlotIndex:r,sourceItemInstanceId:i,quantityToSplit:n};let a=new ce(1024);Bc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_into_box",l,this.setCallReducerFlags.splitStackIntoBoxFlags)}onSplitStackIntoBox(t){this.connection.onReducer("split_stack_into_box",t)}removeOnSplitStackIntoBox(t){this.connection.offReducer("split_stack_into_box",t)}splitStackIntoCampfire(t,r,i,n){const s={sourceItemInstanceId:t,quantityToSplit:r,targetCampfireId:i,targetSlotIndex:n};let a=new ce(1024);Hc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_into_campfire",l,this.setCallReducerFlags.splitStackIntoCampfireFlags)}onSplitStackIntoCampfire(t){this.connection.onReducer("split_stack_into_campfire",t)}removeOnSplitStackIntoCampfire(t){this.connection.offReducer("split_stack_into_campfire",t)}splitStackIntoCorpse(t,r,i,n){const s={corpseId:t,targetSlotIndex:r,sourceItemInstanceId:i,quantityToSplit:n};let a=new ce(1024);Lc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_into_corpse",l,this.setCallReducerFlags.splitStackIntoCorpseFlags)}onSplitStackIntoCorpse(t){this.connection.onReducer("split_stack_into_corpse",t)}removeOnSplitStackIntoCorpse(t){this.connection.offReducer("split_stack_into_corpse",t)}splitStackIntoStash(t,r,i,n){const s={stashId:t,targetSlotIndex:r,sourceItemInstanceId:i,quantityToSplit:n};let a=new ce(1024);Yc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_into_stash",l,this.setCallReducerFlags.splitStackIntoStashFlags)}onSplitStackIntoStash(t){this.connection.onReducer("split_stack_into_stash",t)}removeOnSplitStackIntoStash(t){this.connection.offReducer("split_stack_into_stash",t)}splitStackWithinBox(t,r,i,n){const s={boxId:t,sourceSlotIndex:r,targetSlotIndex:i,quantityToSplit:n};let a=new ce(1024);$c.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_within_box",l,this.setCallReducerFlags.splitStackWithinBoxFlags)}onSplitStackWithinBox(t){this.connection.onReducer("split_stack_within_box",t)}removeOnSplitStackWithinBox(t){this.connection.offReducer("split_stack_within_box",t)}splitStackWithinCampfire(t,r,i,n){const s={campfireId:t,sourceSlotIndex:r,quantityToSplit:i,targetSlotIndex:n};let a=new ce(1024);Wc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_within_campfire",l,this.setCallReducerFlags.splitStackWithinCampfireFlags)}onSplitStackWithinCampfire(t){this.connection.onReducer("split_stack_within_campfire",t)}removeOnSplitStackWithinCampfire(t){this.connection.offReducer("split_stack_within_campfire",t)}splitStackWithinCorpse(t,r,i,n){const s={corpseId:t,sourceSlotIndex:r,targetSlotIndex:i,quantityToSplit:n};let a=new ce(1024);Xc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_within_corpse",l,this.setCallReducerFlags.splitStackWithinCorpseFlags)}onSplitStackWithinCorpse(t){this.connection.onReducer("split_stack_within_corpse",t)}removeOnSplitStackWithinCorpse(t){this.connection.offReducer("split_stack_within_corpse",t)}splitStackWithinStash(t,r,i,n){const s={stashId:t,sourceSlotIndex:r,targetSlotIndex:i,quantityToSplit:n};let a=new ce(1024);jc.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("split_stack_within_stash",l,this.setCallReducerFlags.splitStackWithinStashFlags)}onSplitStackWithinStash(t){this.connection.onReducer("split_stack_within_stash",t)}removeOnSplitStackWithinStash(t){this.connection.offReducer("split_stack_within_stash",t)}startCrafting(t){const r={recipeId:t};let i=new ce(1024);qc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("start_crafting",n,this.setCallReducerFlags.startCraftingFlags)}onStartCrafting(t){this.connection.onReducer("start_crafting",t)}removeOnStartCrafting(t){this.connection.offReducer("start_crafting",t)}startCraftingMultiple(t,r){const i={recipeId:t,quantityToCraft:r};let n=new ce(1024);Vc.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("start_crafting_multiple",s,this.setCallReducerFlags.startCraftingMultipleFlags)}onStartCraftingMultiple(t){this.connection.onReducer("start_crafting_multiple",t)}removeOnStartCraftingMultiple(t){this.connection.offReducer("start_crafting_multiple",t)}tickWorldState(t){const r={timestamp:t};let i=new ce(1024);Kc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("tick_world_state",n,this.setCallReducerFlags.tickWorldStateFlags)}onTickWorldState(t){this.connection.onReducer("tick_world_state",t)}removeOnTickWorldState(t){this.connection.offReducer("tick_world_state",t)}toggleCampfireBurning(t){const r={campfireId:t};let i=new ce(1024);Gc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("toggle_campfire_burning",n,this.setCallReducerFlags.toggleCampfireBurningFlags)}onToggleCampfireBurning(t){this.connection.onReducer("toggle_campfire_burning",t)}removeOnToggleCampfireBurning(t){this.connection.offReducer("toggle_campfire_burning",t)}toggleCrouch(){this.connection.callReducer("toggle_crouch",new Uint8Array(0),this.setCallReducerFlags.toggleCrouchFlags)}onToggleCrouch(t){this.connection.onReducer("toggle_crouch",t)}removeOnToggleCrouch(t){this.connection.offReducer("toggle_crouch",t)}toggleStashVisibility(t){const r={stashId:t};let i=new ce(1024);Qc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("toggle_stash_visibility",n,this.setCallReducerFlags.toggleStashVisibilityFlags)}onToggleStashVisibility(t){this.connection.onReducer("toggle_stash_visibility",t)}removeOnToggleStashVisibility(t){this.connection.offReducer("toggle_stash_visibility",t)}toggleTorch(){this.connection.callReducer("toggle_torch",new Uint8Array(0),this.setCallReducerFlags.toggleTorchFlags)}onToggleTorch(t){this.connection.onReducer("toggle_torch",t)}removeOnToggleTorch(t){this.connection.offReducer("toggle_torch",t)}updateCloudPositions(t){const r={scheduleArgs:t};let i=new ce(1024);Zc.getTypeScriptAlgebraicType().serialize(i,r);let n=i.getBuffer();this.connection.callReducer("update_cloud_positions",n,this.setCallReducerFlags.updateCloudPositionsFlags)}onUpdateCloudPositions(t){this.connection.onReducer("update_cloud_positions",t)}removeOnUpdateCloudPositions(t){this.connection.offReducer("update_cloud_positions",t)}updatePlayerPosition(t,r){const i={moveX:t,moveY:r};let n=new ce(1024);eu.getTypeScriptAlgebraicType().serialize(n,i);let s=n.getBuffer();this.connection.callReducer("update_player_position",s,this.setCallReducerFlags.updatePlayerPositionFlags)}onUpdatePlayerPosition(t){this.connection.onReducer("update_player_position",t)}removeOnUpdatePlayerPosition(t){this.connection.offReducer("update_player_position",t)}updateViewport(t,r,i,n){const s={minX:t,minY:r,maxX:i,maxY:n};let a=new ce(1024);tu.getTypeScriptAlgebraicType().serialize(a,s);let l=a.getBuffer();this.connection.callReducer("update_viewport",l,this.setCallReducerFlags.updateViewportFlags)}onUpdateViewport(t){this.connection.onReducer("update_viewport",t)}removeOnUpdateViewport(t){this.connection.offReducer("update_viewport",t)}useEquippedItem(){this.connection.callReducer("use_equipped_item",new Uint8Array(0),this.setCallReducerFlags.useEquippedItemFlags)}onUseEquippedItem(t){this.connection.onReducer("use_equipped_item",t)}removeOnUseEquippedItem(t){this.connection.offReducer("use_equipped_item",t)}}class xx{constructor(){h(this,"addFuelToCampfireFlags","FullUpdate");h(this,"autoRemoveFuelFromCampfireFlags","FullUpdate");h(this,"cancelAllCraftingFlags","FullUpdate");h(this,"cancelCraftingItemFlags","FullUpdate");h(this,"checkFinishedCraftingFlags","FullUpdate");h(this,"checkResourceRespawnsFlags","FullUpdate");h(this,"clearActiveItemReducerFlags","FullUpdate");h(this,"consumeItemFlags","FullUpdate");h(this,"despawnExpiredItemsFlags","FullUpdate");h(this,"dropItemFlags","FullUpdate");h(this,"dropItemFromBoxSlotToWorldFlags","FullUpdate");h(this,"dropItemFromCampfireSlotToWorldFlags","FullUpdate");h(this,"dropItemFromCorpseSlotToWorldFlags","FullUpdate");h(this,"dropItemFromStashSlotToWorldFlags","FullUpdate");h(this,"equipArmorFlags","FullUpdate");h(this,"equipArmorFromDragFlags","FullUpdate");h(this,"equipArmorFromInventoryFlags","FullUpdate");h(this,"interactWithCampfireFlags","FullUpdate");h(this,"interactWithCornFlags","FullUpdate");h(this,"interactWithHempFlags","FullUpdate");h(this,"interactWithMushroomFlags","FullUpdate");h(this,"interactWithPumpkinFlags","FullUpdate");h(this,"interactWithSleepingBagFlags","FullUpdate");h(this,"interactWithStorageBoxFlags","FullUpdate");h(this,"jumpFlags","FullUpdate");h(this,"moveFuelItemToPlayerSlotFlags","FullUpdate");h(this,"moveFuelWithinCampfireFlags","FullUpdate");h(this,"moveItemFromBoxFlags","FullUpdate");h(this,"moveItemFromCorpseFlags","FullUpdate");h(this,"moveItemFromStashFlags","FullUpdate");h(this,"moveItemToBoxFlags","FullUpdate");h(this,"moveItemToCorpseFlags","FullUpdate");h(this,"moveItemToHotbarFlags","FullUpdate");h(this,"moveItemToInventoryFlags","FullUpdate");h(this,"moveItemToStashFlags","FullUpdate");h(this,"moveItemWithinBoxFlags","FullUpdate");h(this,"moveItemWithinCorpseFlags","FullUpdate");h(this,"moveItemWithinStashFlags","FullUpdate");h(this,"moveToFirstAvailableHotbarSlotFlags","FullUpdate");h(this,"pickupDroppedItemFlags","FullUpdate");h(this,"pickupStorageBoxFlags","FullUpdate");h(this,"placeCampfireFlags","FullUpdate");h(this,"placeSleepingBagFlags","FullUpdate");h(this,"placeStashFlags","FullUpdate");h(this,"placeWoodenStorageBoxFlags","FullUpdate");h(this,"processActiveConsumableEffectsTickFlags","FullUpdate");h(this,"processCampfireLogicScheduledFlags","FullUpdate");h(this,"processCorpseDespawnFlags","FullUpdate");h(this,"processGlobalTickFlags","FullUpdate");h(this,"processPlayerStatsFlags","FullUpdate");h(this,"quickMoveFromBoxFlags","FullUpdate");h(this,"quickMoveFromCorpseFlags","FullUpdate");h(this,"quickMoveFromStashFlags","FullUpdate");h(this,"quickMoveToBoxFlags","FullUpdate");h(this,"quickMoveToCampfireFlags","FullUpdate");h(this,"quickMoveToCorpseFlags","FullUpdate");h(this,"quickMoveToStashFlags","FullUpdate");h(this,"registerPlayerFlags","FullUpdate");h(this,"respawnAtSleepingBagFlags","FullUpdate");h(this,"respawnRandomlyFlags","FullUpdate");h(this,"scheduleNextCampfireProcessingFlags","FullUpdate");h(this,"seedEnvironmentFlags","FullUpdate");h(this,"seedItemsFlags","FullUpdate");h(this,"seedRecipesFlags","FullUpdate");h(this,"seedWorldStateFlags","FullUpdate");h(this,"sendMessageFlags","FullUpdate");h(this,"setActiveItemReducerFlags","FullUpdate");h(this,"setPlayerPinFlags","FullUpdate");h(this,"setSprintingFlags","FullUpdate");h(this,"splitAndDropItemFromBoxSlotToWorldFlags","FullUpdate");h(this,"splitAndDropItemFromCampfireSlotToWorldFlags","FullUpdate");h(this,"splitAndDropItemFromCorpseSlotToWorldFlags","FullUpdate");h(this,"splitAndDropItemFromStashSlotToWorldFlags","FullUpdate");h(this,"splitAndMoveFromCampfireFlags","FullUpdate");h(this,"splitStackFlags","FullUpdate");h(this,"splitStackFromBoxFlags","FullUpdate");h(this,"splitStackFromCampfireFlags","FullUpdate");h(this,"splitStackFromCorpseFlags","FullUpdate");h(this,"splitStackFromStashFlags","FullUpdate");h(this,"splitStackIntoBoxFlags","FullUpdate");h(this,"splitStackIntoCampfireFlags","FullUpdate");h(this,"splitStackIntoCorpseFlags","FullUpdate");h(this,"splitStackIntoStashFlags","FullUpdate");h(this,"splitStackWithinBoxFlags","FullUpdate");h(this,"splitStackWithinCampfireFlags","FullUpdate");h(this,"splitStackWithinCorpseFlags","FullUpdate");h(this,"splitStackWithinStashFlags","FullUpdate");h(this,"startCraftingFlags","FullUpdate");h(this,"startCraftingMultipleFlags","FullUpdate");h(this,"tickWorldStateFlags","FullUpdate");h(this,"toggleCampfireBurningFlags","FullUpdate");h(this,"toggleCrouchFlags","FullUpdate");h(this,"toggleStashVisibilityFlags","FullUpdate");h(this,"toggleTorchFlags","FullUpdate");h(this,"updateCloudPositionsFlags","FullUpdate");h(this,"updatePlayerPositionFlags","FullUpdate");h(this,"updateViewportFlags","FullUpdate");h(this,"useEquippedItemFlags","FullUpdate")}addFuelToCampfire(t){this.addFuelToCampfireFlags=t}autoRemoveFuelFromCampfire(t){this.autoRemoveFuelFromCampfireFlags=t}cancelAllCrafting(t){this.cancelAllCraftingFlags=t}cancelCraftingItem(t){this.cancelCraftingItemFlags=t}checkFinishedCrafting(t){this.checkFinishedCraftingFlags=t}checkResourceRespawns(t){this.checkResourceRespawnsFlags=t}clearActiveItemReducer(t){this.clearActiveItemReducerFlags=t}consumeItem(t){this.consumeItemFlags=t}despawnExpiredItems(t){this.despawnExpiredItemsFlags=t}dropItem(t){this.dropItemFlags=t}dropItemFromBoxSlotToWorld(t){this.dropItemFromBoxSlotToWorldFlags=t}dropItemFromCampfireSlotToWorld(t){this.dropItemFromCampfireSlotToWorldFlags=t}dropItemFromCorpseSlotToWorld(t){this.dropItemFromCorpseSlotToWorldFlags=t}dropItemFromStashSlotToWorld(t){this.dropItemFromStashSlotToWorldFlags=t}equipArmor(t){this.equipArmorFlags=t}equipArmorFromDrag(t){this.equipArmorFromDragFlags=t}equipArmorFromInventory(t){this.equipArmorFromInventoryFlags=t}interactWithCampfire(t){this.interactWithCampfireFlags=t}interactWithCorn(t){this.interactWithCornFlags=t}interactWithHemp(t){this.interactWithHempFlags=t}interactWithMushroom(t){this.interactWithMushroomFlags=t}interactWithPumpkin(t){this.interactWithPumpkinFlags=t}interactWithSleepingBag(t){this.interactWithSleepingBagFlags=t}interactWithStorageBox(t){this.interactWithStorageBoxFlags=t}jump(t){this.jumpFlags=t}moveFuelItemToPlayerSlot(t){this.moveFuelItemToPlayerSlotFlags=t}moveFuelWithinCampfire(t){this.moveFuelWithinCampfireFlags=t}moveItemFromBox(t){this.moveItemFromBoxFlags=t}moveItemFromCorpse(t){this.moveItemFromCorpseFlags=t}moveItemFromStash(t){this.moveItemFromStashFlags=t}moveItemToBox(t){this.moveItemToBoxFlags=t}moveItemToCorpse(t){this.moveItemToCorpseFlags=t}moveItemToHotbar(t){this.moveItemToHotbarFlags=t}moveItemToInventory(t){this.moveItemToInventoryFlags=t}moveItemToStash(t){this.moveItemToStashFlags=t}moveItemWithinBox(t){this.moveItemWithinBoxFlags=t}moveItemWithinCorpse(t){this.moveItemWithinCorpseFlags=t}moveItemWithinStash(t){this.moveItemWithinStashFlags=t}moveToFirstAvailableHotbarSlot(t){this.moveToFirstAvailableHotbarSlotFlags=t}pickupDroppedItem(t){this.pickupDroppedItemFlags=t}pickupStorageBox(t){this.pickupStorageBoxFlags=t}placeCampfire(t){this.placeCampfireFlags=t}placeSleepingBag(t){this.placeSleepingBagFlags=t}placeStash(t){this.placeStashFlags=t}placeWoodenStorageBox(t){this.placeWoodenStorageBoxFlags=t}processActiveConsumableEffectsTick(t){this.processActiveConsumableEffectsTickFlags=t}processCampfireLogicScheduled(t){this.processCampfireLogicScheduledFlags=t}processCorpseDespawn(t){this.processCorpseDespawnFlags=t}processGlobalTick(t){this.processGlobalTickFlags=t}processPlayerStats(t){this.processPlayerStatsFlags=t}quickMoveFromBox(t){this.quickMoveFromBoxFlags=t}quickMoveFromCorpse(t){this.quickMoveFromCorpseFlags=t}quickMoveFromStash(t){this.quickMoveFromStashFlags=t}quickMoveToBox(t){this.quickMoveToBoxFlags=t}quickMoveToCampfire(t){this.quickMoveToCampfireFlags=t}quickMoveToCorpse(t){this.quickMoveToCorpseFlags=t}quickMoveToStash(t){this.quickMoveToStashFlags=t}registerPlayer(t){this.registerPlayerFlags=t}respawnAtSleepingBag(t){this.respawnAtSleepingBagFlags=t}respawnRandomly(t){this.respawnRandomlyFlags=t}scheduleNextCampfireProcessing(t){this.scheduleNextCampfireProcessingFlags=t}seedEnvironment(t){this.seedEnvironmentFlags=t}seedItems(t){this.seedItemsFlags=t}seedRecipes(t){this.seedRecipesFlags=t}seedWorldState(t){this.seedWorldStateFlags=t}sendMessage(t){this.sendMessageFlags=t}setActiveItemReducer(t){this.setActiveItemReducerFlags=t}setPlayerPin(t){this.setPlayerPinFlags=t}setSprinting(t){this.setSprintingFlags=t}splitAndDropItemFromBoxSlotToWorld(t){this.splitAndDropItemFromBoxSlotToWorldFlags=t}splitAndDropItemFromCampfireSlotToWorld(t){this.splitAndDropItemFromCampfireSlotToWorldFlags=t}splitAndDropItemFromCorpseSlotToWorld(t){this.splitAndDropItemFromCorpseSlotToWorldFlags=t}splitAndDropItemFromStashSlotToWorld(t){this.splitAndDropItemFromStashSlotToWorldFlags=t}splitAndMoveFromCampfire(t){this.splitAndMoveFromCampfireFlags=t}splitStack(t){this.splitStackFlags=t}splitStackFromBox(t){this.splitStackFromBoxFlags=t}splitStackFromCampfire(t){this.splitStackFromCampfireFlags=t}splitStackFromCorpse(t){this.splitStackFromCorpseFlags=t}splitStackFromStash(t){this.splitStackFromStashFlags=t}splitStackIntoBox(t){this.splitStackIntoBoxFlags=t}splitStackIntoCampfire(t){this.splitStackIntoCampfireFlags=t}splitStackIntoCorpse(t){this.splitStackIntoCorpseFlags=t}splitStackIntoStash(t){this.splitStackIntoStashFlags=t}splitStackWithinBox(t){this.splitStackWithinBoxFlags=t}splitStackWithinCampfire(t){this.splitStackWithinCampfireFlags=t}splitStackWithinCorpse(t){this.splitStackWithinCorpseFlags=t}splitStackWithinStash(t){this.splitStackWithinStashFlags=t}startCrafting(t){this.startCraftingFlags=t}startCraftingMultiple(t){this.startCraftingMultipleFlags=t}tickWorldState(t){this.tickWorldStateFlags=t}toggleCampfireBurning(t){this.toggleCampfireBurningFlags=t}toggleCrouch(t){this.toggleCrouchFlags=t}toggleStashVisibility(t){this.toggleStashVisibilityFlags=t}toggleTorch(t){this.toggleTorchFlags=t}updateCloudPositions(t){this.updateCloudPositionsFlags=t}updatePlayerPosition(t){this.updatePlayerPositionFlags=t}updateViewport(t){this.updateViewportFlags=t}useEquippedItem(t){this.useEquippedItemFlags=t}}class Ex{constructor(t){this.connection=t}get activeConnection(){return new $C(this.connection.clientCache.getOrCreateTable(Le.tables.active_connection))}get activeConsumableEffect(){return new WC(this.connection.clientCache.getOrCreateTable(Le.tables.active_consumable_effect))}get activeEquipment(){return new XC(this.connection.clientCache.getOrCreateTable(Le.tables.active_equipment))}get campfire(){return new jC(this.connection.clientCache.getOrCreateTable(Le.tables.campfire))}get campfireProcessingSchedule(){return new qC(this.connection.clientCache.getOrCreateTable(Le.tables.campfire_processing_schedule))}get clientViewport(){return new VC(this.connection.clientCache.getOrCreateTable(Le.tables.client_viewport))}get cloud(){return new KC(this.connection.clientCache.getOrCreateTable(Le.tables.cloud))}get cloudUpdateSchedule(){return new GC(this.connection.clientCache.getOrCreateTable(Le.tables.cloud_update_schedule))}get corn(){return new QC(this.connection.clientCache.getOrCreateTable(Le.tables.corn))}get craftingFinishSchedule(){return new JC(this.connection.clientCache.getOrCreateTable(Le.tables.crafting_finish_schedule))}get craftingQueueItem(){return new ZC(this.connection.clientCache.getOrCreateTable(Le.tables.crafting_queue_item))}get droppedItem(){return new ex(this.connection.clientCache.getOrCreateTable(Le.tables.dropped_item))}get droppedItemDespawnSchedule(){return new tx(this.connection.clientCache.getOrCreateTable(Le.tables.dropped_item_despawn_schedule))}get globalTickSchedule(){return new rx(this.connection.clientCache.getOrCreateTable(Le.tables.global_tick_schedule))}get hemp(){return new nx(this.connection.clientCache.getOrCreateTable(Le.tables.hemp))}get inventoryItem(){return new ix(this.connection.clientCache.getOrCreateTable(Le.tables.inventory_item))}get itemDefinition(){return new sx(this.connection.clientCache.getOrCreateTable(Le.tables.item_definition))}get message(){return new ox(this.connection.clientCache.getOrCreateTable(Le.tables.message))}get mushroom(){return new ax(this.connection.clientCache.getOrCreateTable(Le.tables.mushroom))}get player(){return new lx(this.connection.clientCache.getOrCreateTable(Le.tables.player))}get playerCorpse(){return new cx(this.connection.clientCache.getOrCreateTable(Le.tables.player_corpse))}get playerCorpseDespawnSchedule(){return new ux(this.connection.clientCache.getOrCreateTable(Le.tables.player_corpse_despawn_schedule))}get playerKillCommandCooldown(){return new px(this.connection.clientCache.getOrCreateTable(Le.tables.player_kill_command_cooldown))}get playerLastAttackTimestamp(){return new dx(this.connection.clientCache.getOrCreateTable(Le.tables.player_last_attack_timestamp))}get playerPin(){return new fx(this.connection.clientCache.getOrCreateTable(Le.tables.player_pin))}get playerStatSchedule(){return new gx(this.connection.clientCache.getOrCreateTable(Le.tables.player_stat_schedule))}get privateMessage(){return new hx(this.connection.clientCache.getOrCreateTable(Le.tables.private_message))}get processEffectsSchedule(){return new yx(this.connection.clientCache.getOrCreateTable(Le.tables.process_effects_schedule))}get pumpkin(){return new mx(this.connection.clientCache.getOrCreateTable(Le.tables.pumpkin))}get recipe(){return new Tx(this.connection.clientCache.getOrCreateTable(Le.tables.recipe))}get sleepingBag(){return new _x(this.connection.clientCache.getOrCreateTable(Le.tables.sleeping_bag))}get stash(){return new Sx(this.connection.clientCache.getOrCreateTable(Le.tables.stash))}get statThresholdsConfig(){return new wx(this.connection.clientCache.getOrCreateTable(Le.tables.stat_thresholds_config))}get stone(){return new bx(this.connection.clientCache.getOrCreateTable(Le.tables.stone))}get tree(){return new vx(this.connection.clientCache.getOrCreateTable(Le.tables.tree))}get woodenStorageBox(){return new Ix(this.connection.clientCache.getOrCreateTable(Le.tables.wooden_storage_box))}get worldState(){return new Ax(this.connection.clientCache.getOrCreateTable(Le.tables.world_state))}}class Rx extends A0{}class z0 extends C0{constructor(){super(...arguments);h(this,"subscriptionBuilder",()=>new Rx(this))}}h(z0,"builder",()=>new zC(Le,r=>r));const kx="wss://spacetime.vibesurvival.fun",zx="vibe-survival-game",F0=b.createContext({connection:null,dbIdentity:null,isConnected:!1,isLoading:!1,error:null,registerPlayer:()=>{console.warn("GameConnectionContext not initialized for registerPlayer")}}),Fx=({children:e})=>{const{spacetimeToken:t,invalidateCurrentToken:r}=Au(),[i,n]=b.useState(null),[s,a]=b.useState(null),[l,u]=b.useState(!1),[d,p]=b.useState(!1),[f,_]=b.useState(null),T=b.useRef(null);b.useEffect(()=>{if(console.log(`[GameConn LOG] useEffect triggered. Token exists: ${!!t}. isConnecting: ${d}. isConnected: ${l}.`),!t){console.log("[GameConn LOG] Skipping connection: No token."),T.current&&(console.log("[GameConn LOG] Token lost, disconnecting existing connection (ref)..."),T.current.disconnect());return}if(d||l){console.log("[GameConn LOG] Skipping connection: Already connecting or connected.");return}console.log("[GameConn LOG] Attempting SpacetimeDB connection..."),p(!0),_(null);let I=null;try{console.log("[GameConn LOG] Calling DbConnection.builder().build()..."),I=z0.builder().withUri(kx).withModuleName(zx).withToken(t).onConnect((m,g)=>{console.log("[GameConn LOG] onConnect: SpacetimeDB Connected. Identity:",g.toHexString()),T.current=m,n(m),a(g),u(!0),_(null),p(!1)}).onDisconnect((m,g)=>{if(console.log("[GameConn LOG] onDisconnect: SpacetimeDB Disconnected.",g?`Reason: ${g.message}`:"Graceful disconnect."),T.current=null,n(null),a(null),u(!1),p(!1),g){const y=g.message||"Unknown reason";_(`SpacetimeDB Disconnected: ${y}`),(y.includes("401")||y.toLowerCase().includes("unauthorized"))&&(console.warn("[GameConn LOG] onDisconnect: Error suggests auth issue, invalidating token."),r())}else _(null)}).onConnectError((m,g)=>{console.error("[GameConn LOG] onConnectError: SpacetimeDB Connection Error:",g),T.current=null,n(null),a(null),u(!1),p(!1),_(`SpacetimeDB Connection failed: ${g.message||g}`),console.warn("[GameConn LOG] onConnectError: Invalidating token due to connection failure."),r()}).build()}catch(m){console.error("[GameConn LOG] Failed to build SpacetimeDB connection:",m),_(`SpacetimeDB Build failed: ${m.message||m}`),p(!1)}return()=>{console.log("[GameConn LOG] useEffect cleanup running..."),T.current&&(console.log("[GameConn LOG] Cleanup: Calling disconnect on connection instance (ref)."),T.current.disconnect())}},[t,r]);const w=b.useCallback(I=>{if(i&&l&&I.trim()){_(null);try{console.log(`[GameConnectionProvider] Calling registerPlayer reducer with username: ${I}`),i.reducers.registerPlayer(I)}catch(m){console.error("[GameConnectionProvider] Failed to call registerPlayer reducer:",m),_(`Failed to call registerPlayer: ${m.message||m}.`)}}else{let m=i?l?"Empty username":"Not connected to SpacetimeDB":"No SpacetimeDB connection";console.warn(`[GameConnectionProvider] Cannot register player: ${m}.`),_(`Cannot register: ${m}.`)}},[l,i]),S={connection:i,dbIdentity:s,isConnected:l,isLoading:d,error:f,registerPlayer:w};return P.jsx(F0.Provider,{value:S,children:e})},M0=()=>{const e=b.useContext(F0);if(e===void 0)throw new Error("useGameConnection must be used within a GameConnectionProvider");return e},O0=b.createContext({updatePlayerPosition:()=>console.warn("PlayerActionsContext not initialized"),jump:()=>console.warn("PlayerActionsContext not initialized"),setSprinting:()=>console.warn("PlayerActionsContext not initialized"),updateViewport:()=>console.warn("PlayerActionsContext not initialized")}),Mx=({children:e})=>{const{connection:t}=M0(),r=b.useCallback((l,u)=>{if(!(t!=null&&t.reducers)){console.warn("[PlayerActionsContext] Connection not ready for updatePlayerPosition");return}try{t.reducers.updatePlayerPosition(l,u)}catch(d){console.error("[PlayerActionsContext] Error calling updatePlayerPosition reducer:",d)}},[t]),i=b.useCallback(l=>{if(!(t!=null&&t.reducers)){console.warn("[PlayerActionsContext] Connection not ready for setSprinting");return}try{t.reducers.setSprinting(l)}catch(u){console.error("[PlayerActionsContext] Failed to call setSprinting reducer:",u)}},[t]),n=b.useCallback(()=>{if(!(t!=null&&t.reducers)){console.warn("[PlayerActionsContext] Connection not ready for jump");return}try{t.reducers.jump()}catch(l){console.error("[PlayerActionsContext] Failed to call jump reducer:",l)}},[t]),s=b.useCallback((l,u,d,p)=>{if(!(t!=null&&t.reducers)){console.warn("[PlayerActionsContext] Connection not ready for updateViewport");return}try{t.reducers.updateViewport(l,u,d,p)}catch(f){console.error("[PlayerActionsContext] Failed to call updateViewport reducer:",f)}},[t]),a={updatePlayerPosition:r,jump:n,setSprinting:i,updateViewport:s};return P.jsx(O0.Provider,{value:a,children:e})},D0=()=>{const e=b.useContext(O0);if(e===void 0)throw new Error("usePlayerActions must be used within a PlayerActionsProvider");return e},gh=48,U0=101,P0=500,N0=500,Eu=20,Ox=Eu*gh,Dx=Math.ceil(P0/Eu),Ux=Math.ceil(N0/Eu),Px=Math.round(U0/Math.SQRT2*gh),Ae={tileSize:gh,serverWorldWidthTiles:P0,serverWorldHeightTiles:N0,chunkSizeTiles:Eu,chunkSizePx:Ox,worldWidthChunks:Dx,worldHeightChunks:Ux,worldWidth:500,worldHeight:500,spriteWidth:48,spriteHeight:48,minimapGridCellDiagonalTiles:U0,minimapGridCellSizePixels:Px},Yi=400,lg=40,xi=250,qn=500,Nx=({canvasRef:e,connection:t,localPlayerId:r,localPlayer:i,activeEquipments:n,itemDefinitions:s,placementInfo:a,placementActions:l,worldMousePos:u,closestInteractableMushroomId:d,closestInteractableCornId:p,closestInteractablePumpkinId:f,closestInteractableHempId:_,closestInteractableCampfireId:T,closestInteractableDroppedItemId:w,closestInteractableBoxId:S,isClosestInteractableBoxEmpty:I,woodenStorageBoxes:m,closestInteractableCorpseId:g,closestInteractableStashId:y,stashes:v,onSetInteractingWith:C,isMinimapOpen:k,setIsMinimapOpen:M,isChatting:A,isSearchingCraftRecipes:z,isInventoryOpen:U})=>{const{updatePlayerPosition:F,jump:j,setSprinting:Y}=D0(),B=b.useRef(new Set),$=b.useRef(!1),H=b.useRef(!1),q=b.useRef(!1),N=b.useRef(0),L=b.useRef(0),X=b.useRef(0),te=b.useRef(null),[ge,ue]=b.useState(null),[ie,J]=b.useState(!1),[W,G]=b.useState(0),Q=b.useRef(!1),K=b.useRef({dx:0,dy:0}),x=b.useRef({dx:0,dy:1}),E=b.useRef(l),re=b.useRef(t),Z=b.useRef(i),V=b.useRef(n),oe=b.useRef({mushroom:null,corn:null,pumpkin:null,hemp:null,campfire:null,droppedItem:null,box:null,boxEmpty:!1,corpse:null,stash:null}),Me=b.useRef(C),pt=b.useRef(u),dt=b.useRef(m),fe=b.useRef(v),ne=b.useRef(s),pe=(i==null?void 0:i.isDead)??!1;b.useEffect(()=>{i!=null&&i.isDead&&$.current&&($.current=!1,Y(!1)),i!=null&&i.isDead&&H.current&&(H.current=!1,te.current&&clearTimeout(te.current),te.current=null,ue(null),J(!1))},[i==null?void 0:i.isDead,Y]),b.useEffect(()=>{E.current=l},[l]),b.useEffect(()=>{re.current=t},[t]),b.useEffect(()=>{Z.current=i},[i]),b.useEffect(()=>{V.current=n},[n]),b.useEffect(()=>{oe.current={mushroom:d,corn:p,pumpkin:f,hemp:_,campfire:T,droppedItem:w,box:S,boxEmpty:I,corpse:g,stash:y}},[d,p,f,_,T,w,S,I,g,y]),b.useEffect(()=>{Me.current=C},[C]),b.useEffect(()=>{pt.current=u},[u]),b.useEffect(()=>{dt.current=m},[m]),b.useEffect(()=>{fe.current=v},[v]),b.useEffect(()=>{ne.current=s},[s]),b.useEffect(()=>{const ye=Z.current;if(ye&&ye.jumpStartTimeMs>0){const Fe=Date.now()-Number(ye.jumpStartTimeMs);if(Fe>=0&&Fe<Yi){const rt=Fe/Yi,Ee=Math.sin(rt*Math.PI)*lg;G(Ee)}else G(0)}else G(0)},[i]);const be=b.useCallback(()=>{var Nt;const ye=re.current;if(U||!(ye!=null&&ye.reducers)||!r||pe||((Nt=document.activeElement)==null?void 0:Nt.matches('[data-is-chat-input="true"]')))return;const Fe=V.current,rt=Fe==null?void 0:Fe.get(r),Ee=ne.current;if(!rt||rt.equippedItemDefId===null||rt.equippedItemInstanceId===null){const Be=Date.now();if(Be-N.current<qn||Be-Number((rt==null?void 0:rt.swingStartTimeMs)||0)<qn)return;try{ye.reducers.useEquippedItem(),N.current=Be,L.current=Be}catch(he){console.error("[AttemptSwing Unarmed] Error calling useEquippedItem reducer:",he)}return}const Qe=Ee==null?void 0:Ee.get(String(rt.equippedItemDefId));if(!Qe){console.warn("[AttemptSwing] No itemDef found for equipped item:",rt.equippedItemDefId);return}if(Qe.name==="Bandage"){console.log("[AttemptSwing] Bandage equipped, preventing use via attemptSwing (left-click).");return}const At=Date.now(),nt=Qe.attackIntervalSecs?Qe.attackIntervalSecs*1e3:qn;if(!(At-L.current<nt)&&!(At-N.current<nt)&&!(At-Number(rt.swingStartTimeMs)<nt))try{ye.reducers.useEquippedItem(),N.current=At,L.current=At}catch(Be){console.error("[AttemptSwing] Error calling useEquippedItem reducer:",Be)}},[r,pe,U]);b.useEffect(()=>{const ye=Be=>{var He,Ke;if(pe||A||z){Be.key.toLowerCase()==="escape"&&a&&U&&((He=E.current)==null||He.cancelPlacement());return}const he=Be.key.toLowerCase();if(he==="escape"&&a){(Ke=E.current)==null||Ke.cancelPlacement();return}if(he==="shift"&&!$.current&&!Be.repeat){$.current=!0,Y(!0);return}if(he==="shift"||he==="control"||he==="alt"||he==="meta")return;if(he==="c"&&!Be.repeat){const Re=re.current;if(Re!=null&&Re.reducers)try{Re.reducers.toggleCrouch()}catch(ve){console.error("[InputHandler Insert] Error calling toggleCrouch reducer:",ve)}return}if(he==="q"&&!Be.repeat){Q.current?Q.current=!1:(Q.current=!0,K.current=x.current);return}if(["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(he)&&Q.current){Be.repeat||B.current.add(he);const Re=(B.current.has("d")||B.current.has("arrowright")?1:0)-(B.current.has("a")||B.current.has("arrowleft")?1:0),ve=(B.current.has("s")||B.current.has("arrowdown")?1:0)-(B.current.has("w")||B.current.has("arrowup")?1:0);(Re!==0||ve!==0)&&(K.current={dx:Re,dy:ve},x.current={dx:Re,dy:ve});return}if(Be.repeat||B.current.add(he),he===" "&&!Be.repeat&&Z.current&&!Z.current.isDead&&j(),he==="e"&&!Be.repeat&&!H.current){const Re=re.current;if(!(Re!=null&&Re.reducers))return;const ve=oe.current,ke=fe.current,Ue=ve.stash;if(Ue!==null&&ke){const Ne=ke.get(Ue.toString());if(Ne){console.log(`[Stash E-Down] Stash ID: ${Ue}, Hidden: ${Ne.isHidden}. About to setInteractionProgress.`),H.current=!0,X.current=Date.now(),ue({targetId:Ue,targetType:"stash",startTime:Date.now()}),J(!0),console.log("[Stash E-Down] setInteractionProgress CALLED. interactionProgress in this closure:",ge),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{var at;if(H.current&&((at=re.current)!=null&&at.reducers)&&Ue!==null)try{re.current.reducers.toggleStashVisibility(Number(Ue))}catch(Pr){console.error("[InputHandler] Error calling toggleStashVisibility in timer:",Pr)}ue(null),J(!1),H.current=!1,te.current&&clearTimeout(te.current),te.current=null},xi);return}}if(ve.droppedItem!==null){try{Re.reducers.pickupDroppedItem(ve.droppedItem)}catch(Ne){console.error("Error calling pickupDroppedItem reducer:",Ne)}return}if(ve.mushroom!==null){try{Re.reducers.interactWithMushroom(ve.mushroom)}catch(Ne){console.error("Error calling interactWithMushroom reducer:",Ne)}return}if(ve.corn!==null){try{Re.reducers.interactWithCorn(ve.corn)}catch(Ne){console.error("Error calling interactWithCorn reducer:",Ne)}return}if(ve.pumpkin!==null){try{Re.reducers.interactWithPumpkin(ve.pumpkin)}catch(Ne){console.error("Error calling interactWithPumpkin reducer:",Ne)}return}if(ve.hemp!==null){try{Re.reducers.interactWithHemp(ve.hemp)}catch(Ne){console.error("Error calling interactWithHemp reducer:",Ne)}return}if(ve.box!==null){H.current=!0,X.current=Date.now(),ve.boxEmpty&&(ue({targetId:ve.box,targetType:"wooden_storage_box",startTime:Date.now()}),J(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{var Ne;if(H.current){const at=oe.current;if(at.box===ve.box&&at.boxEmpty)try{(Ne=re.current)==null||Ne.reducers.pickupStorageBox(ve.box)}catch(Pr){console.error("[InputHandler Hold Timer] Error calling pickupStorageBox reducer:",Pr)}}ue(null),J(!1),H.current=!1,te.current&&clearTimeout(te.current),te.current=null},xi));return}if(ve.campfire!==null){H.current=!0,X.current=Date.now(),ue({targetId:ve.campfire,targetType:"campfire",startTime:Date.now()}),J(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{var Ne;if(H.current&&oe.current.campfire===ve.campfire)try{(Ne=re.current)==null||Ne.reducers.toggleCampfireBurning(ve.campfire)}catch(Pr){console.error("[InputHandler Hold Timer - Campfire] Error toggling campfire:",Pr)}ue(null),J(!1),H.current=!1,te.current&&clearTimeout(te.current),te.current=null},xi);return}if(ve.corpse!==null){H.current=!0,X.current=Date.now();return}}if(he==="g"){M(Re=>!Re),Be.preventDefault();return}if(Be.key.toLowerCase()==="e"){if(H.current)return;const Re=oe.current.stash,ve=fe.current;if(Re!==null&&ve){const ke=ve.get(Re.toString());if(ke){if(!ke.isHidden){Me.current({type:"stash",id:Re});return}X.current=Date.now(),H.current=!0,ue({targetId:Re,targetType:"stash",startTime:Date.now()}),J(!0),te.current=setTimeout(()=>{var Ue;if(H.current&&((Ue=re.current)!=null&&Ue.reducers)&&Re!==null)try{re.current.reducers.toggleStashVisibility(Number(Re))}catch(Ne){console.error("[InputHandler] Error calling toggleStashVisibility:",Ne)}ue(null),J(!1),H.current=!1},xi);return}}}},xe=Be=>{if(pe||A||z)return;const he=Be.key.toLowerCase();he==="shift"&&$.current&&($.current=!1,Y(!1));const qe=["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(he);if(Q.current&&qe?B.current.delete(he):Q.current||B.current.delete(he),he==="e"&&H.current){const He=Date.now()-X.current,Ke=oe.current.stash,Re=oe.current.corpse,ve=oe.current.box,ke=oe.current.campfire;if(te.current&&(clearTimeout(te.current),te.current=null),H.current=!1,X.current=0,ge&&ue(null),J(!1),He<xi){const Ue=re.current,Ne=fe.current;if(Ke!==null&&Ne){const at=Ne.get(Ke.toString());at&&!at.isHidden&&Me.current({type:"stash",id:Ke})}else if(Re!==null)Me.current({type:"player_corpse",id:Re});else if(ve!==null&&(Ue!=null&&Ue.reducers))try{Ue.reducers.interactWithStorageBox(ve),Me.current({type:"wooden_storage_box",id:ve})}catch(at){console.error("[InputHandler KeyUp E - TAP Box] Error calling interactWithStorageBox:",at)}else if(ke!==null&&(Ue!=null&&Ue.reducers))try{Ue.reducers.interactWithCampfire(ke),Me.current({type:"campfire",id:ke})}catch(at){console.error("[InputHandler KeyUp E - TAP Campfire] Error calling interactWithCampfire:",at)}}}},Fe=Be=>{pe||A||z||Be.button!==0||a||U||(q.current=!0,be())},rt=Be=>{Be.button===0&&(q.current=!1)},Ee=Be=>{var Re;if(pe)return;if(a&&pt.current.x!==null&&pt.current.y!==null){(Re=E.current)==null||Re.attemptPlacement(pt.current.x,pt.current.y);return}if(U||ie||Be.target!==e.current)return;const he=re.current;if(!(he!=null&&he.reducers)||!r)return;const qe=V.current,He=qe==null?void 0:qe.get(r),Ke=ne.current;if(!He||He.equippedItemDefId===null||He.equippedItemInstanceId===null){const ve=Date.now();if(ve-N.current<qn||ve-Number((He==null?void 0:He.swingStartTimeMs)||0)<qn)return;try{he.reducers.useEquippedItem(),N.current=ve,L.current=ve}catch(ke){console.error("[CanvasClick Unarmed] Error calling useEquippedItem reducer:",ke)}}else{const ve=Ke==null?void 0:Ke.get(String(He.equippedItemDefId));if(!ve)return;if(ve.name==="Bandage"){console.log("[InputHandler] Bandage equipped, left-click does not trigger useEquippedItem.");return}const ke=Date.now(),Ue=ve.attackIntervalSecs?ve.attackIntervalSecs*1e3:qn;if(ke-L.current<Ue||ke-N.current<Ue||ke-Number(He.swingStartTimeMs)<Ue)return;try{he.reducers.useEquippedItem(),N.current=ke,L.current=ke}catch(Ne){console.error("[CanvasClick Armed] Error calling useEquippedItem reducer:",Ne)}}},Qe=Be=>{var qe,He,Ke,Re,ve;if(pe)return;if(Be.preventDefault(),a){(qe=E.current)==null||qe.cancelPlacement();return}if(U)return;const he=(He=V.current)==null?void 0:He.get(r||"");if(he&&he.equippedItemInstanceId){const ke=he.equippedItemDefId,Ue=(Ke=ne.current)==null?void 0:Ke.get(String(ke));if(Ue&&Ue.name==="Bandage"){const Ne=Date.now(),at=qn;if(Ne-L.current<at||Ne-N.current<at)return;(Re=re.current)!=null&&Re.reducers&&(re.current.reducers.useEquippedItem(),N.current=Ne,L.current=Ne,console.log("[InputHandler] Used Bandage via right-click."));return}else if(Ue&&Ue.name==="Torch"){if((ve=re.current)!=null&&ve.reducers)try{re.current.reducers.toggleTorch(),console.log("[InputHandler] Toggled Torch via right-click.")}catch(Ne){console.error("[InputHandler] Error calling toggleTorch reducer:",Ne)}return}}},At=Be=>{var he;a&&((he=E.current)==null||he.cancelPlacement())},nt=()=>{$.current&&($.current=!1,Y(!1)),q.current=!1,H.current=!1,te.current&&clearTimeout(te.current),te.current=null,ue(null)};window.addEventListener("keydown",ye),window.addEventListener("keyup",xe),window.addEventListener("mousedown",Fe),window.addEventListener("mouseup",rt),window.addEventListener("wheel",At,{passive:!0}),window.addEventListener("contextmenu",Qe),window.addEventListener("blur",nt);const Nt=e==null?void 0:e.current;return Nt&&Nt.addEventListener("click",Ee),()=>{window.removeEventListener("keydown",ye),window.removeEventListener("keyup",xe),window.removeEventListener("mousedown",Fe),window.removeEventListener("mouseup",rt),window.removeEventListener("wheel",At),window.removeEventListener("contextmenu",Qe),window.removeEventListener("blur",nt),Nt&&Nt.removeEventListener("click",Ee),te.current&&(clearTimeout(te.current),te.current=null)}},[e,i==null?void 0:i.isDead,a,Y,j,be,M,A,z,U]);const Te=b.useCallback(()=>{re.current;const ye=Z.current;if(!ye||ye.isDead||A||z){$.current&&(ye!=null&&ye.isDead)?$.current=!1:$.current&&(A||z)&&($.current=!1,Y(!1)),W!==0&&G(0);return}if(ye&&ye.jumpStartTimeMs>0){const Fe=Date.now()-Number(ye.jumpStartTimeMs);if(Fe>=0&&Fe<Yi){const rt=Fe/Yi,Ee=Math.sin(rt*Math.PI)*lg;G(Ee)}else G(0)}else W!==0&&G(0);if(Q.current){const{dx:xe,dy:Fe}=K.current;(xe!==0||Fe!==0)&&F(xe,Fe)}else{const xe=(B.current.has("d")||B.current.has("arrowright")?1:0)-(B.current.has("a")||B.current.has("arrowleft")?1:0),Fe=(B.current.has("s")||B.current.has("arrowdown")?1:0)-(B.current.has("w")||B.current.has("arrowup")?1:0);(xe!==0||Fe!==0)&&(F(xe,Fe),x.current={dx:xe,dy:Fe})}q.current&&!a&&!A&&!z&&!U&&be()},[pe,F,be,a,r,i,n,u,t,d,p,f,_,T,w,S,I,C,W,A,z,Y,U]);return{interactionProgress:ge,isActivelyHolding:ie,isSprinting:$.current,currentJumpOffsetY:W,processInputsAndActions:Te}};function Bx(){const[e,t]=b.useState(new Set),r=b.useRef(new Map);b.useEffect(()=>()=>{r.current.forEach(n=>{clearTimeout(n)}),r.current.clear()},[]);const i=b.useCallback((n,s)=>{if(s){const a=r.current.get(n);a&&(clearTimeout(a),r.current.delete(n)),t(l=>{const u=new Set(l);return u.add(n),u})}else if(!r.current.has(n)){const a=setTimeout(()=>{t(l=>{const u=new Set(l);return u.delete(n),u}),r.current.delete(n)},1e3);r.current.set(n,a)}},[]);return{hoveredPlayerIds:e,handlePlayerHover:i}}const Hx=Ae.worldWidth*Ae.tileSize,Lx=Ae.worldHeight*Ae.tileSize,Yx=Lx/Hx,B0=400,$x=B0*Yx,H0=B0,L0=Math.round($x),Wx="rgba(40, 40, 60, 0.2)",Xx="rgba(60, 60, 80, 0.2)",jx="#a0a0c0",ga=3,qx="#FFFF00",Vx="#008000",Kx="#808080",em="#FFA500",Gx="#A0522D",gr=2,_n=4,tm=24,rm=24,nm=2,im="#FFFFFF",Qx="rgba(0, 0, 0, 0.3)",Jx="rgba(52, 88, 52, 0.2)",Zx="rgba(20, 35, 20, 0.2)",sm="#FFD700",e1="#000000",t1=8,r1=1,n1="rgba(200, 200, 200, 0.3)",i1="rgba(255, 255, 255, 0.5)",s1="10px Arial",om=24,o1=2,a1="#FFFFFF",l1="rgba(139, 0, 0, 0.5)";function c1(e){return e==="Dusk"||e==="TwilightEvening"||e==="Night"||e==="Midnight"}function Y0({ctx:e,players:t,trees:r,stones:i,campfires:n,sleepingBags:s,localPlayer:a,localPlayerId:l,playerPin:u,canvasWidth:d,canvasHeight:p,isMouseOverMinimap:f,zoomLevel:_,viewCenterOffset:T,isDeathScreen:w=!1,ownedSleepingBagIds:S=new Set,onSelectSleepingBag:I,sleepingBagImage:m=null,localPlayerCorpse:g=null,deathMarkerImage:y=null,worldState:v}){var dt;const C=H0,k=L0,M=(d-C)/2,A=(p-k)/2,z=Ae.worldWidth*Ae.tileSize,U=Ae.worldHeight*Ae.tileSize,F=C/z,j=k/U,B=Math.min(F,j)*_;let $,H;_<=1||!a?($=z/2,H=U/2):($=a.positionX+T.x,H=a.positionY+T.y);const q=C/B,N=k/B,L=$-q/2,X=H-N/2,te=M-L*B,ge=A-X*B,ue=(fe,ne)=>{const pe=te+fe*B,be=ge+ne*B;return pe>=M&&pe<=M+C&&be>=A&&be<=A+k?{x:pe,y:be}:null},ie=(dt=v==null?void 0:v.timeOfDay)==null?void 0:dt.tag,J=ie?c1(ie):!1;e.save();const W=2;e.fillStyle="rgba(0,0,0,0.5)",e.fillRect(M+W,A+W,C,k),e.fillStyle=f?Xx:Wx,e.fillRect(M,A,C,k),e.strokeStyle=jx,e.lineWidth=1,e.strokeRect(M,A,C,k),e.beginPath(),e.rect(M,A,C,k),e.clip(),e.fillStyle=Zx,e.fillRect(M,A,C,k);const G=te+0*B,Q=ge+0*B,K=z*B,x=U*B;e.fillStyle=Jx,e.fillRect(G,Q,K,x);const E=Ae.minimapGridCellSizePixels>0?Ae.minimapGridCellSizePixels:1,re=Math.floor(L/E)*E,Z=Math.ceil((L+q)/E)*E,V=Math.floor(X/E)*E,oe=Math.ceil((X+N)/E)*E;e.strokeStyle=n1,e.lineWidth=.5,e.fillStyle=i1,e.font=s1,e.textAlign="left",e.textBaseline="top";for(let fe=re;fe<=Z;fe+=E){const ne=ue(fe,X);if(ne){const pe=ne.x;e.beginPath(),e.moveTo(pe,A),e.lineTo(pe,A+k),e.stroke()}}for(let fe=V;fe<=oe;fe+=E){const ne=ue(L,fe);if(ne){const pe=ne.y;e.beginPath(),e.moveTo(M,pe),e.lineTo(M+C,pe),e.stroke()}}const Me=Math.max(1,Math.round(z/E)),pt=Math.max(1,Math.round(U/E));for(let fe=0;fe<pt;fe++)for(let ne=0;ne<Me;ne++){const pe=ne*E,be=fe*E,Te=ue(pe,be);if(Te&&Te.x+2<M+C&&Te.y+12<A+k){const ye=String.fromCharCode(65+ne),xe=(fe+1).toString(),Fe=ye+xe;e.fillText(Fe,Te.x+2,Te.y+2)}}if(g&&y&&y.complete&&y.naturalHeight!==0){console.log("[Minimap] Corpse and loaded image found, attempting to draw death marker.");const fe=ue(g.posX,g.posY);if(fe){const ne=om/2,pe=om,be=fe.x,Te=fe.y;e.save(),e.fillStyle=l1,e.beginPath(),e.arc(be,Te,ne,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(be,Te,ne,0,Math.PI*2),e.clip(),e.drawImage(y,be-ne,Te-ne,pe,pe),e.restore(),e.strokeStyle=a1,e.lineWidth=o1,e.beginPath(),e.arc(be,Te,ne,0,Math.PI*2),e.stroke()}}if(e.fillStyle=Vx,r.forEach(fe=>{const ne=ue(fe.posX,fe.posY);ne&&e.fillRect(ne.x-gr/2,ne.y-gr/2,gr,gr)}),e.fillStyle=Kx,i.forEach(fe=>{const ne=ue(fe.posX,fe.posY);ne&&e.fillRect(ne.x-gr/2,ne.y-gr/2,gr,gr)}),J&&(e.fillStyle=em,n.forEach(fe=>{if(fe.isBurning){const ne=ue(fe.posX,fe.posY);ne&&e.fillRect(ne.x-_n/2,ne.y-_n/2,_n,_n)}})),J&&t.forEach((fe,ne)=>{if(!(l&&ne===l)&&fe.isTorchLit){const pe=ue(fe.positionX,fe.positionY);pe&&(e.fillStyle=em,e.fillRect(pe.x-_n/2,pe.y-_n/2,_n,_n))}}),s.forEach(fe=>{const ne=l&&fe.placedBy.toHexString()===l;if(w&&!ne||!w&&!ne)return;const pe=ue(fe.posX,fe.posY);if(pe){const be=S.has(fe.id);if(w&&be){const Te=tm/2,ye=tm,xe=pe.x,Fe=pe.y;e.save(),e.beginPath(),e.arc(xe,Fe,Te,0,Math.PI*2),e.clip(),m&&m.complete&&m.naturalHeight!==0&&e.drawImage(m,xe-Te,Fe-Te,ye,ye),e.restore(),e.strokeStyle=im,e.lineWidth=nm,e.beginPath(),e.arc(xe,Fe,Te,0,Math.PI*2),e.stroke()}else if(!w&&ne)if(m&&m.complete&&m.naturalHeight!==0){const Te=rm/2,ye=rm,xe=pe.x,Fe=pe.y;e.save(),e.fillStyle=Qx,e.beginPath(),e.arc(xe,Fe,Te,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(xe,Fe,Te,0,Math.PI*2),e.clip(),e.drawImage(m,xe-Te,Fe-Te,ye,ye),e.restore(),e.strokeStyle=im,e.lineWidth=nm,e.beginPath(),e.arc(xe,Fe,Te,0,Math.PI*2),e.stroke()}else e.fillStyle=Gx,e.fillRect(pe.x-gr/2,pe.y-gr/2,gr,gr)}}),a){const fe=ue(a.positionX,a.positionY);fe&&(e.fillStyle=qx,e.fillRect(fe.x-ga/2,fe.y-ga/2,ga,ga))}if(u){const fe=ue(u.pinX,u.pinY);if(fe){const ne=fe.x,pe=fe.y,be=t1;e.save(),e.beginPath(),e.arc(ne,pe,be/2,0,Math.PI*2),e.fillStyle=sm,e.fill(),e.lineWidth=r1,e.strokeStyle=e1,e.stroke(),e.beginPath(),e.moveTo(ne,pe-be/2),e.lineTo(ne-be/3,pe-be),e.lineTo(ne+be/3,pe-be),e.closePath(),e.fillStyle=sm,e.fill(),e.stroke(),e.restore()}}e.restore()}const hr={width:H0,height:L0},vp=(e,t,r,i,n,s,a,l,u)=>{const d=a+e*u,p=l+t*u;return d>=r&&d<=r+n&&p>=i&&p<=i+s?{x:d,y:p}:null},Ip=(e,t,r,i,n,s,a)=>{const l=e/r,u=t/i,p=Math.min(l,u)*n;let f,_;f=r/2,_=i/2;const T=e/p,w=t/p,S=f-T/2,I=_-w/2,m=-S*p,g=-I*p;return{currentScale:p,drawOffsetX:m,drawOffsetY:g,viewMinXWorld:S,viewMinYWorld:I}},u1=10,Br=1;function p1({canvasRef:e,isMinimapOpen:t,connection:r,localPlayer:i,playerPins:n,localPlayerId:s,canvasSize:a}){const[l,u]=b.useState(Br),[d,p]=b.useState(!1),[f,_]=b.useState(!1),[T,w]=b.useState(null),[S,I]=b.useState({x:0,y:0}),m=Ae.worldWidth*Ae.tileSize,g=Ae.worldHeight*Ae.tileSize,y=b.useMemo(()=>{const F=hr.width,j=hr.height,Y=F/m,B=j/g;return Math.min(Y,B)},[m,g]),v=b.useMemo(()=>s&&n.get(s)||null,[n,s]),C=b.useCallback(F=>{if(!e.current||!t)return!1;const j=e.current.getBoundingClientRect(),Y=F.clientX-j.left,B=F.clientY-j.top,$=hr.width,H=hr.height,q=(a.width-$)/2,N=(a.height-H)/2;return Y>=q&&Y<=q+$&&B>=N&&B<=N+H},[e,a.width,a.height,t]),k=b.useCallback(F=>{const j=C(F);if(p(j),f&&T&&j){const Y=y*l;if(Y<=0)return;const B=F.screenX-T.screenX,$=F.screenY-T.screenY,H=B/Y,q=$/Y,N=S.x-H,L=S.y-q;let X=m/2,te=g/2;i&&l>Br&&(X=i.positionX,te=i.positionY);const ge=X+N,ue=te+L,ie=hr.width/Y,J=hr.height/Y,W=ge-ie/2,G=ge+ie/2,Q=ue-J/2,K=ue+J/2;let x=N,E=L;const re=50;if(G<re){const Z=re-G;x+=Z}else if(W>m-re){const Z=m-re-W;x+=Z}if(K<re){const Z=re-K;E+=Z}else if(Q>g-re){const Z=g-re-Q;E+=Z}I(Z=>({x,y:E})),w({screenX:F.screenX,screenY:F.screenY})}},[C,f,T,y,l,S.x,S.y,i,m,g]),M=b.useCallback(F=>{if(!t||!C(F)||!e.current)return;F.preventDefault();const j=F.deltaY*-.001,Y=l,B=Y+j,$=Math.max(Br,Math.min(u1,B));if(Math.abs($-Y)<1e-4)return;const H=e.current.getBoundingClientRect(),q=F.clientX-H.left,N=F.clientY-H.top,L=hr.width,X=hr.height,te=(a.width-L)/2,ge=(a.height-X)/2;let ue,ie;Y<=Br||!i?(ue=m/2,ie=g/2):(ue=i.positionX+S.x,ie=i.positionY+S.y);const J=y*Y,W=L/J,G=X/J,Q=ue-W/2,K=ie-G/2,x=q-te,E=N-ge,re=Q+x/J,Z=K+E/J;u($);const V=y*$;let oe,Me;$<=Br||!i?(oe=m/2,Me=g/2):(oe=i.positionX,Me=i.positionY);const pt=re-x/V+L/V/2,dt=Z-E/V+X/V/2,fe=pt-oe,ne=dt-Me;I({x:fe,y:ne})},[t,C,l,y,e,a,i,S.x,S.y,m,g]),A=b.useCallback(F=>{if(!t||!C(F)||!e.current)return;if(F.preventDefault(),!(r!=null&&r.reducers)){console.error("Cannot set pin: Connection not available.");return}const j=e.current.getBoundingClientRect(),Y=F.clientX-j.left,B=F.clientY-j.top,$=hr.width,H=hr.height,q=(a.width-$)/2,N=(a.height-H)/2;let L,X;const te=Y-q,ge=B-N,ue=y*l;if(l<=Br){const ie=m*y,J=g*y,W=($-ie)/2,G=(H-J)/2,Q=te-W,K=ge-G;if(Q>=0&&Q<=ie&&K>=0&&K<=J)L=Q/y,X=K/y;else{console.log("Pin click outside world bounds (in padding).");return}}else{let ie=m/2,J=g/2;i&&(ie=i.positionX,J=i.positionY);const W=ie+S.x,G=J+S.y,Q=$/ue,K=H/ue,x=W-Q/2,E=G-K/2;L=x+te/ue,X=E+ge/ue}if(L!==void 0&&X!==void 0){const ie=Math.max(0,Math.min(m,Math.round(L))),J=Math.max(0,Math.min(g,Math.round(X)));console.log(`Setting pin at world coordinates: (${ie}, ${J})`);try{r.reducers.setPlayerPin(ie,J)}catch(W){console.error("Error calling setPlayerPin reducer:",W)}}},[t,C,r,e,a,l,i,y,S.x,S.y,m,g]),z=b.useCallback(F=>{if(F.button===1&&t&&C(F)){F.preventDefault(),u(Br),I({x:0,y:0}),_(!1),w(null);return}F.button===0&&t&&l>Br&&C(F)&&(_(!0),w({screenX:F.screenX,screenY:F.screenY}))},[t,l,C,u,I]),U=b.useCallback(F=>{F.button===0&&f&&(_(!1),w(null))},[f]);return b.useEffect(()=>{const F=e.current;if(F)return F.addEventListener("mousemove",k),F.addEventListener("wheel",M,{passive:!1}),F.addEventListener("contextmenu",A),F.addEventListener("mousedown",z),window.addEventListener("mouseup",U),()=>{F.removeEventListener("mousemove",k),F.removeEventListener("wheel",M),F.removeEventListener("contextmenu",A),F.removeEventListener("mousedown",z),window.removeEventListener("mouseup",U)}},[e,k,M,A,z,U]),b.useEffect(()=>{const F=e.current;if(!F)return;const j=F.style.cursor||"crosshair";if(!t){F.style.cursor=j;return}return f?F.style.cursor="grabbing":d&&l>Br?F.style.cursor="grab":F.style.cursor=j,()=>{F&&(F.style.cursor=j)}},[e,t,d,f,l]),b.useEffect(()=>{(!t||l<=Br)&&(I({x:0,y:0}),_(!1),w(null))},[t,l]),{minimapZoom:l,isMouseOverMinimap:d,localPlayerPin:v,viewCenterOffset:S}}function am(e){return e&&typeof e.identity<"u"&&typeof e.positionX=="number"}function d1(e){return e&&typeof e.treeType<"u"&&typeof e.posX=="number"}function f1(e){return e&&typeof e.health=="number"&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.identity>"u"&&typeof e.treeType>"u"&&typeof e.placedBy>"u"&&typeof e.itemDefId>"u"}function lm(e){return e&&typeof e.placedBy<"u"&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.isBurning=="boolean"}function g1(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.id<"u"&&typeof e.identity>"u"&&typeof e.treeType>"u"&&typeof e.health>"u"&&typeof e.placedBy>"u"&&typeof e.itemDefId>"u"}function cm(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.id<"u"&&typeof e.identity>"u"&&typeof e.treeType>"u"&&typeof e.health>"u"&&typeof e.placedBy>"u"&&typeof e.itemDefId>"u"}function h1(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.id<"u"&&typeof e.chunk_index=="number"&&(e.respawn_at===null||e.respawn_at instanceof Date||typeof e.respawn_at>"u")&&typeof e.growth_stage>"u"}function um(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.id<"u"&&typeof e.identity>"u"&&typeof e.treeType>"u"&&typeof e.health>"u"&&typeof e.placedBy>"u"&&typeof e.itemDefId>"u"&&typeof e.isBurning>"u"&&!0}function y1(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.placedBy<"u"&&typeof e.isBurning>"u"}function pm(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.itemDefId<"u"&&typeof e.identity>"u"&&typeof e.treeType>"u"&&typeof e.health>"u"&&typeof e.placedBy>"u"}function m1(e){return e&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.placedBy<"u"&&typeof e.isBurning>"u"&&typeof e.slot_instance_id_0>"u"}function T1(e){return e&&typeof e.ownerIdentity=="object"&&typeof e.posX=="number"&&typeof e.posY=="number"&&typeof e.isHidden=="boolean"}function _1(e,t,r,i,n,s,a,l,u,d,p,f,_,T,w,S,I){const m=b.useCallback(()=>{const x=Ae.tileSize*2,E=-T-x,re=-T+S+x,Z=-w-x,V=-w+I+x;return{viewMinX:E,viewMaxX:re,viewMinY:Z,viewMaxY:V}},[T,w,S,I]),g=b.useCallback((x,E)=>{let re,Z,V=Ae.tileSize,oe=Ae.tileSize;if(am(x))re=x.positionX,Z=x.positionY,V=64,oe=64;else if(d1(x))re=x.posX,Z=x.posY,V=96,oe=128;else if(f1(x))re=x.posX,Z=x.posY,V=64,oe=64;else if(lm(x))re=x.posX,Z=x.posY,V=64,oe=64;else if(g1(x))re=x.posX,Z=x.posY,V=32,oe=32;else if(pm(x))re=x.posX,Z=x.posY,V=32,oe=32;else if(y1(x))re=x.posX,Z=x.posY,V=64,oe=64;else if(m1(x))re=x.posX,Z=x.posY,V=64,oe=32;else if(cm(x))re=x.posX,Z=x.posY,V=32,oe=48;else if(h1(x))re=x.posX,Z=x.posY,V=48,oe=48;else if(um(x))re=x.posX,Z=x.posY,V=32,oe=48;else if(T1(x))re=x.posX,Z=x.posY,V=32,oe=32;else return!1;return re===void 0||Z===void 0?!1:re+V/2>E.viewMinX&&re-V/2<E.viewMaxX&&Z+oe/2>E.viewMinY&&Z-oe/2<E.viewMaxY},[]),y=b.useMemo(()=>m(),[m]),v=b.useMemo(()=>n?Array.from(n.values()).filter(x=>(x.respawnAt===null||x.respawnAt===void 0)&&g(x,y)):[],[n,g,y]),C=b.useMemo(()=>s?Array.from(s.values()).filter(x=>(x.respawnAt===null||x.respawnAt===void 0)&&g(x,y)):[],[s,g,y]),k=b.useMemo(()=>a?Array.from(a.values()).filter(x=>(x.respawnAt===null||x.respawnAt===void 0)&&g(x,y)):[],[a,g,y]),M=b.useMemo(()=>u?Array.from(u.values()).filter(x=>g(x,y)):[],[u,g,y]),A=b.useMemo(()=>i?Array.from(i.values()).filter(x=>g(x,y)):[],[i,g,y]),z=b.useMemo(()=>e?Array.from(e.values()).filter(x=>g(x,y)):[],[e,g,y]),U=b.useMemo(()=>t?Array.from(t.values()).filter(x=>x.health>0&&g(x,y)):[],[t,g,y]),F=b.useMemo(()=>r?Array.from(r.values()).filter(x=>x.health>0&&g(x,y)):[],[r,g,y]),j=b.useMemo(()=>d?Array.from(d.values()).filter(x=>g(x,y)):[],[d,g,y]),Y=b.useMemo(()=>p?Array.from(p.values()).filter(x=>g(x,y)):[],[p,g,y]),B=b.useMemo(()=>f?Array.from(f.values()).filter(x=>g(x,y)):[],[f,g,y]),$=b.useMemo(()=>_?Array.from(_.values()).filter(x=>!x.isHidden&&g(x,y)):[],[_,g,y]),H=b.useMemo(()=>l?Array.from(l.values()).filter(x=>g(x,y)&&!x.respawnAt):[],[l,g,y]),q=b.useMemo(()=>new Map(v.map(x=>[x.id.toString(),x])),[v]),N=b.useMemo(()=>new Map(A.map(x=>[x.id.toString(),x])),[A]),L=b.useMemo(()=>new Map(M.map(x=>[x.id.toString(),x])),[M]),X=b.useMemo(()=>new Map(j.map(x=>[x.id.toString(),x])),[j]),te=b.useMemo(()=>new Map(C.map(x=>[x.id.toString(),x])),[C]),ge=b.useMemo(()=>new Map(k.map(x=>[x.id.toString(),x])),[k]),ue=b.useMemo(()=>new Map(H.map(x=>[x.id.toString(),x])),[H]),ie=b.useMemo(()=>{const x=new Map;return B.forEach(E=>x.set(E.id.toString(),E)),x},[B]),J=b.useMemo(()=>new Map($.map(x=>[x.id.toString(),x])),[$]),W=b.useMemo(()=>new Map(Y.map(x=>[x.id.toString(),x])),[Y]),G=b.useMemo(()=>{const x=new Map;return U.forEach(E=>x.set(E.id.toString(),E)),x},[U]),Q=b.useMemo(()=>[...Y],[Y]),K=b.useMemo(()=>{const E=[...z.map(Z=>({type:"player",entity:Z})),...U.map(Z=>({type:"tree",entity:Z})),...F.filter(Z=>Z.health>0).map(Z=>({type:"stone",entity:Z})),...j.map(Z=>({type:"wooden_storage_box",entity:Z})),...$.map(Z=>({type:"stash",entity:Z})),...C.map(Z=>({type:"corn",entity:Z})),...H.map(Z=>({type:"hemp",entity:Z})),...A.map(Z=>({type:"campfire",entity:Z})),...M.map(Z=>({type:"dropped_item",entity:Z})),...B.map(Z=>({type:"player_corpse",entity:Z})),...v.map(Z=>({type:"mushroom",entity:Z})),...k.map(Z=>({type:"pumpkin",entity:Z}))].filter(Z=>Z&&Z.entity),re=Z=>{const V=Z.entity;let oe=0;return am(V)?(oe=V.positionY,oe):cm(V)||um(V)||pm(V)?(oe=V.posY-48,oe):lm(V)?(oe=V.posY-78,oe):(oe=V.posY,oe)};return E.sort((Z,V)=>{const oe=re(Z),Me=re(V);return oe-Me}),E},[z,U,F,j,B,$,C,H,A,M,v,k]);return{visibleMushrooms:v,visibleCorns:C,visiblePumpkins:k,visibleHemps:H,visibleDroppedItems:M,visibleCampfires:A,visiblePlayers:z,visibleTrees:U,visibleStones:F,visibleWoodenStorageBoxes:j,visibleSleepingBags:Y,visiblePlayerCorpses:B,visibleStashes:$,visibleMushroomsMap:q,visibleCampfiresMap:N,visibleDroppedItemsMap:L,visibleBoxesMap:X,visibleCornsMap:te,visiblePumpkinsMap:ge,visibleHempsMap:ue,visiblePlayerCorpsesMap:ie,visibleStashesMap:J,visibleSleepingBagsMap:W,visibleTreesMap:G,groundItems:Q,ySortedEntities:K}}const S1=e=>{if(!e)return[];const{chunkSizePx:t,worldWidthChunks:r,worldHeightChunks:i}=Ae,n=Math.max(0,Math.floor(e.minX/t)),s=Math.min(r-1,Math.floor(e.maxX/t)),a=Math.max(0,Math.floor(e.minY/t)),l=Math.min(i-1,Math.floor(e.maxY/t)),u=[];for(let d=a;d<=l;d++)for(let p=n;p<=s;p++){const f=d*r+p;u.push(f)}return u},$0=({connection:e,cancelPlacement:t,viewport:r})=>{const[i,n]=b.useState(()=>new Map),[s,a]=b.useState(()=>new Map),[l,u]=b.useState(()=>new Map),[d,p]=b.useState(()=>new Map),[f,_]=b.useState(()=>new Map),[T,w]=b.useState(()=>new Map),[S,I]=b.useState(()=>new Map),[m,g]=b.useState(()=>new Map),[y,v]=b.useState(()=>new Map),[C,k]=b.useState(()=>new Map),[M,A]=b.useState(null),[z,U]=b.useState(()=>new Map),[F,j]=b.useState(()=>new Map),[Y,B]=b.useState(()=>new Map),[$,H]=b.useState(()=>new Map),[q,N]=b.useState(()=>new Map),[L,X]=b.useState(()=>new Map),[te,ge]=b.useState(!1),[ue,ie]=b.useState(()=>new Map),[J,W]=b.useState(()=>new Map),[G,Q]=b.useState(()=>new Map),[K,x]=b.useState(()=>new Map),[E,re]=b.useState(()=>new Map),[Z,V]=b.useState(()=>new Map),[oe,Me]=b.useState(()=>new Map),pt=b.useRef(t);b.useEffect(()=>{pt.current=t},[t]);const dt=b.useRef(r);b.useEffect(()=>{dt.current=r},[r]);const fe=b.useRef([]),ne=b.useRef([]),pe=b.useRef(new Map),be=b.useRef(!1),Te=ye=>{if(ye)try{ye.unsubscribe()}catch(xe){console.warn("[useSpacetimeTables] Error unsubscribing:",xe)}};return b.useEffect(()=>{if(e&&!be.current){console.log("[useSpacetimeTables] ENTERING main useEffect for callbacks and initial subscriptions.");const ye=(se,D)=>{var ee;n(Bt=>new Map(Bt).set(D.identity.toHexString(),D));const O=(ee=e==null?void 0:e.identity)==null?void 0:ee.toHexString();O&&D.identity.toHexString()===O&&ge(!0)},xe=(se,D,O)=>{const ee=O.identity.toHexString();D.isDead&&!O.isDead&&(console.log(`[useSpacetimeTables] handlePlayerUpdate: Respawn detected for ${ee}. newPlayer.lastHitTime (raw object):`,O.lastHitTime),console.log(`  newPlayer.lastHitTime converted to micros: ${O.lastHitTime?O.lastHitTime.__timestamp_micros_since_unix_epoch__:"null"}`));const Bt=.01,cw=Math.abs(D.positionX-O.positionX)>Bt||Math.abs(D.positionY-O.positionY)>Bt,Yo=D.lastHitTime?D.lastHitTime.__timestamp_micros_since_unix_epoch__:null,$o=O.lastHitTime?O.lastHitTime.__timestamp_micros_since_unix_epoch__:null,Wo=Yo!==$o,uw=Math.round(D.health)!==Math.round(O.health)||Math.round(D.stamina)!==Math.round(O.stamina)||Math.round(D.hunger)!==Math.round(O.hunger)||Math.round(D.thirst)!==Math.round(O.thirst)||Math.round(D.warmth)!==Math.round(O.warmth),pw=D.isSprinting!==O.isSprinting||D.direction!==O.direction||D.jumpStartTimeMs!==O.jumpStartTimeMs||D.isDead!==O.isDead||D.isTorchLit!==O.isTorchLit,dw=D.isOnline!==O.isOnline,fw=D.username!==O.username,gw=D.color!==O.color;(cw||uw||pw||dw||fw||gw||Wo)&&(Wo&&console.log(`[useSpacetimeTables] handlePlayerUpdate: lastHitTime CHANGED for ${ee}. Old micros: ${Yo}, New micros: ${$o}`),D.isDead&&!O.isDead&&Wo?console.log(`[useSpacetimeTables] handlePlayerUpdate: Respawn for ${ee} also has lastHitTimeChanged. Old: ${Yo}, New: ${$o}. APPLYING UPDATE.`):D.isDead&&!O.isDead&&!Wo&&console.warn(`[useSpacetimeTables] handlePlayerUpdate: Respawn for ${ee} BUT lastHitTime DID NOT CHANGE. Old: ${Yo}, New: ${$o}. This might be an issue.`),n(hw=>{const Th=new Map(hw);return Th.set(ee,O),Th}))},Fe=(se,D)=>{n(O=>{const ee=new Map(O);return ee.delete(D.identity.toHexString()),ee}),e&&e.identity&&D.identity.isEqual(e.identity)&&te&&(console.warn("[useSpacetimeTables] Local player deleted from server."),ge(!1))},rt=(se,D)=>a(O=>new Map(O).set(D.id.toString(),D)),Ee=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.health!==O.health||D.treeType!==O.treeType||D.lastHitTime!==O.lastHitTime||D.respawnAt!==O.respawnAt)&&a(Bt=>new Map(Bt).set(O.id.toString(),O))},Qe=(se,D)=>a(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),At=(se,D)=>u(O=>new Map(O).set(D.id.toString(),D)),nt=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.health!==O.health||D.lastHitTime!==O.lastHitTime||D.respawnAt!==O.respawnAt)&&u(Bt=>new Map(Bt).set(O.id.toString(),O))},Nt=(se,D)=>u(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Be=(se,D)=>{p(O=>new Map(O).set(D.id.toString(),D)),e.identity&&D.placedBy.isEqual(e.identity)&&pt.current()},he=(se,D,O)=>p(ee=>new Map(ee).set(O.id.toString(),O)),qe=(se,D)=>p(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),He=(se,D)=>v(O=>new Map(O).set(D.id.toString(),D)),Ke=(se,D,O)=>v(ee=>new Map(ee).set(O.id.toString(),O)),Re=(se,D)=>v(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),ve=(se,D)=>k(O=>new Map(O).set(D.instanceId.toString(),D)),ke=(se,D,O)=>k(ee=>new Map(ee).set(O.instanceId.toString(),O)),Ue=(se,D)=>k(O=>{const ee=new Map(O);return ee.delete(D.instanceId.toString()),ee}),Ne=(se,D)=>A(D),at=(se,D,O)=>{(D.timeOfDay!==O.timeOfDay||D.isFullMoon!==O.isFullMoon||D.cycleCount!==O.cycleCount)&&A(O)},Pr=(se,D)=>A(null),Ro=(se,D)=>U(O=>new Map(O).set(D.playerIdentity.toHexString(),D)),Ru=(se,D,O)=>U(ee=>new Map(ee).set(O.playerIdentity.toHexString(),O)),ku=(se,D)=>U(O=>{const ee=new Map(O);return ee.delete(D.playerIdentity.toHexString()),ee}),zu=(se,D)=>_(O=>new Map(O).set(D.id.toString(),D)),Fu=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.respawnAt!==O.respawnAt)&&_(Bt=>new Map(Bt).set(O.id.toString(),O))},Mu=(se,D)=>_(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),ms=(se,D)=>w(O=>new Map(O).set(D.id.toString(),D)),Ou=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.respawnAt!==O.respawnAt)&&w(Bt=>new Map(Bt).set(O.id.toString(),O))},Ts=(se,D)=>w(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),ko=(se,D)=>I(O=>new Map(O).set(D.id.toString(),D)),zo=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.respawnAt!==O.respawnAt)&&I(Bt=>new Map(Bt).set(O.id.toString(),O))},Fo=(se,D)=>I(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Mo=(se,D)=>g(O=>new Map(O).set(D.id.toString(),D)),_s=(se,D,O)=>{(D.posX!==O.posX||D.posY!==O.posY||D.respawnAt!==O.respawnAt)&&g(Bt=>new Map(Bt).set(O.id.toString(),O))},Oo=(se,D)=>g(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Du=(se,D)=>j(O=>new Map(O).set(D.id.toString(),D)),Uu=(se,D,O)=>j(ee=>new Map(ee).set(O.id.toString(),O)),Do=(se,D)=>j(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Ss=(se,D)=>{B(O=>new Map(O).set(D.id.toString(),D)),e.identity&&D.placedBy.isEqual(e.identity)&&pt.current()},Pu=(se,D,O)=>B(ee=>new Map(ee).set(O.id.toString(),O)),ws=(se,D)=>B(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Uo=(se,D)=>H(O=>new Map(O).set(D.recipeId.toString(),D)),Po=(se,D,O)=>H(ee=>new Map(ee).set(O.recipeId.toString(),O)),No=(se,D)=>H(O=>{const ee=new Map(O);return ee.delete(D.recipeId.toString()),ee}),Bo=(se,D)=>N(O=>new Map(O).set(D.queueItemId.toString(),D)),Nu=(se,D,O)=>N(ee=>new Map(ee).set(O.queueItemId.toString(),O)),Bu=(se,D)=>N(O=>{const ee=new Map(O);return ee.delete(D.queueItemId.toString()),ee}),Hu=(se,D)=>X(O=>new Map(O).set(D.id.toString(),D)),Ho=(se,D,O)=>X(ee=>new Map(ee).set(O.id.toString(),O)),De=(se,D)=>X(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee}),Je=(se,D)=>ie(O=>new Map(O).set(D.playerId.toHexString(),D)),Se=(se,D,O)=>ie(ee=>new Map(ee).set(O.playerId.toHexString(),O)),it=(se,D)=>ie(O=>{const ee=new Map(O);return ee.delete(D.playerId.toHexString()),ee}),Jt=(se,D)=>{console.log(`[useSpacetimeTables LOG] ActiveConnection INSERT: ${D.identity.toHexString()}`),W(O=>{const ee=new Map(O).set(D.identity.toHexString(),D);return console.log("[useSpacetimeTables LOG] activeConnections map AFTER INSERT:",ee),ee})},gt=(se,D)=>{console.log(`[useSpacetimeTables LOG] ActiveConnection DELETE: ${D.identity.toHexString()}`),W(O=>{const ee=new Map(O);return ee.delete(D.identity.toHexString()),console.log("[useSpacetimeTables LOG] activeConnections map AFTER DELETE:",ee),ee})},mn=(se,D)=>{Q(O=>new Map(O).set(D.id.toString(),D)),e.identity&&D.placedBy.isEqual(e.identity)&&pt.current()},Qr=(se,D,O)=>{Q(ee=>new Map(ee).set(O.id.toString(),O))},Ar=(se,D)=>{Q(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee})},_i=(se,D)=>{x(O=>new Map(O).set(D.id.toString(),D))},bs=(se,D,O)=>{x(ee=>new Map(ee).set(O.id.toString(),O))},Lo=(se,D)=>{x(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee})},Pe=(se,D)=>{re(O=>new Map(O).set(D.id.toString(),D)),e.identity&&D.placedBy.isEqual(e.identity)&&pt.current()},dr=(se,D,O)=>{re(ee=>new Map(ee).set(O.id.toString(),O))},Cr=(se,D)=>{re(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee})},Jr=(se,D)=>{V(O=>new Map(O).set(D.effectId.toString(),D))},fr=(se,D,O)=>{V(ee=>new Map(ee).set(O.effectId.toString(),O))},vs=(se,D)=>{V(O=>{const ee=new Map(O);return ee.delete(D.effectId.toString()),ee})},Zr=(se,D)=>{Me(O=>new Map(O).set(D.id.toString(),D))},Lu=(se,D,O)=>{Me(ee=>new Map(ee).set(O.id.toString(),O))},lw=(se,D)=>{Me(O=>{const ee=new Map(O);return ee.delete(D.id.toString()),ee})};e.db.player.onInsert(ye),e.db.player.onUpdate(xe),e.db.player.onDelete(Fe),e.db.tree.onInsert(rt),e.db.tree.onUpdate(Ee),e.db.tree.onDelete(Qe),e.db.stone.onInsert(At),e.db.stone.onUpdate(nt),e.db.stone.onDelete(Nt),e.db.campfire.onInsert(Be),e.db.campfire.onUpdate(he),e.db.campfire.onDelete(qe),e.db.itemDefinition.onInsert(He),e.db.itemDefinition.onUpdate(Ke),e.db.itemDefinition.onDelete(Re),e.db.inventoryItem.onInsert(ve),e.db.inventoryItem.onUpdate(ke),e.db.inventoryItem.onDelete(Ue),e.db.worldState.onInsert(Ne),e.db.worldState.onUpdate(at),e.db.worldState.onDelete(Pr),e.db.activeEquipment.onInsert(Ro),e.db.activeEquipment.onUpdate(Ru),e.db.activeEquipment.onDelete(ku),e.db.mushroom.onInsert(zu),e.db.mushroom.onUpdate(Fu),e.db.mushroom.onDelete(Mu),e.db.corn.onInsert(ms),e.db.corn.onUpdate(Ou),e.db.corn.onDelete(Ts),e.db.pumpkin.onInsert(ko),e.db.pumpkin.onUpdate(zo),e.db.pumpkin.onDelete(Fo),e.db.hemp.onInsert(Mo),e.db.hemp.onUpdate(_s),e.db.hemp.onDelete(Oo),e.db.droppedItem.onInsert(Du),e.db.droppedItem.onUpdate(Uu),e.db.droppedItem.onDelete(Do),e.db.woodenStorageBox.onInsert(Ss),e.db.woodenStorageBox.onUpdate(Pu),e.db.woodenStorageBox.onDelete(ws),e.db.recipe.onInsert(Uo),e.db.recipe.onUpdate(Po),e.db.recipe.onDelete(No),e.db.craftingQueueItem.onInsert(Bo),e.db.craftingQueueItem.onUpdate(Nu),e.db.craftingQueueItem.onDelete(Bu),e.db.message.onInsert(Hu),e.db.message.onUpdate(Ho),e.db.message.onDelete(De),e.db.playerPin.onInsert(Je),e.db.playerPin.onUpdate(Se),e.db.playerPin.onDelete(it),e.db.activeConnection.onInsert(Jt),e.db.activeConnection.onDelete(gt),e.db.sleepingBag.onInsert(mn),e.db.sleepingBag.onUpdate(Qr),e.db.sleepingBag.onDelete(Ar),e.db.playerCorpse.onInsert(_i),e.db.playerCorpse.onUpdate(bs),e.db.playerCorpse.onDelete(Lo),e.db.stash.onInsert(Pe),e.db.stash.onUpdate(dr),e.db.stash.onDelete(Cr),console.log("[useSpacetimeTables] Attempting to register ActiveConsumableEffect callbacks."),e.db.activeConsumableEffect.onInsert(Jr),e.db.activeConsumableEffect.onUpdate(fr),e.db.activeConsumableEffect.onDelete(vs),e.db.cloud.onInsert(Zr),e.db.cloud.onUpdate(Lu),e.db.cloud.onDelete(lw),be.current=!0,ne.current.forEach(se=>Te(se)),ne.current=[];const mh=[e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial PLAYER subscription error:",se)).subscribe("SELECT * FROM player"),e.subscriptionBuilder().subscribe("SELECT * FROM item_definition"),e.subscriptionBuilder().subscribe("SELECT * FROM recipe"),e.subscriptionBuilder().subscribe("SELECT * FROM world_state"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial INVENTORY subscription error:",se)).subscribe("SELECT * FROM inventory_item"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial EQUIPMENT subscription error:",se)).subscribe("SELECT * FROM active_equipment"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial CRAFTING subscription error:",se)).subscribe("SELECT * FROM crafting_queue_item"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial MESSAGE subscription error:",se)).subscribe("SELECT * FROM message"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial PLAYER_PIN subscription error:",se)).subscribe("SELECT * FROM player_pin"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial ACTIVE_CONNECTION subscription error:",se)).subscribe("SELECT * FROM active_connection"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial SLEEPING_BAG subscription error:",se)).subscribe("SELECT * FROM sleeping_bag"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial PLAYER_CORPSE subscription error:",se)).subscribe("SELECT * FROM player_corpse"),e.subscriptionBuilder().onError(se=>console.error("[useSpacetimeTables] Non-spatial STASH subscription error:",se)).subscribe("SELECT * FROM stash"),e.subscriptionBuilder().onApplied(()=>console.log("[useSpacetimeTables] Subscription for 'active_consumable_effect' APPLIED.")).onError(se=>console.error("[useSpacetimeTables] Subscription for 'active_consumable_effect' ERROR:",se)).subscribe("SELECT * FROM active_consumable_effect")];console.log("[useSpacetimeTables] currentInitialSubs content:",mh),ne.current=mh}if(e&&r){const ye=new Set(S1(r)),xe=new Set(fe.current);if(ye.size===0){if(xe.size>0){console.log("[useSpacetimeTables] Viewport empty, cleaning up all spatial subs.");for(const Fe of xe)(pe.current.get(Fe)||[]).forEach(Te);pe.current.clear(),fe.current=[]}}else{const Fe=[...ye].filter(Ee=>!xe.has(Ee)),rt=[...xe].filter(Ee=>!ye.has(Ee));(Fe.length>0||rt.length>0)&&(console.log(`[Sub Update] Added: [${Fe.join(",")}] Removed: [${rt.join(",")}]`),rt.forEach(Ee=>{const Qe=pe.current.get(Ee);Qe&&(Qe.forEach(Te),pe.current.delete(Ee))}),Fe.forEach(Ee=>{const Qe=[];try{const At=`SELECT * FROM tree WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Tree Sub Error (Chunk ${Ee}):`,ke)).subscribe(At));const nt=`SELECT * FROM stone WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Stone Sub Error (Chunk ${Ee}):`,ke)).subscribe(nt));const Nt=`SELECT * FROM mushroom WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Mushroom Sub Error (Chunk ${Ee}):`,ke)).subscribe(Nt));const Be=`SELECT * FROM corn WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Corn Sub Error (Chunk ${Ee}):`,ke)).subscribe(Be));const he=`SELECT * FROM pumpkin WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Pumpkin Sub Error (Chunk ${Ee}):`,ke)).subscribe(he));const qe=`SELECT * FROM hemp WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Hemp Sub Error (Chunk ${Ee}):`,ke)).subscribe(qe));const He=`SELECT * FROM campfire WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Campfire Sub Error (Chunk ${Ee}):`,ke)).subscribe(He));const Ke=`SELECT * FROM wooden_storage_box WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Box Sub Error (Chunk ${Ee}):`,ke)).subscribe(Ke));const Re=`SELECT * FROM dropped_item WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`DroppedItem Sub Error (Chunk ${Ee}):`,ke)).subscribe(Re));const ve=`SELECT * FROM cloud WHERE chunk_index = ${Ee}`;Qe.push(e.subscriptionBuilder().onError(ke=>console.error(`Cloud Sub Error (Chunk ${Ee}):`,ke)).subscribe(ve)),pe.current.set(Ee,Qe)}catch(At){console.error(`[useSpacetimeTables] Error creating subscriptions for chunk ${Ee}:`,At),Qe.forEach(Te)}}),fe.current=[...ye])}}else r||pe.current.size>0&&(console.log("[useSpacetimeTables] Viewport removed. Cleaning up all spatial subscriptions."),pe.current.forEach(ye=>{ye.forEach(Te)}),pe.current.clear(),fe.current=[]);return()=>{!e&&(ne.current.forEach(xe=>Te(xe)),ne.current=[],pe.current.forEach(xe=>{xe.forEach(Te)}),pe.current.clear(),be.current=!1,fe.current=[],ge(!1),n(new Map),a(new Map),u(new Map),p(new Map),_(new Map),v(new Map),H(new Map),k(new Map),A(null),U(new Map),j(new Map),B(new Map),N(new Map),X(new Map),ie(new Map),W(new Map),Q(new Map),x(new Map),re(new Map),V(new Map),Me(new Map))}},[e,r]),{players:i,trees:s,stones:l,campfires:d,mushrooms:f,corns:T,pumpkins:S,hemps:m,itemDefinitions:y,inventoryItems:C,worldState:M,activeEquipments:z,droppedItems:F,woodenStorageBoxes:Y,recipes:$,craftingQueueItems:q,messages:L,localPlayerRegistered:te,playerPins:ue,activeConnections:J,sleepingBags:G,playerCorpses:K,stashes:E,activeConsumableEffects:Z,clouds:oe}},dm=100,w1=300,fm=-.15,b1=-.45,v1=.2,gm=2,I1=3,hm=["#FFD878","#FFB04A","#FF783C","#FC9842"],A1=.6,ym=1e3,C1=2500,mm=-.15,x1=-.4,E1=.3,Tm=3,_m=5,R1=.02,k1=.3,Ap=.4,ha=.05,z1=2500,F1="#000000",Sm=500,M1=1200,O1=.4,wm=-.1,D1=-.3,bm=2,U1=4,P1=.7,N1=Kr*-.3,B1=Kr*.15;function H1({visibleCampfiresMap:e,deltaTime:t}){const[r,i]=b.useState([]),n=b.useRef(new Map),s=b.useRef(new Map),a=b.useRef(new Map),l=b.useRef(new Map),u=b.useRef(new Map);return b.useEffect(()=>{if(t<=0)return;const d=performance.now();i(p=>{const f=p.map(w=>{const S=d-w.spawnTime,I=w.initialLifetime-S,m=t/16.667;let g=w.vx,y=w.vy,v=w.size,C=w.alpha;if(w.type==="smoke"){y-=.003*m,v=Math.min(w.size+R1*m,_m);const k=Math.max(0,I/w.initialLifetime);C=ha+(Ap-ha)*k}else if(w.type==="fire")C=Math.max(0,I/w.initialLifetime);else if(w.type==="smoke_burst"){y-=.0015*m;const k=Math.max(0,I/w.initialLifetime);C=ha+(Ap+.4-ha)*k}return{...w,x:w.x+g*m,y:w.y+y*m,lifetime:I,size:v,alpha:Math.max(0,Math.min(1,C))}}).filter(w=>w.lifetime>0&&w.alpha>.01),_=[],T=new Set;return e&&e.forEach((w,S)=>{T.add(S);const I=l.current.get(S)||!1,m=w.isBurning;let g=!1,y=!1,v=u.current.get(S);m?(g=!0,y=!0,v&&(u.current.delete(S),v=void 0)):(I&&(v={lingerUntil:d+z1},u.current.set(S,v)),v&&d<v.lingerUntil?y=!0:v&&d>=v.lingerUntil&&u.current.delete(S)),l.current.set(S,m);const C=w.posX,k=w.posY-Kr/2-Eo,M=C,A=k+N1,z=C,U=k+B1;if(g){let F=n.current.get(S)||0;for(F+=A1*(t/16.667);F>=1;){F-=1;const j=dm+Math.random()*(w1-dm);_.push({id:`fire_${d}_${Math.random()}`,type:"fire",x:M+(Math.random()-.5)*8,y:A+(Math.random()-.5)*5,vx:(Math.random()-.5)*v1,vy:fm+Math.random()*(b1-fm),spawnTime:d,initialLifetime:j,lifetime:j,size:Math.floor(gm+Math.random()*(I1-gm))+1,color:hm[Math.floor(Math.random()*hm.length)],alpha:1})}n.current.set(S,F)}else n.current.set(S,0);if(y){let F=s.current.get(S)||0;for(F+=k1*(t/16.667);F>=1;){F-=1;const j=ym+Math.random()*(C1-ym);_.push({id:`smoke_${d}_${Math.random()}`,type:"smoke",x:z+(Math.random()-.5)*8,y:U+(Math.random()-.5)*8,vx:(Math.random()-.5)*E1,vy:mm+Math.random()*(x1-mm),spawnTime:d,initialLifetime:j,lifetime:j,size:Math.floor(Tm+Math.random()*(_m-Tm))+1,alpha:Ap})}s.current.set(S,F)}else s.current.set(S,0);if(w.isPlayerInHotZone){let F=a.current.get(S)||0;for(F+=2*(t/16.667);F>=1;){F-=1;const j=Sm+Math.random()*(M1-Sm);_.push({id:`smokeburst_${S}_${d}_${Math.random()}`,type:"smoke_burst",x:C+(Math.random()-.5)*20,y:k+(Math.random()-.5)*15,vx:(Math.random()-.5)*O1,vy:wm+Math.random()*(D1-wm),spawnTime:d,initialLifetime:j,lifetime:j,size:bm+Math.floor(Math.random()*(U1-bm+1)),color:F1,alpha:P1})}a.current.set(S,F)}else a.current.set(S,0)}),l.current.forEach((w,S)=>{T.has(S)||(l.current.delete(S),n.current.delete(S),s.current.delete(S),a.current.delete(S),u.current.delete(S))}),u.current.forEach((w,S)=>{T.has(S)||u.current.delete(S)}),a.current.forEach((w,S)=>{T.has(S)||a.current.delete(S)}),[...f,..._]})},[e,t]),r}const vm=150,L1=Math.PI/2.5,Im=100,Y1=250,Am=-.1,$1=-.3,W1=.15,Cm=2,X1=4,xm=["#FFD878","#FFB04A","#FF783C","#FC9842"],j1=1.2,q1=.3,Em=350,V1=700,Rm=-.04,K1=-.12,G1=.1,km=4,zm=7,Fm=["#A0A0A0","#B0B0B0","#C0C0C0"],Q1=.015,Mm=.4,Om=.05,J1=-.002,Z1=0,eE=0,tE=-25,rE=-10,nE=15,iE=-10,sE=35,oE=-15,aE=-30,lE=-10;function cE({players:e,activeEquipments:t,itemDefinitions:r,deltaTime:i}){const[n,s]=b.useState([]),a=b.useRef(new Map),l=b.useMemo(()=>{let u="";return e.forEach((d,p)=>{const f=t.get(p);if(f&&f.equippedItemDefId){const _=r.get(f.equippedItemDefId.toString());_&&_.name==="Torch"&&(u+=`${p}:${d.isTorchLit};`)}}),u},[e,t,r]);return b.useEffect(()=>{if(i<=0){if(n.length>0){const p=Date.now();s(f=>f.map(_=>{const T=p-_.spawnTime,w=_.initialLifetime-T;return{..._,x:_.x+_.vx*(i/16.667),y:_.y+_.vy*(i/16.667),lifetime:w,alpha:Math.max(0,Math.min(1,w/_.initialLifetime))}}).filter(_=>_.lifetime>0&&_.alpha>.01))}return}const u=Date.now(),d=[];e.forEach((p,f)=>{if(!p||p.isDead){a.current.set(f,0);return}const _=t.get(f),T=_==null?void 0:_.equippedItemDefId,w=T?r.get(T.toString()):null;if(!!(w&&w.name==="Torch"&&p.isTorchLit)){let I=a.current.get(f)||0;I+=j1*(i/16.667);let m=0;if(p.jumpStartTimeMs>0){const W=u-Number(p.jumpStartTimeMs);if(W>=0&&W<Yi){const G=W/Yi;m=Math.sin(G*Math.PI)*lg}}let g=Z1,y=eE;switch(p.direction){case"left":g=tE,y=rE;break;case"right":g=nE,y=iE;break;case"up":g=sE,y=oE;break;case"down":g=aE,y=lE;break}const v=Ae.spriteWidth*.2,C=Ae.spriteHeight*.05;let k=0,M=0;switch(p.direction){case"up":k=-v*-1.5,M=-C*2;break;case"down":k=v*-2.5,M=C*1.5;break;case"left":k=-v*2,M=C;break;case"right":k=v*.5,M=C;break}let A=0;const z=Number((_==null?void 0:_.swingStartTimeMs)||0);if(z>0){const W=u-z;if(W>=0&&W<vm){const G=W/vm,Q=Math.sin(G*Math.PI)*L1;p.direction==="right"||p.direction==="up"?A=Q:A=-Q}}const U=p.positionX,F=p.positionY-m,j=U+k,Y=F+M,B=U+g,$=F+y,H=B-j,q=$-Y,N=Math.cos(A),L=Math.sin(A),X=H*N-q*L,te=H*L+q*N,ge=j+X,ue=Y+te,ie=ge,J=ue;for(;I>=1;){I-=1;const W=Im+Math.random()*(Y1-Im);if(d.push({id:`torch_fire_${f}_${u}_${Math.random()}`,type:"fire",x:ie+(Math.random()-.5)*3,y:J+(Math.random()-.5)*3,vx:(Math.random()-.5)*W1,vy:Am+Math.random()*($1-Am),spawnTime:u,initialLifetime:W,lifetime:W,size:Math.floor(Cm+Math.random()*(X1-Cm))+1,color:xm[Math.floor(Math.random()*xm.length)],alpha:1}),Math.random()<q1){const G=Em+Math.random()*(V1-Em);d.push({id:`torch_smoke_${f}_${u}_${Math.random()}`,type:"smoke",x:ie+(Math.random()-.5)*4,y:J-3+(Math.random()-.5)*3,vx:(Math.random()-.5)*G1,vy:Rm+Math.random()*(K1-Rm),spawnTime:u,initialLifetime:G,lifetime:G,size:Math.floor(km+Math.random()*(zm-km))+1,color:Fm[Math.floor(Math.random()*Fm.length)],alpha:Mm})}}a.current.set(f,I)}else a.current.set(f,0)}),s(p=>[...p.map(_=>{const T=u-_.spawnTime,w=_.initialLifetime-T,S=i/16.667;let I=_.vx,m=_.vy,g=_.size,y=_.alpha;if(_.type==="smoke"){m+=J1*S,g=Math.min(_.size+Q1*S,zm);const v=Math.max(0,w/_.initialLifetime);y=Om+(Mm-Om)*v}else _.type==="fire"&&(y=Math.max(0,Math.min(1,w/_.initialLifetime)));return{..._,x:_.x+I*S,y:_.y+m*S,lifetime:w,size:g,alpha:Math.max(0,Math.min(1,y))}}).filter(_=>_.lifetime>0&&_.alpha>.01),...d])},[e,t,r,i,l]),n}const uE=5e3,Dm=(e,t,r)=>e*(1-r)+t*r,pE=({serverClouds:e,deltaTime:t})=>{const[r,i]=b.useState(()=>new Map),[n,s]=b.useState(()=>new Map),a=b.useRef(new Map);return b.useEffect(()=>{const l=new Map(r),u=performance.now();let d=!1;e.forEach((p,f)=>{const _=l.get(f),T=a.current.get(f),w=!T||T.posX!==p.posX||T.posY!==p.posY;if(!_||w){d=!0;const S=(_==null?void 0:_.targetPosX)??p.posX,I=(_==null?void 0:_.targetPosY)??p.posY;l.set(f,{id:f,serverPosX:p.posX,serverPosY:p.posY,lastKnownPosX:_&&w?S:p.posX,lastKnownPosY:_&&w?I:p.posY,targetPosX:p.posX,targetPosY:p.posY,lastServerUpdateTimeMs:u,width:p.width,height:p.height,rotationDegrees:p.rotationDegrees,baseOpacity:p.baseOpacity,blurStrength:p.blurStrength,shape:p.shape})}else _&&(_.width!==p.width||_.height!==p.height||_.rotationDegrees!==p.rotationDegrees||_.baseOpacity!==p.baseOpacity||_.blurStrength!==p.blurStrength||!Object.is(_.shape,p.shape))&&(d=!0,l.set(f,{..._,width:p.width,height:p.height,rotationDegrees:p.rotationDegrees,baseOpacity:p.baseOpacity,blurStrength:p.blurStrength,shape:p.shape}))}),r.forEach((p,f)=>{e.has(f)||(d=!0,l.delete(f))}),d&&i(l),a.current=new Map(e.entries())},[e]),b.useEffect(()=>{if(t===0)return;const l=new Map,u=performance.now();r.forEach((d,p)=>{const f=u-d.lastServerUpdateTimeMs,_=Math.min(1,f/uE),T=Dm(d.lastKnownPosX,d.targetPosX,_),w=Dm(d.lastKnownPosY,d.targetPosY,_);l.set(p,{...d,currentRenderPosX:T,currentRenderPosY:w})}),s(l)},[r,t]),n};function dE(e,t,r,i,n,s){const a=t.current,{tileSize:l}=Ae;if(!a||!a.complete||a.naturalHeight===0){e.fillStyle="#8FBC8F",e.fillRect(0,0,n,s);return}const u=-r,d=-i,p=u+n,f=d+s,_=Math.max(0,Math.floor(u/l)),T=Math.min(Ae.worldWidth,Math.ceil(p/l)),w=Math.max(0,Math.floor(d/l)),S=Math.min(Ae.worldHeight,Math.ceil(f/l)),I=1;for(let m=w;m<S;m++)for(let g=_;g<T;g++)e.drawImage(a,g*l,m*l,l+I,l+I)}const cg="/assets/bone-B3ABvVgV.png",ug="/assets/bone-B3ABvVgV.png",Ei="/assets/bone-B3ABvVgV.png",Cp=240,Um=150,fE=10,gE={getImageSource:e=>{if(typeof e.treeType=="object"&&e.treeType!==null&&"tag"in e.treeType)switch(e.treeType.tag){case"AleppoPine":return cg;case"MannaAsh":return ug;case"DownyOak":return Ei;default:return console.warn(`Unknown tree type tag: ${e.treeType.tag}, falling back to Downy Oak.`),Ei}else if(typeof e.treeType=="string")switch(e.treeType){case"AleppoPine":return cg;case"MannaAsh":return ug;case"DownyOak":return Ei;default:return console.warn(`Unknown tree type string: ${e.treeType}, falling back to Downy Oak.`),Ei}return console.error("Unexpected treeType structure:",e.treeType,"Falling back to Downy Oak."),Ei},getTargetDimensions:(e,t)=>{const r=Cp/e.naturalWidth;return{width:Cp,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-Cp/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:1.8,minStretchFactor:.15,shadowBlur:2,pivotYOffset:15})},applyEffects:(e,t,r,i,n,s)=>{let a=0,l=0;if(t.lastHitTime){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<Um){const p=1-d/Um,f=fE*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},fallbackColor:"darkgreen"};Gt.preloadImage(cg);Gt.preloadImage(ug);Gt.preloadImage(Ei);function W0(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:gE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const X0="/assets/bone-B3ABvVgV.png",xp=120,Pm=150,hE=10,yE={getImageSource:e=>X0,getTargetDimensions:(e,t)=>{const r=xp/e.naturalWidth;return{width:xp,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-xp/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:.8,minStretchFactor:.1,shadowBlur:2,pivotYOffset:20})},applyEffects:(e,t,r,i,n,s)=>{let a=0,l=0;if(t.lastHitTime){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<Pm){const p=1-d/Pm,f=hE*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},fallbackColor:"gray"};Gt.preloadImage(X0);function Nm(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:yE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const j0="/assets/bone-B3ABvVgV.png",mE=64,hh=64,TE=96*96,Bm=150,_E=10,ya=50,ma=6,SE=8,Hm=3e3,wE={getImageSource:e=>e.isDestroyed||e.isHidden?null:j0,getTargetDimensions:(e,t)=>({width:mE,height:hh}),calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r/2-10}),getShadowParams:void 0,applyEffects:(e,t,r,i,n,s)=>{!t.isHidden&&!t.isDestroyed&&xo(e,{cycleProgress:s,blur:4});let a=0,l=0;if(t.lastHitTime&&!t.isDestroyed){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<Bm){const p=1-d/Bm,f=_E*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},drawOverlay:(e,t,r,i,n,s,a,l,u)=>{if(t.isDestroyed||t.isHidden)return;const d=t.health??0,p=t.maxHealth??1;if(d<p&&t.lastHitTime){const f=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),_=a-f;if(_<Hm){const T=Math.max(0,d/p),w=r+(n-ya)/2,S=i-SE-ma,I=_/Hm,m=Math.max(0,1-Math.pow(I,2));e.fillStyle=`rgba(0, 0, 0, ${.5*m})`,e.fillRect(w,S,ya,ma);const g=ya*T,y=Math.floor(255*(1-T)),v=Math.floor(255*T);e.fillStyle=`rgba(${y}, ${v}, 0, ${m})`,e.fillRect(w,S,g,ma),e.strokeStyle=`rgba(0,0,0, ${.7*m})`,e.lineWidth=1,e.strokeRect(w,S,ya,ma)}}},fallbackColor:"#A0522D"};Gt.preloadImage(j0);function bE(e,t,r,i){Ur({ctx:e,entity:t,config:wE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i})}const Lm=150,vE=Math.PI/2.5,IE="rgba(255, 255, 255, 0.4)",Ym=4,AE=200,$m=3,Wm=5e3,CE=Math.PI/12,xE=20,Xm=(e,t,r,i,n,s,a,l,u,d)=>{let p=0,f=0;if(!t.isDead&&t.lastHitTime){const L=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),X=s-L;X>=0&&X<AE&&(p=(Math.random()-.5)*2*$m,f=(Math.random()-.5)*2*$m)}const _=.05,T=n.width*_,w=n.height*_;let S=0,I=0,m=0,g=!1,y=0,v=1,C=1,k=t.positionX+p,M=t.positionY-a+f;const A=Ae.spriteWidth*.2,z=Ae.spriteHeight*.05;if(i.name==="Wooden Spear"||i.name==="Stone Spear"){switch(t.direction){case"up":y=-Math.PI/2,S=0,I=-48*.1;break;case"down":y=Math.PI/2,S=0,I=Ae.spriteHeight*.1;break;case"left":y=Math.PI,S=-48*.15,I=0;break;case"right":y=0,S=Ae.spriteWidth*.15,I=0;break}switch(t.direction){case"up":y=Math.PI/4+Math.PI/2+Math.PI/2,v=-1,C=-1,S=15,I=-48*.1-20;break;case"down":y=Math.PI/4+Math.PI/2,v=-1,C=1,S=-15,I=Ae.spriteHeight*.1+25;break;case"left":y=Math.PI+Math.PI/4,v=-1,C=1,S=-48*.15-15,I=0;break;case"right":y=Math.PI/4,v=-1,C=1,S=Ae.spriteWidth*.15+5,I=15;break}k=t.positionX+p+S,M=t.positionY-a+f+I,m=y}else switch(t.direction){case"up":S=-A*-2.5,I=z*-1,k+=S,M+=I;break;case"down":S=A*-2.5,I=z*1,k+=S,M+=I;break;case"left":S=-A*1.5,I=z,k+=S,M+=I;break;case"right":S=A*.5,I=z,k+=S,M+=I;break}const U=k,F=M,j=Number(r.swingStartTimeMs),Y=s-j;let B=0,$=0;if(Y<Lm){g=!0;const L=Y/Lm;if(i.name==="Wooden Spear"||i.name==="Stone Spear"){const X=i.attackRange||100;switch($=Math.sin(L*Math.PI)*X,t.direction){case"up":M-=$;break;case"down":M+=$;break;case"left":k-=$;break;case"right":k+=$;break}}else B=-(Math.sin(L*Math.PI)*vE),m=B}let H=n;if(i.name==="Torch"&&r.iconAssetName){const L=l.get(r.iconAssetName);L?H=L:console.warn(`[renderEquippedItem] Image for torch state '${r.iconAssetName}' not found in itemImages map. Falling back.`)}if(!H)return;e.save(),e.translate(k,M),i.name==="Wooden Spear"||i.name==="Stone Spear"?(e.rotate(m),e.scale(v,C)):(t.direction==="right"||t.direction==="up")&&i.name!=="Bandage"&&e.scale(-1,1);let q=!1,N=null;if(u&&t.identity){for(const L of u.values())if(L.playerId.toHexString()===t.identity.toHexString()&&L.effectType.tag==="BandageBurst"){N=Number(L.startedAt.microsSinceUnixEpoch/1000n);break}}if(i.name==="Bandage"&&N!==null){const L=s-N;if(L>=0&&L<Wm){const X=L/Wm,te=Math.sin(X*Math.PI*xE*2)*CE;e.save(),e.rotate(te),e.drawImage(H,-T/2,-w/2,T,w),e.restore(),q=!0}}if(q||(e.save(),i.name!=="Wooden Spear"&&i.name!=="Stone Spear"&&i.name!=="Bandage"&&e.rotate(B),e.drawImage(H,-T/2,-w/2,T,w),e.restore()),e.restore(),g)if(i.name==="Wooden Spear"||i.name==="Stone Spear"){e.save();try{e.beginPath();const L=Math.max(T,w),X=U,te=F,ge=k,ue=M;e.moveTo(X,te),e.lineTo(ge,ue),e.strokeStyle="rgba(220, 220, 255, 0.65)",e.lineWidth=Ym-1.5,e.stroke()}finally{e.restore()}}else{e.save();try{const L=Math.max(T,w)*.5;let X=0;switch(t.direction){case"up":X=-Math.PI/2;break;case"down":X=Math.PI/2;break;case"left":X=Math.PI;break;case"right":X=0;break}const te=X+m,ge=m<0;e.beginPath(),e.arc(U,F,L,X,te,ge),e.strokeStyle=IE,e.lineWidth=Ym,e.stroke()}finally{e.restore()}}},yh=1,EE=200,jm=3,RE=100,iu=Ae.spriteWidth/2,qm=150,Ms=new Map,Vm=(e,t,r)=>e*(1-r)+t*r,Sn=document.createElement("canvas"),rn=Sn.getContext("2d");rn||console.error("Failed to get 2D context from offscreen canvas for player rendering.");const kE='12px "Press Start 2P", cursive',zE=(e,t,r,i)=>{let n=2;switch(e.direction){case"up":n=0;break;case"right":n=1;break;case"down":n=2;break;case"left":n=3;break;default:n=2;break}let s=t?r:yh;i&&(s=r%2);const a=s*Ae.spriteWidth,l=n*Ae.spriteHeight;return{sx:a,sy:l}},FE=(e,t,r)=>{if(e===null||t===null)return!1;const i=e-r.positionX,n=t-r.positionY,s=i*i+n*n,a=iu*iu;return s<a},ME=(e,t,r,i,n,s=!0)=>{if(!s)return;const a=n?t.username:`${t.username} (offline)`;e.font=kE,e.textAlign="center";const l=e.measureText(a).width,u=4,d=16,p=l+u*2,f=i-p/2,_=r-d+4;e.fillStyle="rgba(0, 0, 0, 0.7)",e.beginPath(),e.roundRect(f,_,p,d,5),e.fill(),e.fillStyle="#FFFFFF",e.fillText(a,i,_+d/2+4)},pg=(e,t,r,i,n,s,a,l,u=0,d=!1,p,f,_)=>{var ge;if(!_&&t.isDead){if(t.identity){const ue=t.identity.toHexString();Ms.has(ue)&&Ms.delete(ue)}return}let T=t.positionX,w=t.positionY;const S=t.identity.toHexString();let I=Ms.get(S);const m=t.positionX,g=t.positionY,y=((ge=t.lastHitTime)==null?void 0:ge.microsSinceUnixEpoch)??0n,v=y>0n?Number(y/1000n):0,C=v>0?l-v:1/0;if(_)T=t.positionX,w=t.positionY,I&&Ms.delete(S);else{if(I?y>I.lastHitTimeMicros?(I.interpolationSourceX=I.displayX,I.interpolationSourceY=I.displayY,I.interpolationTargetX=m,I.interpolationTargetY=g,I.interpolationStartTime=l,I.lastHitTimeMicros=y):!t.isDead&&y===0n&&I.lastHitTimeMicros!==0n&&(I.lastHitTimeMicros=0n):(I={displayX:m,displayY:g,serverX:m,serverY:g,lastHitTimeMicros:y,interpolationSourceX:m,interpolationSourceY:g,interpolationTargetX:m,interpolationTargetY:g,interpolationStartTime:0},Ms.set(S,I)),I.interpolationStartTime>0&&l<I.interpolationStartTime+qm){const ue=l-I.interpolationStartTime,ie=Math.min(1,ue/qm);T=Vm(I.interpolationSourceX,I.interpolationTargetX,ie),w=Vm(I.interpolationSourceY,I.interpolationTargetY,ie)}else T=m,w=g,I.interpolationStartTime>0&&(I.interpolationStartTime=0);I.displayX=T,I.displayY=w,I.serverX=m,I.serverY=g}let k=!1;if(!_&&p){for(const ue of p.values())if(t.identity&&ue.playerId.toHexString()===t.identity.toHexString()&&ue.effectType.tag==="BandageBurst"){k=!0;break}}const M=_?!1:n,A=_?yh:a,{sx:z,sy:U}=zE(t,M,A,k);let F=0,j=0;!_&&!t.isDead&&C<EE&&(F=(Math.random()-.5)*2*jm,j=(Math.random()-.5)*2*jm);const Y=Ae.spriteWidth*2,B=Ae.spriteHeight*2,$=T-Y/2+F,H=w-B/2+j,q=_?0:u,N=H-q,L=!_&&!t.isDead&&C<RE,X=B*.4,te=_?!1:i;if(!te){const ue=Y*.3,ie=ue*.4;By(e,T,w+B*.1,ue,ie)}if(!_&&!t.isDead&&te){const ue=Y*.3,ie=ue*.4,W=q*(10/iu),Q=1-Math.min(1,q/iu)*.4;By(e,T,w+X+W,ue*Q,ie*Q)}e.save();try{const ue=$+Y/2,ie=N+B/2;if(rn&&r)Sn.width=Ae.spriteWidth,Sn.height=Ae.spriteHeight,rn.clearRect(0,0,Sn.width,Sn.height),rn.drawImage(r,z,U,Ae.spriteWidth,Ae.spriteHeight,0,0,Ae.spriteWidth,Ae.spriteHeight),L&&(rn.globalCompositeOperation="source-in",rn.fillStyle="rgba(255, 255, 255, 0.85)",rn.fillRect(0,0,Sn.width,Sn.height),rn.globalCompositeOperation="source-over");else if(!r)return;if(!te){let J=0;switch(t.direction){case"up":case"right":J=-Math.PI/2;break;case"down":case"left":default:J=Math.PI/2;break}e.translate(ue,ie),e.rotate(J),e.translate(-ue,-ie)}rn&&e.drawImage(Sn,0,0,Ae.spriteWidth,Ae.spriteHeight,$,N,Y,B)}finally{e.restore()}if(!_&&!t.isDead){const J=s||d;ME(e,t,N,T+F,te,J)}},q0="/assets/bone-B3ABvVgV.png",Km=64,OE={getImageSource:e=>q0,getTargetDimensions:(e,t)=>{const r=Km/e.naturalWidth;return{width:Km,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:1,minStretchFactor:.1,shadowBlur:1,pivotYOffset:10})},applyEffects:(e,t,r,i,n,s)=>({offsetX:0,offsetY:0}),fallbackColor:"yellowgreen"};Gt.preloadImage(q0);function Gm(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:OE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const V0="/assets/bone-B3ABvVgV.png",Qm=64,DE={getImageSource:e=>V0,getTargetDimensions:(e,t)=>{const r=Qm/e.naturalWidth;return{width:Qm,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:1,minStretchFactor:.1,shadowBlur:3,pivotYOffset:5})},applyEffects:(e,t,r,i,n,s)=>({offsetX:0,offsetY:0}),fallbackColor:"seagreen"};Gt.preloadImage(V0);function Jm(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:DE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const K0="/assets/bone-B3ABvVgV.png",UE=48,PE=48,NE={getImageSource:e=>K0,getTargetDimensions:(e,t)=>({width:UE,height:PE}),calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r/2}),getShadowParams:void 0,applyEffects:(e,t,r,i,n,s)=>(xo(e,{cycleProgress:s,blur:3}),{offsetX:0,offsetY:0}),fallbackColor:"#A0522D"};Gt.preloadImage(K0);function G0({ctx:e,item:t,itemDef:r,nowMs:i,cycleProgress:n}){const s={...t,itemDef:r};Ur({ctx:e,entity:s,config:NE,nowMs:i,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:n})}const Q0="/assets/bone-B3ABvVgV.png",Zm=64,BE={getImageSource:e=>Q0,getTargetDimensions:(e,t)=>{const r=Zm/e.naturalWidth;return{width:Zm,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:.5,minStretchFactor:.1,shadowBlur:1,pivotYOffset:20})},applyEffects:(e,t,r,i,n,s)=>({offsetX:0,offsetY:0}),fallbackColor:"red"};Gt.preloadImage(Q0);function J0(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:BE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const Z0="/assets/bone-B3ABvVgV.png",eT=64,HE={getImageSource:e=>Z0,getTargetDimensions:(e,t)=>{const r=eT/e.naturalWidth;return{width:eT,height:e.naturalHeight*r}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,drawCustomGroundShadow:(e,t,r,i,n,s,a,l)=>{Ti({ctx:e,entityImage:r,entityCenterX:i,entityBaseY:n,imageDrawWidth:s,imageDrawHeight:a,cycleProgress:l,maxStretchFactor:.8,minStretchFactor:.2,shadowBlur:2,pivotYOffset:20})},applyEffects:(e,t,r,i,n,s)=>({offsetX:0,offsetY:0}),fallbackColor:"yellowgreen"};Gt.preloadImage(Z0);function ew(e,t,r,i,n,s){Ur({ctx:e,entity:t,config:HE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i,onlyDrawShadow:n,skipDrawingShadow:s})}const tw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",LE=48,rw=48,YE=96*96,tT=150,$E=7,Ta=40,_a=5,WE=6,rT=3e3,XE={getImageSource:e=>e.isDestroyed||e.isHidden?null:tw,getTargetDimensions:(e,t)=>{const r=e.naturalWidth/e.naturalHeight,i=rw;return{width:i*r,height:i}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,applyEffects:(e,t,r,i,n,s)=>{!t.isHidden&&!t.isDestroyed&&xo(e,{cycleProgress:s,blur:2});let a=0,l=0;if(t.lastHitTime&&!t.isDestroyed&&!t.isHidden){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<tT){const p=1-d/tT,f=$E*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},drawOverlay:(e,t,r,i,n,s,a)=>{if(t.isDestroyed||t.isHidden)return;const l=t.health??0,u=t.maxHealth??1;if(l<u&&t.lastHitTime){const d=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),p=a-d;if(p<rT){const f=Math.max(0,l/u),_=r+(n-Ta)/2,T=i-WE-_a,w=p/rT,S=Math.max(0,1-Math.pow(w,2));e.fillStyle=`rgba(0, 0, 0, ${.5*S})`,e.fillRect(_,T,Ta,_a);const I=Ta*f,m=Math.floor(255*f),g=Math.floor(255*(1-f));e.fillStyle=`rgba(${g}, ${m}, 0, ${S})`,e.fillRect(_,T,I,_a),e.strokeStyle=`rgba(0, 0, 0, ${.7*S})`,e.lineWidth=1,e.strokeRect(_,T,Ta,_a)}}},fallbackColor:"#5C4033"};Gt.preloadImage(tw);function jE(e,t,r,i){Ur({ctx:e,entity:t,config:XE,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i})}const nT=new Map,qE=({ctx:e,ySortedEntities:t,heroImageRef:r,lastPositionsRef:i,activeConnections:n,activeEquipments:s,activeConsumableEffects:a,itemDefinitions:l,itemImagesRef:u,worldMouseX:d,worldMouseY:p,localPlayerId:f,animationFrame:_,nowMs:T,hoveredPlayerIds:w,onPlayerHover:S,cycleProgress:I,renderPlayerCorpse:m})=>{t.forEach(({type:g,entity:y})=>{if(g==="player"){const v=y,C=v.identity.toHexString();if(f&&C===f){const N=v.isDead,L=v.lastHitTime?v.lastHitTime.__timestamp_micros_since_unix_epoch__.toString():null,X=nT.get(C),te=X==null?void 0:X.prevIsDead,ge=X==null?void 0:X.prevLastHitTime;(N!==te||!N&&L!==ge)&&(console.log(`[renderingUtils] LocalPlayer State Change: ${v.username} (ID: ${C}). isDead: ${N} (was: ${te}), lastHitTime: ${L} (was: ${ge})`),nT.set(C,{prevIsDead:N,prevLastHitTime:L}))}const k=i.current.get(C);let M=!1;if(k){const N=Math.abs(v.positionX-k.x),L=Math.abs(v.positionY-k.y);(N>.1||L>.1)&&(M=!0)}i.current.set(C,{x:v.positionX,y:v.positionY});let A=0;const z=v.jumpStartTimeMs;if(z>0){const N=T-Number(z);if(N<500){const L=N/500;A=Math.sin(L*Math.PI)*50}}const U=FE(d,p,v),F=w.has(C),j=r.current,Y=n?n.has(C):!1,B=s.get(C);let $=null,H=null;B&&B.equippedItemDefId&&($=l.get(B.equippedItemDefId.toString())||null,H=($?u.current.get($.iconAssetName):null)||null);const q=$&&H&&H.complete&&H.naturalHeight!==0;v.direction==="up"||v.direction==="left"?(q&&B&&Xm(e,v,B,$,H,T,A,u.current,a),j&&pg(e,v,j,Y,M,U,_,T,A,F,a)):(j&&pg(e,v,j,Y,M,U,_,T,A,F,a),q&&B&&Xm(e,v,B,$,H,T,A,u.current,a))}else if(g==="tree")W0(e,y,T,I,!1,!0);else if(g==="stone")Nm(e,y,T,I,!1,!0);else if(g==="corn")Gm(e,y,T,I,!1,!0);else if(g==="hemp")Jm(e,y,T,I,!1,!0);else if(g==="campfire")n0(e,y,T,I);else if(g==="dropped_item"){const v=y,C=l.get(v.itemDefId.toString());G0({ctx:e,item:v,itemDef:C,nowMs:T,cycleProgress:I})}else g==="mushroom"?J0(e,y,T,I):g==="pumpkin"?ew(e,y,T,I):g==="stash"?jE(e,y,T,I):g==="wooden_storage_box"?bE(e,y,T,I):g==="player_corpse"?m({ctx:e,corpse:y,nowMs:T,itemImagesRef:u,heroImageRef:r}):console.warn("Unhandled entity type for Y-sorting (first pass):",g,y)}),t.forEach(({type:g,entity:y})=>{g==="tree"||(g==="stone"?Nm(e,y,T,I,!0,!1):g==="corn"?Gm(e,y,T,I,!0,!1):g==="hemp"?Jm(e,y,T,I,!0,!1):g==="campfire"||g==="dropped_item"||g==="mushroom"||g==="pumpkin"||g==="stash"||g==="wooden_storage_box"||g==="player_corpse"||g==="player"||console.warn("Unhandled entity type for Y-sorting (second pass):",g,y))})},VE=64,KE="16px Arial",iT="#FFFFFF";function GE({ctx:e,mushrooms:t,corns:r,pumpkins:i,hemps:n,campfires:s,droppedItems:a,woodenStorageBoxes:l,playerCorpses:u,stashes:d,sleepingBags:p,players:f,itemDefinitions:_,closestInteractableMushroomId:T,closestInteractableCornId:w,closestInteractableHempId:S,closestInteractableCampfireId:I,closestInteractablePumpkinId:m,closestInteractableDroppedItemId:g,closestInteractableBoxId:y,isClosestInteractableBoxEmpty:v,closestInteractableCorpseId:C,closestInteractableStashId:k,closestInteractableSleepingBagId:M}){if(e.save(),e.font=KE,e.fillStyle=iT,e.strokeStyle=iT,e.lineWidth=2,e.textAlign="center",T!==null){const A=t.get(T.toString());if(A){const z="Press E to Collect",U=A.posY-xA/2,F=A.posX,j=U-30;e.strokeText(z,F,j),e.fillText(z,F,j)}}if(w!==null){const A=r.get(w.toString());if(A){const z="Press E to Harvest",U=A.posY-EA/2,F=A.posX,j=U-30;e.strokeText(z,F,j),e.fillText(z,F,j)}}if(m!==null){const A=i.get(m.toString());if(A){const z="Press E to Harvest",U=A.posY-kA/2,F=A.posX,j=U-30;e.strokeText(z,F,j),e.fillText(z,F,j)}}if(S!==null){const A=n.get(S.toString());if(A){const z="Press E to Harvest",U=A.posY-RA/2,F=A.posX,j=U-30;e.strokeText(z,F,j),e.fillText(z,F,j)}}if(g!==null){const A=a.get(g.toString());if(A){const z=_.get(A.itemDefId.toString()),F=`Press E to pick up ${z?z.name:"Item"} (x${A.quantity})`,j=A.posX,Y=A.posY-25;e.strokeText(F,j,Y),e.fillText(F,j,Y)}}if(I!==null){const A=s.get(I.toString());if(A){const z="Press E to Open",U=A.posX,F=A.posY-Kr/2-Eo,j=U,Y=F-50;e.strokeText(z,j,Y),e.fillText(z,j,Y)}}if(y!==null){const A=l.get(y.toString());if(A){const z=v?"Hold E to Pick Up":"Press E to Open",U=A.posX,F=A.posY-hh/2-10;e.strokeText(z,U,F),e.fillText(z,U,F)}}if(C!==null){const A=u.get(C.toString());if(A){const z=`Press E to loot ${A.username}'s body`,U=A.posX,F=A.posY-48/2-10;e.strokeText(z,U,F),e.fillText(z,U,F)}}if(k!==null){const A=d.get(k.toString());if(A){const z=A.isHidden?"Hold E to Surface":"Press E to Open / Hold to Hide",U=A.posX,F=A.posY-30;e.strokeText(z,U,F),e.fillText(z,U,F)}}if(M!==null){const A=p.get(M.toString());if(A){const z=f.get(A.placedBy.toHexString()),F=`${z?z.username:"Someone"}'s Sleeping Bag`,j=A.posX,Y=A.posY-VE/2-50;e.strokeText(F,j,Y),e.fillText(F,j,Y)}}e.restore()}const nw="/assets/bone-B3ABvVgV.png",QE=64,iw=64,sT=150,JE=6,Sa=50,wa=5,ZE=5,oT=3e3,eR={getImageSource:e=>e.isDestroyed?null:nw,getTargetDimensions:(e,t)=>{const r=e.naturalWidth/e.naturalHeight,i=iw;return{width:i*r,height:i}},calculateDrawPosition:(e,t,r)=>({drawX:e.posX-t/2,drawY:e.posY-r}),getShadowParams:void 0,applyEffects:(e,t,r,i,n,s)=>{xo(e,{cycleProgress:s,blur:3});let a=0,l=0;if(t.lastHitTime&&!t.isDestroyed){const u=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),d=r-u;if(d>=0&&d<sT){const p=1-d/sT,f=JE*p;a=(Math.random()-.5)*2*f,l=(Math.random()-.5)*2*f}}return{offsetX:a,offsetY:l}},drawOverlay:(e,t,r,i,n,s,a)=>{if(t.isDestroyed)return;const l=t.health??0,u=t.maxHealth??1;if(l<u&&t.lastHitTime){const d=Number(t.lastHitTime.microsSinceUnixEpoch/1000n),p=a-d;if(p<oT){const f=Math.max(0,l/u),_=r+(n-Sa)/2,T=i-ZE-wa,w=p/oT,S=Math.max(0,1-Math.pow(w,2));e.fillStyle=`rgba(0, 0, 0, ${.5*S})`,e.fillRect(_,T,Sa,wa);const I=Sa*f,m=Math.floor(255*(1-f)),g=Math.floor(255*f);e.fillStyle=`rgba(${m}, ${g}, 0, ${S})`,e.fillRect(_,T,I,wa),e.strokeStyle=`rgba(0, 0, 0, ${.7*S})`,e.lineWidth=1,e.strokeRect(_,T,Sa,wa)}}},fallbackColor:"#8B4513"};Gt.preloadImage(nw);function tR(e,t,r,i){Ur({ctx:e,entity:t,config:eR,nowMs:r,entityPosX:t.posX,entityPosY:t.posY,cycleProgress:i})}function rR({ctx:e,placementInfo:t,itemImagesRef:r,worldMouseX:i,worldMouseY:n,isPlacementTooFar:s,placementError:a}){var f;if(!t||i===null||n===null)return;const l=(f=r.current)==null?void 0:f.get(t.iconAssetName);let u=Ly,d=Yy;t.iconAssetName==="wooden_storage_box.png"?(u=Ly,d=Yy):t.iconAssetName==="sleeping_bag.png"?(u=QE,d=iw):t.iconAssetName==="stash.png"&&(u=LE,d=rw),e.save();let p=a;if(s?(e.filter="grayscale(80%) brightness(1.2) contrast(0.8) opacity(50%)",p="Too far away"):a?e.filter="sepia(60%) brightness(0.9) opacity(60%)":e.globalAlpha=.7,l&&l.complete&&l.naturalHeight!==0?e.drawImage(l,i-u/2,n-d/2,u,d):(e.fillStyle=e.filter!=="none"?"rgba(255, 0, 0, 0.4)":"rgba(255, 255, 255, 0.3)",e.fillRect(i-u/2,n-d/2,u,d)),p){const _=s?"orange":"red";e.filter="none",e.globalAlpha=1,e.fillStyle=_,e.font='12px "Press Start 2P", cursive',e.textAlign="center",e.fillText(p,i,n-d/2-5)}e.restore()}function nR(e,t,r,i,n=15,s="rgba(255, 255, 255, 0.3)",a="rgba(255, 255, 255, 0.9)"){const l=-Math.PI/2,u=l+i*2*Math.PI;e.save(),e.beginPath(),e.arc(t,r,n,0,2*Math.PI),e.fillStyle=s,e.fill(),i>0&&(e.beginPath(),e.moveTo(t,r),e.arc(t,r,n,l,u),e.closePath(),e.fillStyle=a,e.fill()),e.restore()}const iR=64*64;function sR({ctx:e,corpse:t,nowMs:r,itemImagesRef:i,worldScale:n,cameraOffsetX:s,cameraOffsetY:a}){var p;const l=(p=i.current)==null?void 0:p.get("hero");if(!l){console.warn("[renderPlayerCorpse] Hero image not loaded, cannot render corpse sprite.");return}const u={__timestamp_micros_since_unix_epoch__:0n},d={identity:t.playerIdentity,username:t.username,positionX:t.posX,positionY:t.posY,direction:"up",color:"#CCCCCC",health:0,isDead:!0,lastHitTime:void 0,jumpStartTimeMs:0n,isSprinting:!1,hunger:0,thirst:0,stamina:0,lastUpdate:u,lastStatUpdate:u,warmth:0,deathTimestamp:t.deathTime,isOnline:!1,isTorchLit:!1,lastConsumedAt:u,isCrouching:!1};pg(e,d,l,!1,!1,!1,yh,r,0,!1,void 0,void 0,!0)}function aT({ctx:e,clouds:t,cloudImages:r,worldScale:i}){if(!t||t.size===0)return;if(!r||r.size===0){console.warn("[renderCloudsDirectly] No cloudImages map or it is empty.");return}const n=1.5;t.forEach(s=>{const{id:a,currentRenderPosX:l,currentRenderPosY:u,width:d,height:p,rotationDegrees:f,baseOpacity:_,blurStrength:T,shape:w}=s,S=w.tag.match(/(\d+)$/);let I="cloud1.png";S&&S[1]&&(I=`cloud${S[1]}.png`);const m=r.get(I);if(!m)return;const g=l,y=u,v=d*i*n,C=p*i*n;e.save(),e.translate(g*i,y*i),e.rotate(f*Math.PI/180);const k=Math.min(_*1.5,.15);e.globalAlpha=k;let M="brightness(0%)";T>0&&(M+=` blur(${T*i}px)`),e.filter=M,e.drawImage(m,-v/2,-C/2,v,C),e.restore()}),e.filter="none",e.globalAlpha=1}const oR=({onRespawnRandomly:e,onRespawnAtBag:t,localPlayerIdentity:r,sleepingBags:i,players:n,trees:s,stones:a,campfires:l,playerPin:u,sleepingBagImage:d,localPlayerCorpse:p,deathMarkerImage:f,worldState:_})=>{const T=b.useRef(null),[w,S]=b.useState({width:hr.width,height:hr.height}),[I,m]=b.useState(null),g=1,y={x:0,y:0},v=r?n.get(r):void 0,C=b.useMemo(()=>{const U=new Map;return r?(console.log("[DeathScreen] Calculating owned bags. Identity:",r,"Received bags map:",i),i.forEach(F=>{console.log(`[DeathScreen] Checking bag ID ${F.id}, placedBy: ${F.placedBy.toHexString()}`),F.placedBy.toHexString()===r&&(console.log(`[DeathScreen] -- Found owned bag: ${F.id}`),U.set(F.id,F))}),console.log("[DeathScreen] Final ownedBags map size:",U.size),U):(console.log("[DeathScreen] No localPlayerIdentity, cannot find owned bags."),U)},[i,r]),k=b.useMemo(()=>new Set(C.keys()),[C]);b.useEffect(()=>{const U=T.current;if(!U)return;const F=U.getContext("2d");if(!F)return;const j=Ae.worldWidth*Ae.tileSize,Y=Ae.worldHeight*Ae.tileSize,{currentScale:B,drawOffsetX:$,drawOffsetY:H}=Ip(w.width,w.height,j,Y,g);if(Y0({ctx:F,players:n,trees:s,stones:a,campfires:l,sleepingBags:i,localPlayer:void 0,localPlayerId:r??void 0,playerPin:null,canvasWidth:w.width,canvasHeight:w.height,isMouseOverMinimap:!1,zoomLevel:g,viewCenterOffset:y,isDeathScreen:!0,ownedSleepingBagIds:k,sleepingBagImage:d,localPlayerCorpse:p,deathMarkerImage:f,worldState:_}),I){const q=C.get(I);if(q){const N=vp(q.posX,q.posY,0,0,w.width,w.height,$,H,B);N&&(F.strokeStyle="#FFFFFF",F.lineWidth=2,F.beginPath(),F.arc(N.x,N.y,8,0,Math.PI*2),F.stroke())}}},[n,s,a,i,k,I,w.width,w.height,v,r,g,y,d,l,p,f,_]);const M=b.useCallback(U=>{const F=T.current;if(!F)return;const j=F.getBoundingClientRect(),Y=U.clientX-j.left,B=U.clientY-j.top,$=Ae.worldWidth*Ae.tileSize,H=Ae.worldHeight*Ae.tileSize,{currentScale:q,drawOffsetX:N,drawOffsetY:L}=Ip(w.width,w.height,$,H,g);let X=null,te=1/0;const ge=15*15;C.forEach(ue=>{const ie=vp(ue.posX,ue.posY,0,0,w.width,w.height,N,L,q);if(ie){const J=Y-ie.x,W=B-ie.y,G=J*J+W*W;G<ge&&G<te&&(te=G,X=ue.id)}}),X!==null&&(console.log("Clicked on owned sleeping bag:",X),t(X))},[C,t,w,g,y]),A=b.useCallback(U=>{const F=T.current;if(!F)return;const j=F.getBoundingClientRect(),Y=U.clientX-j.left,B=U.clientY-j.top,$=Ae.worldWidth*Ae.tileSize,H=Ae.worldHeight*Ae.tileSize,{currentScale:q,drawOffsetX:N,drawOffsetY:L}=Ip(w.width,w.height,$,H,g);let X=null,te=1/0;const ge=10*10;C.forEach(ue=>{const ie=vp(ue.posX,ue.posY,0,0,w.width,w.height,N,L,q);if(ie){const J=Y-ie.x,W=B-ie.y,G=J*J+W*W;G<ge&&G<te&&(te=G,X=ue.id)}}),m(X)},[C,w,g,y]),z=b.useCallback(()=>{m(null)},[]);return P.jsx("div",{style:vi.overlay,children:P.jsxs("div",{style:vi.container,children:[P.jsx("h1",{style:vi.title,children:"Select Respawn Point"}),P.jsx("canvas",{ref:T,width:w.width,height:w.height,style:vi.minimapCanvas,onClick:M,onMouseMove:A,onMouseLeave:z}),P.jsx("button",{onClick:e,style:vi.buttonEnabled,children:"Respawn Randomly"}),C.size===0&&P.jsx("p",{style:vi.noBagsText,children:"No sleeping bags placed."})]})})},vi={overlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,fontFamily:'"Press Start 2P", cursive',color:"white"},container:{textAlign:"center",padding:"40px",backgroundColor:"rgba(50, 50, 50, 0.8)",borderRadius:"10px"},title:{color:"#DC143C",fontSize:"2.5em",marginBottom:"20px",textShadow:"2px 2px 4px #000000"},buttonEnabled:{padding:"15px 30px",fontSize:"1.2em",fontFamily:'"Press Start 2P", cursive',backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background-color 0.3s"},minimapCanvas:{border:"1px solid #a0a0c0",marginBottom:"20px",cursor:"pointer"},noBagsText:{marginTop:"15px",fontSize:"0.9em",color:"#cccccc"}},lT="/assets/bone-B3ABvVgV.png",aR="/assets/bone-B3ABvVgV.png",lR="/assets/bone-B3ABvVgV.png",cR="/assets/bone-B3ABvVgV.png",uR="/assets/pick_axe-CWbC1pX3.png",pR="/assets/bone-B3ABvVgV.png",dR="/assets/bone-B3ABvVgV.png",fR="/assets/bone-B3ABvVgV.png",gR="/assets/bone-B3ABvVgV.png",hR="/assets/bone-B3ABvVgV.png",yR="/assets/bone-B3ABvVgV.png",mR="/assets/bone-B3ABvVgV.png",TR="/assets/bone-B3ABvVgV.png",_R="/assets/bone-B3ABvVgV.png",SR="/assets/bone-B3ABvVgV.png",wR="/assets/bone-B3ABvVgV.png",bR="/assets/bone-B3ABvVgV.png",vR="/assets/bone-B3ABvVgV.png",IR="/assets/bone-B3ABvVgV.png",AR="/assets/bandage-DNqZKjOb.png",CR="/assets/bone-B3ABvVgV.png",xR="/assets/torch_on-BqdixKMW.png",ER="/assets/bone-B3ABvVgV.png",RR="/assets/spear-CgQEtNEt.png",kR="/assets/bone-B3ABvVgV.png",zR="/assets/cooked_mushroom-C_Fi4Vcl.png",FR="/assets/burnt_mushroom-Ct8ItPeM.png",MR="/assets/bone-B3ABvVgV.png",OR="/assets/bone-B3ABvVgV.png",DR="/assets/bone-B3ABvVgV.png",UR="/assets/bone-B3ABvVgV.png",PR="/assets/bone-B3ABvVgV.png",NR="/assets/bone-B3ABvVgV.png",BR="/assets/bone-B3ABvVgV.png",HR="/assets/bone-B3ABvVgV.png",LR="/assets/bone-B3ABvVgV.png",YR="/assets/bone-B3ABvVgV.png",$R="/assets/bone-B3ABvVgV.png",WR="/assets/bow-CKOEgntF.png",XR="/assets/bone-B3ABvVgV.png",jR="/assets/bone_club-CKfEZM2b.png",qR="/assets/bone_knife-l7YrI4KH.png",VR="/assets/skull-CK92uCNe.png",KR="/assets/bone-B3ABvVgV.png",GR="/assets/bone-B3ABvVgV.png",sw={"wood.png":aR,"stone.png":lR,"wood_hatchet.png":cR,"pick_axe.png":uR,"campfire.png":pR,"rock_item.png":dR,"cloth_shirt.png":fR,"cloth_pants.png":gR,"cloth_hood.png":hR,"cloth_gloves.png":yR,"cloth_boots.png":mR,"burlap_sack.png":e0,"burlap_backpack.png":TR,"mushroom.png":_R,"corn.png":SR,"wooden_storage_box.png":wR,"sleeping_bag.png":bR,"cloth.png":vR,"plant_fiber.png":IR,"bandage.png":AR,"torch.png":CR,"torch_on.png":xR,"charcoal.png":ER,"spear.png":RR,"stash.png":kR,"cooked_mushroom.png":zR,"burnt_mushroom.png":FR,"cooked_corn.png":MR,"burnt_corn.png":OR,"pumpkin.png":DR,"cooked_pumpkin.png":UR,"burnt_pumpkin.png":PR,"combat_ladle.png":NR,"death_marker.png":BR,"stone_spear.png":HR,"burlap_cape.png":LR,"wooden_arrow.png":YR,"bone_arrow.png":$R,"bow.png":WR,"bone_fragments.png":XR,"bone_club.png":jR,"bone_knife.png":qR,"skull.png":VR,"animal_fat.png":KR,"bone.png":GR};function su(e){if(!e)return console.log("[ItemIconUtils] assetName is missing, returning errorIcon"),lT;const t=sw[e];return t||console.log(`[ItemIconUtils] No icon found in map for '${e}', returning errorIcon. Mapped value:`,t),t||lT}const dg=sw,QR=40,JR=({players:e,trees:t,clouds:r,stones:i,campfires:n,mushrooms:s,corns:a,pumpkins:l,hemps:u,droppedItems:d,woodenStorageBoxes:p,sleepingBags:f,playerCorpses:_,stashes:T,playerPins:w,inventoryItems:S,itemDefinitions:I,activeConsumableEffects:m,worldState:g,localPlayerId:y,connection:v,activeEquipments:C,activeConnections:k,placementInfo:M,placementActions:A,placementError:z,onSetInteractingWith:U,updatePlayerPosition:F,callJumpReducer:j,callSetSprintingReducer:Y,isMinimapOpen:B,setIsMinimapOpen:$,isChatting:H,messages:q,isSearchingCraftRecipes:N,showInventory:L})=>{var Ho;const X=b.useRef(null),te=b.useRef(new Map),ge=b.useRef(A),ue=b.useRef(void 0),[ie,J]=b.useState(new Set);b.useEffect(()=>{ge.current=A},[A]);const W=b.useMemo(()=>{if(y)return e.get(y)},[e,y]),{canvasSize:G,cameraOffsetX:Q,cameraOffsetY:K}=t0(W),{heroImageRef:x,grassImageRef:E,itemImagesRef:re,cloudImagesRef:Z}=nA(),{worldMousePos:V}=iA({canvasRef:X,cameraOffsetX:Q,cameraOffsetY:K,canvasSize:G}),oe=b.useMemo(()=>{var De;return(De=re.current)==null?void 0:De.get("death_marker.png")},[re]),Me=b.useMemo(()=>{if(y&&_ instanceof Map&&W&&W.identity){let De=BigInt(-1),Je=null;return _.forEach(Se=>{if(Se.playerIdentity.isEqual(W.identity))try{const it=Se.deathTime.__timestamp_micros_since_unix_epoch__;typeof it=="bigint"?it>De&&(De=it,Je=Se):console.error(`[GameCanvas] Corpse ID ${Se.id} deathTime.__timestamp_micros_since_unix_epoch__ was not a bigint. Actual type: ${typeof it}, value: ${it}. Timestamp structure:`,Se.deathTime)}catch(it){console.error(`[GameCanvas] Error processing deathTime for corpse ID ${Se.id}:`,it,"Full timestamp object:",Se.deathTime)}}),Je}else return null},[y,_,W]),{overlayRgba:pt,maskCanvasRef:dt}=SA({worldState:g,campfires:n,players:e,activeEquipments:C,itemDefinitions:I,cameraOffsetX:Q,cameraOffsetY:K,canvasSize:G}),{closestInteractableMushroomId:fe,closestInteractableCornId:ne,closestInteractablePumpkinId:pe,closestInteractableHempId:be,closestInteractableCampfireId:Te,closestInteractableDroppedItemId:ye,closestInteractableBoxId:xe,isClosestInteractableBoxEmpty:Fe,closestInteractableCorpseId:rt,closestInteractableStashId:Ee,closestInteractableSleepingBagId:Qe}=zA({localPlayer:W,mushrooms:s,corns:a,pumpkins:l,hemps:u,campfires:n,droppedItems:d,woodenStorageBoxes:p,playerCorpses:_,stashes:T,sleepingBags:f}),At=KI(150,4),{interactionProgress:nt,isActivelyHolding:Nt,processInputsAndActions:Be}=Nx({canvasRef:X,connection:v,localPlayerId:y,localPlayer:W??null,activeEquipments:C,itemDefinitions:I,placementInfo:M,placementActions:A,worldMousePos:V,closestInteractableMushroomId:fe,closestInteractableCornId:ne,closestInteractablePumpkinId:pe,closestInteractableHempId:be,closestInteractableCampfireId:Te,closestInteractableDroppedItemId:ye,closestInteractableBoxId:xe,isClosestInteractableBoxEmpty:Fe,woodenStorageBoxes:p,isMinimapOpen:B,setIsMinimapOpen:$,onSetInteractingWith:U,isChatting:H,closestInteractableCorpseId:rt,closestInteractableStashId:Ee,stashes:T,isSearchingCraftRecipes:N,isInventoryOpen:L}),{visibleSleepingBags:he,visibleMushrooms:qe,visibleCorns:He,visiblePumpkins:Ke,visibleDroppedItems:Re,visibleCampfires:ve,visibleMushroomsMap:ke,visibleCampfiresMap:Ue,visibleDroppedItemsMap:Ne,visibleBoxesMap:at,visibleCornsMap:Pr,visiblePumpkinsMap:Ro,visibleHempsMap:Ru,visiblePlayerCorpses:ku,visibleStashes:zu,visiblePlayerCorpsesMap:Fu,visibleSleepingBagsMap:Mu,visibleTrees:ms,visibleTreesMap:Ou,ySortedEntities:Ts}=_1(e,t,i,n,s,a,l,u,d,p,f,_,T,Q,K,G.width,G.height),{hoveredPlayerIds:ko,handlePlayerHover:zo}=Bx(),{minimapZoom:Fo,isMouseOverMinimap:Mo,localPlayerPin:_s,viewCenterOffset:Oo}=p1({canvasRef:X,isMinimapOpen:B,connection:v,localPlayer:W,playerPins:w,localPlayerId:y,canvasSize:G}),Du=!!(W!=null&&W.isDead&&v),Uu=M?"cell":"crosshair";b.useEffect(()=>{Object.entries(dg).forEach(([De,Je])=>{if(Je&&typeof Je=="string"&&!re.current.has(De)){const Se=new Image;Se.src=Je,Se.onload=()=>{re.current.set(De,Se)},Se.onerror=()=>console.error(`Failed to preload item image asset: ${De} (Source: ${Je})`)}})},[re]);const Do=b.useRef(performance.now()),[Ss,Pu]=b.useState(0),ws=pE({serverClouds:r,deltaTime:Ss}),Uo=H1({visibleCampfiresMap:Ue,deltaTime:Ss}),Po=cE({players:e,activeEquipments:C,itemDefinitions:I,deltaTime:Ss}),No=b.useCallback((De,Je)=>{Je.length&&(Je.forEach(Se=>{const it=Math.floor(Se.x),Jt=Math.floor(Se.y),gt=Math.max(1,Math.floor(Se.size));Se.type==="smoke"&&Se.color==="#000000"&&console.log(`[RenderParticles] Rendering SMOKE BURST particle: ID=${Se.id}, X=${it}, Y=${Jt}, Size=${gt}, Alpha=${Se.alpha}, Color=${Se.color}`),De.globalAlpha=Se.alpha,Se.type==="fire"&&Se.color?(De.fillStyle=Se.color,De.fillRect(it-Math.floor(gt/2),Jt-Math.floor(gt/2),gt,gt)):Se.type==="smoke"?(De.fillStyle="rgba(160, 160, 160, 1)",De.fillRect(it-Math.floor(gt/2),Jt-Math.floor(gt/2),gt,gt)):Se.type==="smoke_burst"&&Se.color&&(De.fillStyle=Se.color,De.fillRect(it-Math.floor(gt/2),Jt-Math.floor(gt/2),gt,gt))}),De.globalAlpha=1)},[]),Bo=b.useCallback(()=>{var Lo;const De=X.current,Je=dt.current;if(!De||!Je)return;const Se=De.getContext("2d");if(!Se)return;const it=Date.now(),Jt=V.x,gt=V.y,mn=G.width,Qr=G.height,Ar=(g==null?void 0:g.cycleProgress)??.375;Se.clearRect(0,0,mn,Qr),Se.fillStyle="#000000",Se.fillRect(0,0,mn,Qr),Se.save(),Se.translate(Q,K),dE(Se,E,Q,K,mn,Qr);let _i=!1;if(M&&W&&Jt!==null&&gt!==null){const Pe=(Jt-W.positionX)**2+(gt-W.positionY)**2,dr=CA*1.1;Pe>dr&&(_i=!0)}ve.forEach(Pe=>{n0(Se,Pe,it,Ar,!0)}),Ke.forEach(Pe=>{ew(Se,Pe,it,Ar,!0)}),qe.forEach(Pe=>{J0(Se,Pe,it,Ar,!0)}),ms&&ms.forEach(Pe=>{W0(Se,Pe,it,Ar,!0)}),r&&r.size>0&&Z.current&&aT({ctx:Se,clouds:ws,cloudImages:Z.current,worldScale:1}),Re.forEach(Pe=>{const dr=I.get(Pe.itemDefId.toString());G0({ctx:Se,item:Pe,itemDef:dr,nowMs:it,cycleProgress:Ar})}),he.forEach(Pe=>{tR(Se,Pe,it,Ar)}),Ts.forEach(({type:Pe,entity:dr})=>{if(Pe==="player"){const Cr=dr,Jr=Cr.identity.toHexString();y&&Jr===y&&console.log(`[GameCanvas] Rendering local player ${Cr.username} (ID: ${Jr}). isDead: ${Cr.isDead}, lastHitTime: ${Cr.lastHitTime?Cr.lastHitTime.__timestamp_micros_since_unix_epoch__:"null"}`);const fr=te.current.get(Jr);fr!=null&&fr.x,fr!=null&&fr.y,qE({ctx:Se,ySortedEntities:Ts,heroImageRef:x,lastPositionsRef:te,activeConnections:k,activeEquipments:C,activeConsumableEffects:m,itemDefinitions:I,itemImagesRef:re,worldMouseX:Jt,worldMouseY:gt,localPlayerId:y,animationFrame:At,nowMs:it,hoveredPlayerIds:ko,onPlayerHover:zo,cycleProgress:Ar,renderPlayerCorpse:vs=>{const Zr=vs;return!Zr||typeof Zr!="object"?(console.error("[GameCanvas] Invalid corpse data:",vs),null):sR({ctx:Se,corpse:Zr,nowMs:Zr.deathTime?Number(Zr.deathTime.microsSinceUnixEpoch/1000n):it,itemImagesRef:re,worldScale:1,cameraOffsetX:Q,cameraOffsetY:K})}})}}),Se&&(No(Se,Uo),No(Se,Po)),GE({ctx:Se,mushrooms:ke,corns:Pr,pumpkins:Ro,hemps:Ru,campfires:Ue,droppedItems:Ne,woodenStorageBoxes:at,playerCorpses:Fu,stashes:T,sleepingBags:Mu,players:e,itemDefinitions:I,closestInteractableMushroomId:fe,closestInteractableCornId:ne,closestInteractablePumpkinId:pe,closestInteractableHempId:be,closestInteractableCampfireId:Te,closestInteractableDroppedItemId:ye,closestInteractableBoxId:xe,isClosestInteractableBoxEmpty:Fe,closestInteractableCorpseId:rt,closestInteractableStashId:Ee,closestInteractableSleepingBagId:Qe}),rR({ctx:Se,placementInfo:M,itemImagesRef:re,worldMouseX:Jt,worldMouseY:gt,isPlacementTooFar:_i,placementError:z}),r&&r.size>0&&Z.current&&aT({ctx:Se,clouds:ws,cloudImages:Z.current,worldScale:1}),Se.restore(),pt!=="transparent"&&pt!=="rgba(0,0,0,0.00)"&&Je&&Se.drawImage(Je,0,0);const bs=(Pe,dr,Cr,Jr,fr,vs)=>{if(!nt)return;const Zr=typeof dr=="bigint"?BigInt(nt.targetId??0):Number(nt.targetId??0);if(nt.targetType===Pe&&Zr===dr&&Nt){const Lu=Math.min(Math.max((Date.now()-nt.startTime)/xi,0),1);nR(Se,Cr+Q,Jr+K-fr/2-15,Lu)}};if(Ue.forEach(Pe=>{bs("campfire",Pe.id,Pe.posX,Pe.posY,Kr)}),at.forEach(Pe=>{nt&&nt.targetId===Pe.id&&nt.targetType==="wooden_storage_box"&&bs("wooden_storage_box",Pe.id,Pe.posX,Pe.posY,hh)}),T instanceof Map&&T.forEach(Pe=>{nt&&nt.targetId===Pe.id&&nt.targetType==="stash"&&bs("stash",Pe.id,Pe.posX,Pe.posY,QR)}),Se.save(),Se.globalCompositeOperation="lighter",Ue.forEach(Pe=>{yA({ctx:Se,campfire:Pe,cameraOffsetX:Q,cameraOffsetY:K})}),e.forEach(Pe=>{hA({ctx:Se,player:Pe,activeEquipments:C,itemDefinitions:I,cameraOffsetX:Q,cameraOffsetY:K})}),Se.restore(),B){const Pe=e instanceof Map?e:new Map,dr=t instanceof Map?t:new Map,Cr=i instanceof Map?i:new Map,Jr=f instanceof Map?f:new Map,fr=n instanceof Map?n:new Map;Y0({ctx:Se,players:Pe,trees:dr,stones:Cr,campfires:fr,sleepingBags:Jr,localPlayer:W,localPlayerId:y,viewCenterOffset:Oo,playerPin:_s,canvasWidth:mn,canvasHeight:Qr,isMouseOverMinimap:Mo,zoomLevel:Fo,sleepingBagImage:(Lo=re.current)==null?void 0:Lo.get("sleeping_bag.png"),localPlayerCorpse:Me,deathMarkerImage:oe,worldState:g})}},[qe,He,Ke,Re,ve,he,Ts,ke,Pr,Ro,Ue,Ne,at,e,I,t,i,g,y,W,C,_s,Oo,re,x,E,Z,Q,K,G.width,G.height,V.x,V.y,At,M,z,pt,dt,fe,ne,pe,Te,ye,xe,Fe,nt,ko,zo,q,B,Mo,Fo,k,m,ku,zu,he,Uo,Po,ws,N,g==null?void 0:g.cycleProgress,ms,Ou,_,L]),Nu=b.useCallback(()=>{const De=performance.now(),Je=De-Do.current;Do.current=De,Pu(Je>0?Je:0),Be(),Bo()},[Be,Bo]);FA(Nu);const Bu=b.useMemo(()=>{const De=new Map;return f instanceof Map&&f.forEach(Je=>{De.set(Je.id,Je)}),De},[f]),Hu=b.useMemo(()=>G.width===0||G.height===0?null:{minX:-Q,minY:-K,maxX:-Q+G.width,maxY:-K+G.height},[Q,K,G.width,G.height]);return $0({connection:v,cancelPlacement:A.cancelPlacement,viewport:Hu}),b.useEffect(()=>{if(W&&Ue){const De=W.health,Je=ue.current;if(Je!==void 0)if(De<Je){const Se=new Set;Ue.forEach((it,Jt)=>{if(it.isBurning&&!it.isDestroyed){const gt=W.positionX-it.posX,mn=it.posY-aA,Qr=W.positionY-mn,Ar=gt*gt+Qr*Qr,_i=$y*$y;Ar<_i&&(Se.add(Jt.toString()),console.log(`[GameCanvas] Player took damage near burning campfire ${Jt}. Health: ${Je} -> ${De}`))}}),J(Se)}else ie.size>0&&J(new Set);ue.current=De}else ie.size>0&&J(new Set),W||(ue.current=void 0)},[W,Ue]),P.jsxs("div",{style:{position:"relative",width:G.width,height:G.height,overflow:"hidden"},children:[P.jsx("canvas",{ref:X,id:"game-canvas",width:G.width,height:G.height,style:{position:"absolute",left:0,top:0,cursor:Uu},onContextMenu:De=>{M&&De.preventDefault()}}),Du&&P.jsx(oR,{onRespawnRandomly:()=>{var De;console.log("Respawn Randomly Clicked"),(De=v==null?void 0:v.reducers)==null||De.respawnRandomly()},onRespawnAtBag:De=>{var Je;console.log("Respawn At Bag Clicked:",De),(Je=v==null?void 0:v.reducers)==null||Je.respawnAtSleepingBag(De)},localPlayerIdentity:y??null,sleepingBags:Bu,players:e,trees:t,stones:i,campfires:n,playerPin:_s,sleepingBagImage:(Ho=re.current)==null?void 0:Ho.get("sleeping_bag.png"),localPlayerCorpse:Me,deathMarkerImage:oe,worldState:g})]})},ZR=zn.memo(JR),ek="_inventoryPanel_15gr3_1",tk="_closeButton_15gr3_26",rk="_leftPane_15gr3_46",nk="_middlePane_15gr3_58",ik="_rightPane_15gr3_66",sk="_slot_15gr3_83",ok="_equipmentGrid_15gr3_95",ak="_inventoryGrid_15gr3_130",lk="_craftingHeader_15gr3_152",ck="_craftableItemsSection_15gr3_157",uk="_craftingQueueSection_15gr3_176",pk="_queueTitle_15gr3_187",dk="_craftingQueueList_15gr3_195",fk="_queueItem_15gr3_205",gk="_queueItemSlot_15gr3_214",hk="_queueItemName_15gr3_221",yk="_cancelButton_15gr3_228",mk="_interactionButton_15gr3_249",Tk="_lightFireButton_15gr3_271",_k="_extinguishButton_15gr3_280",Sk="_emptyQueueText_15gr3_298",wk="_sectionTitle_15gr3_306",bk="_scrollableSection_15gr3_360",vk="_craftableItemsList_15gr3_384",Ik="_craftingRecipeRow_15gr3_390",Ak="_recipeOutputIcon_15gr3_400",Ck="_recipeDetails_15gr3_412",xk="_recipeName_15gr3_418",Ek="_recipeIngredients_15gr3_425",Rk="_recipeTime_15gr3_429",kk="_craftingControls_15gr3_435",zk="_quantityInput_15gr3_442",Fk="_maxButton_15gr3_462",Mk="_cancelAllButton_15gr3_487",Ok="_craftButton_15gr3_517",Dk="_craftingSearchBarContainer_15gr3_550",Uk="_craftingSearchInput_15gr3_555",Pk="_equipmentSlot_15gr3_578",Nk="_slotLabel_15gr3_584",Ie={inventoryPanel:ek,closeButton:tk,leftPane:rk,middlePane:nk,rightPane:ik,slot:sk,equipmentGrid:ok,inventoryGrid:ak,craftingHeader:lk,craftableItemsSection:ck,craftingQueueSection:uk,queueTitle:pk,craftingQueueList:dk,queueItem:fk,queueItemSlot:gk,queueItemName:hk,cancelButton:yk,interactionButton:mk,lightFireButton:Tk,extinguishButton:_k,emptyQueueText:Sk,sectionTitle:wk,scrollableSection:bk,craftableItemsList:vk,craftingRecipeRow:Ik,recipeOutputIcon:Ak,recipeDetails:Ck,recipeName:xk,recipeIngredients:Ek,recipeTime:Rk,craftingControls:kk,quantityInput:zk,maxButton:Fk,cancelAllButton:Mk,craftButton:Ok,craftingSearchBarContainer:Dk,craftingSearchInput:Uk,equipmentSlot:Pk,slotLabel:Nk},Bk="_draggableItem_sz52c_1",Hk="_itemImage_sz52c_19",Lk="_itemQuantity_sz52c_27",Yk="_dragGhost_sz52c_44",$k="_ghostQuantity_sz52c_59",Wk="_isDraggingFeedback_sz52c_74",Ii={draggableItem:Bk,itemImage:Hk,itemQuantity:Lk,dragGhost:Yk,ghostQuantity:$k,isDraggingFeedback:Wk},ti=({item:e,sourceSlot:t,onItemDragStart:r,onItemDrop:i,onContextMenu:n,onMouseEnter:s,onMouseLeave:a,onMouseMove:l})=>{const u=b.useRef(null),d=b.useRef(null),p=b.useRef(null),[f,_]=b.useState(!1),T=b.useRef(!1),w=b.useRef({x:0,y:0}),S=b.useRef(!1),I=b.useCallback((k,M)=>{d.current&&document.body.contains(d.current)&&document.body.removeChild(d.current);const A=document.createElement("div");A.id="drag-ghost",A.className=Ii.dragGhost,A.style.left=`${k.clientX+10}px`,A.style.top=`${k.clientY+10}px`;const z=document.createElement("img");z.src=su(e.definition.iconAssetName)||"",z.alt=e.definition.name,z.style.width="40px",z.style.height="40px",z.style.objectFit="contain",z.style.imageRendering="pixelated",A.appendChild(z);const U=M??(e.definition.isStackable&&e.instance.quantity>1?e.instance.quantity:null);if(U){const F=document.createElement("div");F.textContent=U.toString(),F.className=Ii.ghostQuantity,A.appendChild(F)}document.body.appendChild(A),d.current=A},[e]),m=b.useCallback(k=>{if(!T.current)return;const M=k.clientX-w.current.x,A=k.clientY-w.current.y,z=M*M+A*A,U=2*2;d.current?(d.current.style.left=`${k.clientX+10}px`,d.current.style.top=`${k.clientY+10}px`):z>=U&&(S.current=!0,I(k,p.current))},[I]),g=b.useCallback(k=>{var U,F;const M=S.current;if(!T.current){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g);return}document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g);let A=null,z=!1;if(d.current){d.current.style.display="none";const j=document.elementFromPoint(k.clientX,k.clientY);if(j){const Y=j.closest("[data-slot-type]");if(Y){const B=Y.getAttribute("data-slot-type"),$=Y.getAttribute("data-slot-index"),H=Y.getAttribute("data-slot-parent-id");if(B&&$!==null){const q=B==="inventory"||B==="hotbar"||B==="campfire_fuel"||B==="wooden_storage_box"?parseInt($,10):$;let N;if(H)try{N=BigInt(H)}catch{const X=Number(H);isNaN(X)?console.warn(`Could not parse parentId attribute: ${H}`):N=X}if(!isNaN(q)||typeof q=="string"){const L={type:B,index:q,parentId:N};A=L,t.type===L.type&&t.index===L.index&&((U=t.parentId)==null?void 0:U.toString())===((F=L.parentId)==null?void 0:F.toString())?(z=!0,A=null):z=!0}}}}d.current&&document.body.contains(d.current)&&document.body.removeChild(d.current),d.current=null}k.button===2?M?i(z?A:null):n&&n(k,e):z&&A?i(A):M&&(A||i(null)),T.current=!1,_(!1),document.body.classList.remove("item-dragging"),u.current&&(u.current.style.opacity="1")},[m,e,t,i,n]),y=b.useCallback(k=>{S.current=!1,k.button===2&&k.preventDefault();const M=e.definition.isStackable&&e.instance.quantity>1;let A=null;M&&(k.button===1?(k.preventDefault(),k.shiftKey?A=Math.max(1,Math.floor(e.instance.quantity/3)):A=Math.max(1,Math.floor(e.instance.quantity/2))):k.button===0&&k.ctrlKey?(k.preventDefault(),A=Math.max(1,Math.floor(e.instance.quantity/2))):k.button===2&&(A=1)),p.current=A,w.current={x:k.clientX,y:k.clientY},T.current=!0,_(!0),document.body.classList.add("item-dragging"),u.current&&(u.current.style.opacity="0.5");const z={item:e,sourceSlot:t,sourceContainerType:t.type,sourceContainerEntityId:t.parentId,splitQuantity:p.current===null?void 0:p.current};r(z),document.addEventListener("mousemove",m),document.addEventListener("mouseup",g)},[e,t,r,m,g,I]),v=k=>{r({item:e,sourceSlot:t}),k.dataTransfer.setData("text/plain",e.instance.instanceId.toString())},C=k=>{n&&n(k,e)};return P.jsxs("div",{ref:u,className:`${Ii.draggableItem} ${f?Ii.isDraggingFeedback:""}`,onMouseDown:y,onDragStart:v,onDragEnd:()=>i(null),title:`${e.definition.name} (x${e.instance.quantity})`,onContextMenu:C,onMouseEnter:s?k=>s(k,e):void 0,onMouseLeave:a,onMouseMove:l,children:[P.jsx("img",{src:su(e.definition.iconAssetName),alt:e.definition.name,className:Ii.itemImage,draggable:"false"}),e.definition.isStackable&&e.instance.quantity>1&&P.jsx("div",{className:Ii.itemQuantity,children:e.instance.quantity})]})},Xk="_droppableSlot_1274i_1",jk={droppableSlot:Xk},ri=({children:e,className:t="",slotInfo:r,onItemDrop:i,isDraggingOver:n,style:s,onClick:a})=>{const l=b.useRef(null),u=`${jk.droppableSlot} ${t}`,d=r.parentId?{"data-slot-parent-id":r.parentId.toString()}:{};return P.jsx("div",{ref:l,className:u,style:s,"data-slot-type":r.type,"data-slot-index":r.index,...d,onClick:a,children:e})},qk=e=>{const{searchTerm:t,onSearchChange:r,placeholder:i="Search recipes by name, ingredients...",onFocus:n,onBlur:s}=e,a=l=>{(l.key.toLowerCase()==="g"||l.key===" ")&&l.stopPropagation()};return P.jsxs("div",{className:Ie.craftingSearchBarContainer,children:[" ",P.jsx("input",{type:"text",className:Ie.craftingSearchInput,value:t,onChange:l=>r(l.target.value),placeholder:i,onFocus:n,onBlur:s,onKeyDown:a})]})},Vk=(e,t)=>Math.max(0,Math.ceil((e-t)/1e3)),Kk=({playerIdentity:e,recipes:t,craftingQueueItems:r,itemDefinitions:i,inventoryItems:n,connection:s,onCraftingSearchFocusChange:a})=>{const[l,u]=b.useState(Date.now()),[d,p]=b.useState(new Map),[f,_]=b.useState(""),[T,w]=b.useState(new Set);b.useEffect(()=>{const A=setInterval(()=>{u(Date.now())},1e3);return()=>clearInterval(A)},[]);const S=b.useMemo(()=>{const A=new Map;return e&&Array.from(n.values()).filter(z=>z.location.tag==="Inventory"||z.location.tag==="Hotbar"?z.location.value.ownerId.isEqual(e):!1).forEach(z=>{const U=z.itemDefId.toString();A.set(U,(A.get(U)||0)+z.quantity)}),A},[n,e]),I=b.useMemo(()=>e?Array.from(r.values()).filter(A=>A.playerIdentity.isEqual(e)).sort((A,z)=>Number(A.finishTime.microsSinceUnixEpoch-z.finishTime.microsSinceUnixEpoch)):[],[r,e]),m=(A,z)=>{if(s!=null&&s.reducers)try{z>0?(s.reducers.startCraftingMultiple(A,z),w(U=>new Set(U).add(A.toString()))):console.warn("Attempted to craft with quantity 0 or less.")}catch(U){console.error("Error calling startCraftingMultiple reducer:",U)}},g=A=>{if(s!=null&&s.reducers)try{s.reducers.cancelCraftingItem(A)}catch(z){console.error("Error calling cancelCraftingItem reducer:",z)}},y=()=>{if(s!=null&&s.reducers)try{s.reducers.cancelAllCrafting()}catch(A){console.error("Error calling cancelAllCrafting reducer:",A)}},v=A=>{if(!A.ingredients||A.ingredients.length===0)return 0;let z=1/0;for(const U of A.ingredients){const F=S.get(U.itemDefId.toString())||0;U.quantity!==0&&(z=Math.min(z,Math.floor(F/U.quantity)))}return z===1/0?0:z},C=(A,z=1)=>{for(const U of A.ingredients)if((S.get(U.itemDefId.toString())||0)<U.quantity*z)return!1;return A.ingredients.length>0},k=A=>{_(A)},M=b.useMemo(()=>{if(!f.trim())return Array.from(t.values()).sort((z,U)=>{const F=C(z),j=C(U),Y=!T.has(z.recipeId.toString()),B=!T.has(U.recipeId.toString());if(F&&!j)return-1;if(!F&&j)return 1;if(F&&j){if(Y&&!B)return-1;if(!Y&&B)return 1}const $=i.get(z.outputItemDefId.toString()),H=i.get(U.outputItemDefId.toString()),q=($==null?void 0:$.name.toLowerCase())||"",N=(H==null?void 0:H.name.toLowerCase())||"";return q.localeCompare(N)});const A=f.toLowerCase();return Array.from(t.values()).filter(z=>{const U=i.get(z.outputItemDefId.toString());if(U&&U.name.toLowerCase().includes(A))return!0;for(const F of z.ingredients){const j=i.get(F.itemDefId.toString());if(j&&j.name.toLowerCase().includes(A))return!0}return!1}).sort((z,U)=>{const F=C(z),j=C(U),Y=!T.has(z.recipeId.toString()),B=!T.has(U.recipeId.toString());if(F&&!j)return-1;if(!F&&j)return 1;if(F&&j){if(Y&&!B)return-1;if(!Y&&B)return 1}const $=i.get(z.outputItemDefId.toString()),H=i.get(U.outputItemDefId.toString()),q=($==null?void 0:$.name.toLowerCase())||"",N=(H==null?void 0:H.name.toLowerCase())||"";return q.localeCompare(N)})},[t,i,f,S,T]);return P.jsxs("div",{className:Ie.rightPane,children:[" ",P.jsx("div",{className:Ie.craftingHeader,children:P.jsx("h3",{className:Ie.sectionTitle,children:"CRAFTING"})}),P.jsx(qk,{searchTerm:f,onSearchChange:k,placeholder:"Search by item or ingredient name...",onFocus:()=>a&&a(!0),onBlur:()=>a&&a(!1)}),P.jsx("div",{"data-scrollable-region":"crafting-items",className:`${Ie.craftableItemsSection} ${Ie.scrollableSection}`,children:P.jsx("div",{className:Ie.craftableItemsList,children:M.map(A=>{const z=i.get(A.outputItemDefId.toString());if(!z)return null;const U=d.get(A.recipeId.toString())||1,F=v(A),j=C(A,U)&&U<=F&&U>0,Y=$=>{let H=parseInt($.target.value,10);(isNaN(H)||H<1)&&(H=1);const q=Math.min(H,F>0?F:1);p(N=>new Map(N).set(A.recipeId.toString(),q))},B=()=>{const $=v(A);p(H=>new Map(H).set(A.recipeId.toString(),$>0?$:1))};return P.jsxs("div",{className:Ie.craftingRecipeRow,children:[P.jsx("div",{className:Ie.recipeOutputIcon,children:P.jsx("img",{src:su(z.iconAssetName),alt:z.name,style:{width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"}})}),P.jsxs("div",{className:Ie.recipeDetails,children:[P.jsx("div",{className:Ie.recipeName,children:z.name}),P.jsx("div",{className:Ie.recipeIngredients,children:A.ingredients.map(($,H)=>{const q=i.get($.itemDefId.toString()),N=S.get($.itemDefId.toString())||0,L=$.quantity*U,X=N>=L?"#aaffaa":"#ffaaaa";return P.jsxs("span",{style:{color:X,display:"block"},children:[$.quantity," x ",(q==null?void 0:q.name)||"Unknown"," (",N,")"]},H)})}),P.jsxs("div",{className:Ie.recipeTime,children:["Time: ",A.craftingTimeSecs,"s"]})]}),P.jsxs("div",{className:Ie.craftingControls,children:[P.jsx("input",{type:"number",value:U,onChange:Y,className:Ie.quantityInput,min:"1",max:F>0?F:1}),P.jsx("button",{onClick:B,className:Ie.maxButton,children:"Max"}),P.jsx("button",{onClick:()=>m(A.recipeId,U),disabled:!j,className:Ie.craftButton,children:"Craft"})]})]},A.recipeId.toString())})})}),P.jsxs("div",{className:Ie.craftingQueueSection,children:[P.jsxs("h4",{className:Ie.queueTitle,children:["CRAFTING QUEUE (",I.length,")"]}),P.jsxs("div",{"data-scrollable-region":"crafting-queue",className:`${Ie.craftingQueueList} ${Ie.scrollableSection}`,children:[I.map(A=>{const z=i.get(A.outputItemDefId.toString()),U=Vk(Number(A.finishTime.microsSinceUnixEpoch/1000n),l);return P.jsxs("div",{className:Ie.queueItem,children:[P.jsx("div",{className:`${Ie.slot} ${Ie.queueItemSlot}`,children:z&&P.jsx("img",{src:su(z.iconAssetName),alt:(z==null?void 0:z.name)||"Crafting",style:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}})}),P.jsxs("span",{className:Ie.queueItemName,children:[(z==null?void 0:z.name)||"Unknown Item"," (",U,"s)"]}),P.jsx("button",{onClick:()=>g(A.queueItemId),className:Ie.cancelButton,title:"Cancel Craft",children:"X"})]},A.queueItemId.toString())}),I.length===0&&P.jsx("p",{className:Ie.emptyQueueText,children:"Queue is empty"})]}),I.length>0&&P.jsx("button",{onClick:y,className:Ie.cancelAllButton,title:"Cancel all items in queue and refund resources",children:"Cancel All Queue"})]})]})},cT=5,uT=18,Ep=30,Rp=6,Gk=({interactionTarget:e,inventoryItems:t,itemDefinitions:r,campfires:i,woodenStorageBoxes:n,playerCorpses:s,stashes:a,currentStorageBox:l,connection:u,onItemDragStart:d,onItemDrop:p,playerId:f,onExternalItemMouseEnter:_,onExternalItemMouseLeave:T,onExternalItemMouseMove:w})=>{var G,Q;const S=(e==null?void 0:e.type)==="campfire",I=S?Number(e.id):null,m=I!==null?i.get(I.toString()):void 0,g=b.useMemo(()=>{const K=Array(cT).fill(null);return!S||!m||[m.fuelInstanceId0,m.fuelInstanceId1,m.fuelInstanceId2,m.fuelInstanceId3,m.fuelInstanceId4].forEach((E,re)=>{if(E){const Z=E.toString(),V=t.get(Z);if(V){const oe=r.get(V.itemDefId.toString());oe&&(K[re]={instance:V,definition:oe})}}}),K},[S,m,t,r]),y=(e==null?void 0:e.type)==="wooden_storage_box",v=y?Number(e.id):null,C=b.useMemo(()=>{const K=Array(uT).fill(null);return!y||!l||[l.slotInstanceId0,l.slotInstanceId1,l.slotInstanceId2,l.slotInstanceId3,l.slotInstanceId4,l.slotInstanceId5,l.slotInstanceId6,l.slotInstanceId7,l.slotInstanceId8,l.slotInstanceId9,l.slotInstanceId10,l.slotInstanceId11,l.slotInstanceId12,l.slotInstanceId13,l.slotInstanceId14,l.slotInstanceId15,l.slotInstanceId16,l.slotInstanceId17].forEach((E,re)=>{if(E){const Z=E.toString(),V=t.get(Z);if(V){const oe=r.get(V.itemDefId.toString());oe&&(K[re]={instance:V,definition:oe})}}}),K},[y,l,t,r]),k=(e==null?void 0:e.type)==="player_corpse",M=k?BigInt(e.id):null,A=(M==null?void 0:M.toString())??null,z=A!==null?s.get(A):void 0,U=b.useMemo(()=>{const K=Array(Ep).fill(null);if(!k||!z)return K;for(let x=0;x<Ep;x++){const E=`slotInstanceId${x}`,re=z[E];if(re){const Z=re.toString(),V=t.get(Z);if(V){const oe=r.get(V.itemDefId.toString());oe&&(K[x]={instance:V,definition:oe})}}}return K},[k,z,t,r]),F=(e==null?void 0:e.type)==="stash",j=F?Number(e.id):null,Y=j!==null?a.get(j.toString()):void 0,B=b.useMemo(()=>{const K=Array(Rp).fill(null);if(!F||!Y)return K;for(let x=0;x<Rp;x++){const E=`slotInstanceId${x}`,re=Y[E];if(re){const Z=re.toString(),V=t.get(Z);if(V){const oe=r.get(V.itemDefId.toString());oe&&(K[x]={instance:V,definition:oe})}}}return K},[F,Y,t,r]),$=b.useCallback((K,x)=>{_(K,x)},[_]),H=b.useCallback(()=>{T()},[T]),q=b.useCallback(K=>{w(K)},[w]),N=b.useCallback((K,x)=>{if(K.preventDefault(),!(!(u!=null&&u.reducers)||I===null))try{u.reducers.autoRemoveFuelFromCampfire(I,x)}catch(E){console.error("Error remove fuel:",E)}},[u,I]),L=b.useCallback(()=>{if(!(!(u!=null&&u.reducers)||I===null))try{u.reducers.toggleCampfireBurning(I)}catch(K){console.error("Error toggle burn:",K)}},[u,I]),X=b.useCallback((K,x,E)=>{if(K.preventDefault(),console.log("[ExtCont CtxMenu Box->Inv DEBUG PRE-GUARD]",{connectionExists:!!(u!=null&&u.reducers),itemInfoExists:!!x,boxIdNum:v}),!(!(u!=null&&u.reducers)||!x||v===null))try{u.reducers.quickMoveFromBox(v,E)}catch(re){console.error("[ExtCont CtxMenu Box->Inv]",re)}},[u,v]),te=b.useCallback((K,x,E)=>{if(K.preventDefault(),console.log("[ExtCont CtxMenu Corpse->Inv DEBUG PRE-GUARD]",{connectionExists:!!(u!=null&&u.reducers),itemInfoExists:!!x,corpseIdBigInt:M}),!(u!=null&&u.reducers)||!x||!M)return;const re=Number(M);try{u.reducers.quickMoveFromCorpse(re,E)}catch(Z){console.error("[ExtCont CtxMenu Corpse->Inv]",Z)}},[u,M]),ge=b.useCallback((K,x,E)=>{if(K.preventDefault(),!(!(u!=null&&u.reducers)||!x||j===null||!Y||Y.isHidden))try{u.reducers.quickMoveFromStash(j,E)}catch(re){console.error("[ExtCont CtxMenu Stash->Inv]",re)}},[u,j,Y]),ue=b.useCallback(()=>{if(!(!(u!=null&&u.reducers)||j===null||!Y))try{u.reducers.toggleStashVisibility(j)}catch(K){console.error("Error toggling stash visibility:",K)}},[u,j,Y]),ie=b.useMemo(()=>!S||!m?!0:m.isBurning?!1:!g.some(K=>K&&K.definition.fuelBurnDurationSecs!==void 0&&K.definition.fuelBurnDurationSecs>0&&K.instance.quantity>0),[S,m,g]);if(!e)return null;let J="External Container";S?J="CAMPFIRE":y?J="WOODEN STORAGE BOX":k?J=z!=null&&z.username?`${z.username}'s Backpack`:"Player Corpse":F&&(J=Y!=null&&Y.isHidden?"HIDDEN STASH (NEARBY)":"STASH",Y!=null&&Y.isHidden&&f!==((G=Y==null?void 0:Y.placedBy)==null?void 0:G.toHexString())&&((Q=Y==null?void 0:Y.lastSurfacedBy)==null||Q.toHexString()));const W=b.useMemo(()=>{var K,x;return!F||!Y||!f?!1:Y.isHidden?!0:((K=Y.placedBy)==null?void 0:K.toHexString())===f||((x=Y.lastSurfacedBy)==null?void 0:x.toHexString())===f},[F,Y,f]);return P.jsxs("div",{className:Ie.externalInventorySection,children:[P.jsx("h3",{className:Ie.sectionTitle,children:J}),S&&m&&P.jsx(P.Fragment,{children:P.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[P.jsx("div",{className:Ie.multiSlotContainer,style:{display:"flex",flexDirection:"row",gap:"4px"},children:Array.from({length:cT}).map((K,x)=>{const E=g[x],re={type:"campfire_fuel",index:x,parentId:I??void 0},Z=`campfire-fuel-${I??"unknown"}-${x}`;return P.jsx(ri,{slotInfo:re,onItemDrop:p,className:Ie.slot,isDraggingOver:!1,children:E&&P.jsx(ti,{item:E,sourceSlot:re,onItemDragStart:d,onItemDrop:p,onContextMenu:V=>N(V,x),onMouseEnter:V=>$(E,V),onMouseLeave:H,onMouseMove:q})},Z)})}),P.jsx("button",{onClick:L,disabled:ie,className:`${Ie.interactionButton} ${m.isBurning?Ie.extinguishButton:Ie.lightFireButton}`,title:ie&&!m.isBurning?"Requires Fuel > 0":"",children:m.isBurning?"Extinguish":"Light Fire"})]})}),S&&!m&&P.jsx("div",{children:"Error: Campfire data missing."}),y&&l&&P.jsx(P.Fragment,{children:P.jsx("div",{className:Ie.inventoryGrid,children:Array.from({length:uT}).map((K,x)=>{const E=C[x],re={type:"wooden_storage_box",index:x,parentId:v??void 0},Z=`box-${v??"unknown"}-${x}`;return P.jsx(ri,{slotInfo:re,onItemDrop:p,className:Ie.slot,isDraggingOver:!1,children:E&&P.jsx(ti,{item:E,sourceSlot:re,onItemDragStart:d,onItemDrop:p,onContextMenu:V=>X(V,E,x),onMouseEnter:V=>$(E,V),onMouseLeave:H,onMouseMove:q})},Z)})})}),y&&!l&&P.jsx("div",{children:"Error: Wooden Storage Box data missing."}),k&&z&&P.jsx(P.Fragment,{children:P.jsx("div",{className:Ie.inventoryGrid,children:Array.from({length:Ep}).map((K,x)=>{const E=U[x],Z={type:"player_corpse",index:x,parentId:M??void 0},V=`corpse-${A??"unknown"}-${x}`;return P.jsx(ri,{slotInfo:Z,onItemDrop:p,className:Ie.slot,isDraggingOver:!1,children:E&&P.jsx(ti,{item:E,sourceSlot:Z,onItemDragStart:d,onItemDrop:p,onContextMenu:oe=>te(oe,E,x),onMouseEnter:oe=>$(E,oe),onMouseLeave:H,onMouseMove:q})},V)})})}),k&&!z&&P.jsx("div",{children:"Error: Player Corpse data missing."}),F&&Y&&P.jsxs(P.Fragment,{children:[!Y.isHidden&&P.jsx("div",{className:Ie.inventoryGrid,children:Array.from({length:Rp}).map((K,x)=>{const E=B[x],re={type:"stash",index:x,parentId:j??void 0},Z=`stash-${j??"unknown"}-${x}`;return P.jsx(ri,{slotInfo:re,onItemDrop:p,className:Ie.slot,isDraggingOver:!1,children:E&&P.jsx(ti,{item:E,sourceSlot:re,onItemDragStart:d,onItemDrop:p,onContextMenu:V=>ge(V,E,x),onMouseEnter:V=>$(E,V),onMouseLeave:H,onMouseMove:q})},Z)})}),W&&P.jsx("button",{onClick:ue,className:`${Ie.interactionButton} ${Y.isHidden?Ie.lightFireButton:Ie.extinguishButton}`,children:Y.isHidden?"Surface Stash":"Hide Stash"}),Y.isHidden&&!W&&P.jsx("p",{className:Ie.infoText,children:"This stash is hidden. You might be able to surface it if you are on top of it."})]}),F&&!Y&&P.jsx("div",{children:"Error: Stash data missing."})]})},Qk="_tooltipContainer_lp52w_1",Jk="_tooltipName_lp52w_22",Zk="_common_lp52w_32",ez="_uncommon_lp52w_33",tz="_rare_lp52w_34",rz="_epic_lp52w_35",nz="_legendary_lp52w_36",iz="_tooltipCategory_lp52w_38",sz="_tooltipDescription_lp52w_46",oz="_tooltipStatsSection_lp52w_53",az="_tooltipStat_lp52w_53",lz="_statLabel_lp52w_68",cz="_statValue_lp52w_73",uz="_positive_lp52w_79",pz="_negative_lp52w_80",tn={tooltipContainer:Qk,tooltipName:Jk,common:Zk,uncommon:ez,rare:tz,epic:rz,legendary:nz,tooltipCategory:iz,tooltipDescription:sz,tooltipStatsSection:oz,tooltipStat:az,statLabel:lz,statValue:cz,positive:uz,negative:pz},dz=({content:e,visible:t,position:r})=>{if(!t||!e)return null;const i={left:`${r.x+5}px`,top:`${r.y+5}px`};return P.jsxs("div",{className:tn.tooltipContainer,style:i,children:[P.jsx("div",{className:`${tn.tooltipName} ${e.rarity?tn[e.rarity.toLowerCase()]:""}`,children:e.name}),e.category&&P.jsx("div",{className:tn.tooltipCategory,children:e.category}),e.description&&P.jsx("div",{className:tn.tooltipDescription,children:e.description}),e.stats&&e.stats.length>0&&P.jsx("div",{className:tn.tooltipStatsSection,children:e.stats.map((n,s)=>P.jsxs("div",{className:tn.tooltipStat,children:[P.jsxs("span",{className:tn.statLabel,children:[n.label,":"]}),P.jsx("span",{className:tn.statValue,style:{color:n.color},children:n.value})]},s))})]})},fz=4,gz=6,hz=fz*gz,yz=[{name:"Head",type:{tag:"Head"}},{name:"Chest",type:{tag:"Chest"}},{name:"Legs",type:{tag:"Legs"}},{name:"Feet",type:{tag:"Feet"}},{name:"Hands",type:{tag:"Hands"}},{name:"Back",type:{tag:"Back"}}],mz=({playerIdentity:e,onClose:t,inventoryItems:r,itemDefinitions:i,connection:n,activeEquipments:s,onItemDragStart:a,onItemDrop:l,draggedItemInfo:u,interactionTarget:d,campfires:p,woodenStorageBoxes:f,playerCorpses:_,stashes:T,currentStorageBox:w,startPlacement:S,cancelPlacement:I,placementInfo:m,recipes:g,craftingQueueItems:y,onCraftingSearchFocusChange:v})=>{const C=m!==null,k=b.useRef(void 0),M=b.useRef(null),[A,z]=b.useState(!1),[U,F]=b.useState(null),[j,Y]=b.useState({x:0,y:0}),B=b.useCallback(()=>{C&&I(),t()},[C,I,t]);b.useEffect(()=>{k.current&&!d&&B(),k.current=d},[d,B]);const{itemsByInvSlot:$,itemsByEquipSlot:H}=b.useMemo(()=>{const J=new Map,W=new Map;return e?(r.forEach(G=>{const Q=i.get(G.itemDefId.toString());if(Q){const K={instance:G,definition:Q},x=G.location;if(x.tag==="Inventory"){const E=x.value;E.ownerId.isEqual(e)&&J.set(E.slotIndex,K)}else if(x.tag==="Equipped"){const E=x.value;E.ownerId.isEqual(e)&&W.set(E.slotType.tag,K)}}}),{itemsByInvSlot:J,itemsByEquipSlot:W}):{itemsByInvSlot:J,itemsByEquipSlot:W}},[e,r,i]),q=b.useCallback((J,W)=>{if(M.current){const G=M.current.getBoundingClientRect(),Q=W.clientX-G.left,K=W.clientY-G.top,x=[],E=J.definition;if(E.category.tag==="Tool"){if(E.primaryTargetYieldMin!==void 0||E.primaryTargetYieldMax!==void 0){const V=E.primaryTargetYieldMin??0,oe=E.primaryTargetYieldMax??V;let Me="Primary Yield";E.primaryTargetType&&(Me=`${E.primaryTargetType.tag} Yield`),x.push({label:Me,value:oe>V?`${V}-${oe}`:`${V}`})}if(E.secondaryTargetYieldMin!==void 0||E.secondaryTargetYieldMax!==void 0){const V=E.secondaryTargetYieldMin??0,oe=E.secondaryTargetYieldMax??V;let Me="Secondary Yield";E.secondaryTargetType&&(Me=`${E.secondaryTargetType.tag} Yield`),x.push({label:Me,value:oe>V?`${V}-${oe}`:`${V}`})}}else if(E.primaryTargetDamageMin!==void 0||E.primaryTargetDamageMax!==void 0){const V=E.primaryTargetDamageMin??0,oe=E.primaryTargetDamageMax??V;x.push({label:"Damage",value:oe>V?`${V}-${oe}`:`${V}`})}if(E.pvpDamageMin!==void 0||E.pvpDamageMax!==void 0){const V=E.pvpDamageMin??0,oe=E.pvpDamageMax??V;x.push({label:"Damage",value:oe>V?`${V}-${oe}`:`${V}`})}E.bleedDamagePerTick!==void 0&&E.bleedDamagePerTick>0&&E.bleedDurationSeconds!==void 0&&x.push({label:"Bleed",value:`${E.bleedDamagePerTick}/tick for ${E.bleedDurationSeconds}s`}),E.damageResistance!==void 0&&E.damageResistance>0&&x.push({label:"Defense",value:te(E.damageResistance*100,!0)}),E.warmthBonus!==void 0&&E.warmthBonus!==0&&x.push({label:"Warmth",value:te(E.warmthBonus),color:E.warmthBonus>0?"#f0ad4e":"#5bc0de"}),E.consumableHealthGain!==void 0&&E.consumableHealthGain!==0&&x.push({label:"Health",value:`${E.consumableHealthGain>0?"+":""}${E.consumableHealthGain}`,color:E.consumableHealthGain>0?"#5cb85c":"#d9534f"}),E.consumableHungerSatiated!==void 0&&E.consumableHungerSatiated!==0&&x.push({label:"Hunger",value:`${E.consumableHungerSatiated>0?"+":""}${E.consumableHungerSatiated}`,color:"#f0ad4e"}),E.consumableThirstQuenched!==void 0&&E.consumableThirstQuenched!==0&&x.push({label:"Thirst",value:`${E.consumableThirstQuenched>0?"+":""}${E.consumableThirstQuenched}`,color:"#5bc0de"}),E.consumableStaminaGain!==void 0&&E.consumableStaminaGain!==0&&x.push({label:"Stamina",value:`${E.consumableStaminaGain>0?"+":""}${E.consumableStaminaGain}`,color:"#5cb85c"}),E.consumableDurationSecs!==void 0&&E.consumableDurationSecs>0&&x.push({label:"Duration",value:`${E.consumableDurationSecs}s`}),E.fuelBurnDurationSecs!==void 0&&E.fuelBurnDurationSecs>0&&x.push({label:"Burn Time",value:`${E.fuelBurnDurationSecs}s`});const Z={name:E.name,description:E.description,category:E.category.tag,rarity:void 0,stats:x.length>0?x:void 0};F(Z),Y({x:Q,y:K}),z(!0)}},[]),N=b.useCallback(()=>{z(!1),F(null)},[]),L=b.useCallback(J=>{if(M.current&&A){const W=M.current.getBoundingClientRect(),G=J.clientX-W.left,Q=J.clientY-W.top;Y({x:G,y:Q})}},[A]),X=b.useCallback((J,W)=>{if(J.preventDefault(),!(n!=null&&n.reducers)||!W)return;const G=BigInt(W.instance.instanceId),Q=d,K=(Q==null?void 0:Q.type)==="wooden_storage_box"?Number(Q.id):null,x=(Q==null?void 0:Q.type)==="campfire"?Number(Q.id):null,E=(Q==null?void 0:Q.type)==="player_corpse"?Number(Q.id):null,re=(Q==null?void 0:Q.type)==="stash"?Number(Q.id):null;if(E!==null){try{console.log(`[Inv CtxMenu Inv->Corpse] Corpse ${E} open. Calling quickMoveToCorpse for item ${G}`),n.reducers.quickMoveToCorpse(E,G)}catch(Z){console.error("[Inv CtxMenu Inv->Corpse] Error quick moving to corpse:",Z)}return}if(K!==null){try{n.reducers.quickMoveToBox(K,G)}catch(Z){console.error("[Inv CtxMenu Inv->Box]",Z)}return}else if(re!==null){const Z=T.get(re.toString());if(Z&&!Z.isHidden)try{console.log(`[Inv CtxMenu Inv->Stash] Stash ${re} open. Calling quickMoveToStash for item ${G}`),n.reducers.quickMoveToStash(re,G)}catch(V){console.error(`[Inv CtxMenu Inv->Stash] Error quick moving item ${G} to stash ${re}:`,V)}else console.log(`[Inv CtxMenu Inv->Stash] Stash ${re} is hidden. Cannot quick move.`);return}else if(x!==null){try{n.reducers.quickMoveToCampfire(x,G)}catch(Z){console.error("[Inv CtxMenu Inv->Campfire]",Z)}return}else if(W.definition.category.tag==="Armor"&&W.definition.equipmentSlotType!==null)try{n.reducers.equipArmorFromInventory(G)}catch(V){console.error("[Inv CtxMenu EquipArmor]",V)}else try{n.reducers.moveToFirstAvailableHotbarSlot(G)}catch(V){console.error("[Inv CtxMenu Inv->Hotbar]",V)}},[n,d,T]),te=(J,W=!1,G=!0)=>{const Q=Math.round(J*10)/10;return`${G&&Q>0?"+":""}${Q}${W?"%":""}`},ge=b.useCallback((J,W)=>{if(M.current){const G=M.current.getBoundingClientRect(),Q=W.clientX-G.left,K=W.clientY-G.top,x=[],E=J.definition;if(E.category.tag==="Tool"){if(E.primaryTargetYieldMin!==void 0||E.primaryTargetYieldMax!==void 0){const V=E.primaryTargetYieldMin??0,oe=E.primaryTargetYieldMax??V;let Me="Primary Yield";E.primaryTargetType&&(Me=`${E.primaryTargetType.tag} Yield`),x.push({label:Me,value:oe>V?`${V}-${oe}`:`${V}`})}if(E.secondaryTargetYieldMin!==void 0||E.secondaryTargetYieldMax!==void 0){const V=E.secondaryTargetYieldMin??0,oe=E.secondaryTargetYieldMax??V;let Me="Secondary Yield";E.secondaryTargetType&&(Me=`${E.secondaryTargetType.tag} Yield`),x.push({label:Me,value:oe>V?`${V}-${oe}`:`${V}`})}}else if(E.primaryTargetDamageMin!==void 0||E.primaryTargetDamageMax!==void 0){const V=E.primaryTargetDamageMin??0,oe=E.primaryTargetDamageMax??V;x.push({label:"Damage",value:oe>V?`${V}-${oe}`:`${V}`})}if(E.pvpDamageMin!==void 0||E.pvpDamageMax!==void 0){const V=E.pvpDamageMin??0,oe=E.pvpDamageMax??V;x.push({label:"PvP Damage",value:oe>V?`${V}-${oe}`:`${V}`})}E.bleedDamagePerTick!==void 0&&E.bleedDamagePerTick>0&&E.bleedDurationSeconds!==void 0&&x.push({label:"Bleed",value:`${E.bleedDamagePerTick}/tick for ${E.bleedDurationSeconds}s`}),E.damageResistance!==void 0&&E.damageResistance>0&&x.push({label:"Defense",value:te(E.damageResistance*100,!0)}),E.warmthBonus!==void 0&&E.warmthBonus!==0&&x.push({label:"Warmth",value:te(E.warmthBonus),color:E.warmthBonus>0?"#f0ad4e":"#5bc0de"}),E.consumableHealthGain!==void 0&&E.consumableHealthGain!==0&&x.push({label:"Health",value:`${E.consumableHealthGain>0?"+":""}${E.consumableHealthGain}`,color:E.consumableHealthGain>0?"#5cb85c":"#d9534f"}),E.consumableHungerSatiated!==void 0&&E.consumableHungerSatiated!==0&&x.push({label:"Hunger",value:`${E.consumableHungerSatiated>0?"+":""}${E.consumableHungerSatiated}`,color:"#f0ad4e"}),E.consumableThirstQuenched!==void 0&&E.consumableThirstQuenched!==0&&x.push({label:"Thirst",value:`${E.consumableThirstQuenched>0?"+":""}${E.consumableThirstQuenched}`,color:"#5bc0de"}),E.consumableStaminaGain!==void 0&&E.consumableStaminaGain!==0&&x.push({label:"Stamina",value:`${E.consumableStaminaGain>0?"+":""}${E.consumableStaminaGain}`,color:"#5cb85c"}),E.consumableDurationSecs!==void 0&&E.consumableDurationSecs>0&&x.push({label:"Duration",value:`${E.consumableDurationSecs}s`}),E.fuelBurnDurationSecs!==void 0&&E.fuelBurnDurationSecs>0&&x.push({label:"Burn Time",value:`${E.fuelBurnDurationSecs}s`});const Z={name:E.name,description:E.description,category:E.category.tag,rarity:void 0,stats:x.length>0?x:void 0};F(Z),Y({x:Q,y:K}),z(!0)}},[]),ue=b.useCallback(()=>{z(!1),F(null)},[]),ie=b.useCallback(J=>{if(M.current&&A){const W=M.current.getBoundingClientRect(),G=J.clientX-W.left,Q=J.clientY-W.top;Y({x:G,y:Q})}},[A]);return P.jsxs("div",{ref:M,"data-id":"inventory-panel",className:Ie.inventoryPanel,children:[P.jsx("button",{className:Ie.closeButton,onClick:B,children:"X"}),P.jsxs("div",{className:Ie.leftPane,children:[P.jsx("h3",{className:Ie.sectionTitle,children:"EQUIPMENT"}),P.jsx("div",{className:Ie.equipmentGrid,children:yz.map(J=>{const W=H.get(J.name),G={type:"equipment",index:J.name};return P.jsxs("div",{className:Ie.equipmentSlot,children:[P.jsx(ri,{slotInfo:G,onItemDrop:l,className:Ie.slot,isDraggingOver:!1,children:W&&P.jsx(ti,{item:W,sourceSlot:G,onItemDragStart:a,onItemDrop:l,onMouseEnter:Q=>q(W,Q),onMouseLeave:N,onMouseMove:L})},`equip-${J.name}`),P.jsx("div",{className:Ie.slotLabel,children:J.name})]})})})]}),P.jsxs("div",{className:Ie.middlePane,children:[P.jsx("h3",{className:Ie.sectionTitle,children:"INVENTORY"}),P.jsx("div",{className:Ie.inventoryGrid,children:Array.from({length:hz}).map((J,W)=>{const G=$.get(W),Q={type:"inventory",index:W};return P.jsx(ri,{slotInfo:Q,onItemDrop:l,className:Ie.slot,isDraggingOver:!1,children:G&&P.jsx(ti,{item:G,sourceSlot:Q,onItemDragStart:a,onItemDrop:l,onContextMenu:K=>X(K,G),onMouseEnter:K=>q(G,K),onMouseLeave:N,onMouseMove:L})},`inv-${W}`)})})]}),P.jsxs("div",{className:Ie.rightPane,children:[" ",d?P.jsx(Gk,{interactionTarget:d,inventoryItems:r,itemDefinitions:i,campfires:p,woodenStorageBoxes:f,playerCorpses:_,stashes:T,currentStorageBox:w,connection:n,onItemDragStart:a,onItemDrop:l,playerId:e?e.toHexString():null,onExternalItemMouseEnter:ge,onExternalItemMouseLeave:ue,onExternalItemMouseMove:ie}):P.jsx(Kk,{playerIdentity:e,recipes:g,craftingQueueItems:y,itemDefinitions:i,inventoryItems:r,connection:n,onCraftingSearchFocusChange:v})]}),P.jsx(dz,{content:U,visible:A,position:j})]})},Tz="rgba(40, 40, 60, 0.85)",pT="#a0a0c0",_z="2px 2px 0px rgba(0,0,0,0.5)",Sz='"Press Start 2P", cursive',dT=60,fT=6,wz="#ffffff",bz=1e6,gT=bz/1e3,hT=5e3,vz=({playerIdentity:e,localPlayer:t,itemDefinitions:r,inventoryItems:i,connection:n,onItemDragStart:s,onItemDrop:a,interactingWith:l,stashes:u,startPlacement:d,cancelPlacement:p})=>{const[f,_]=b.useState(0),[T,w]=b.useState(!1),[S,I]=b.useState(null),[m,g]=b.useState(0),y=b.useRef(null),v=b.useRef(null),C=6,k=b.useRef(null);b.useEffect(()=>()=>{y.current&&clearTimeout(y.current),v.current&&cancelAnimationFrame(v.current)},[]);const M=b.useCallback(B=>{if(!e)return null;for(const $ of i.values())if($.location.tag==="Hotbar"){const H=$.location.value;if(H.ownerId.isEqual(e)&&H.slotIndex===B){const q=r.get($.itemDefId.toString());if(q)return{instance:$,definition:q}}}return null},[e,i,r]);b.useEffect(()=>{if(T&&S!==null){const B=M(f),$=B&&B.definition.name==="Bandage"?hT:gT,H=()=>{if(S===null){v.current&&cancelAnimationFrame(v.current),w(!1),g(0);return}const q=Date.now()-S,N=Math.min(1,q/$);g(N),N<1?v.current=requestAnimationFrame(H):(w(!1),I(null),g(0))};v.current=requestAnimationFrame(H)}else v.current&&(cancelAnimationFrame(v.current),v.current=null);return()=>{v.current&&(cancelAnimationFrame(v.current),v.current=null)}},[T,S,f,M]);const A=b.useCallback(()=>{if(T)return;w(!0),I(Date.now()),g(0),y.current&&clearTimeout(y.current);const B=M(f),$=B&&B.definition.name==="Bandage"?hT:gT;y.current=setTimeout(()=>{w(!1),I(null)},$)},[T,f,M]);b.useEffect(()=>{if(t&&t.lastConsumedAt){const B=t.lastConsumedAt.microsSinceUnixEpoch,$=k.current;if($===null||B>$){const H=M(f);H&&H.definition.name==="Bandage"&&(console.log("[Hotbar] Bandage consumption detected via lastConsumedAt update. Triggering cooldown."),A())}k.current=B}},[t==null?void 0:t.lastConsumedAt,f,M,A]);const z=b.useCallback((B,$=!1)=>{const H=M(B);if(!(n!=null&&n.reducers)){if(!H&&e){p();try{n==null||n.reducers.clearActiveItemReducer(e)}catch(L){console.error("Error clearActiveItemReducer:",L)}}return}if(!H){if(e){p();try{n.reducers.clearActiveItemReducer(e)}catch(L){console.error("Error clearActiveItemReducer:",L)}}return}const q=H.definition.category.tag,N=BigInt(H.instance.instanceId);if(q==="Consumable"){if(p(),e)try{n.reducers.clearActiveItemReducer(e)}catch(L){console.error("Error clearActiveItemReducer when selecting consumable:",L)}if(!$)try{n.reducers.consumeItem(N),A()}catch(L){console.error(`Error consuming item ${N}:`,L)}}else if(q==="Armor"){p();try{n.reducers.equipArmorFromInventory(N)}catch(L){console.error("Error equipArmorFromInventory:",L)}}else if(q==="Placeable"){const L={itemDefId:BigInt(H.definition.id),itemName:H.definition.name,iconAssetName:H.definition.iconAssetName,instanceId:BigInt(H.instance.instanceId)};d(L);try{e&&n.reducers.clearActiveItemReducer(e)}catch(X){console.error("Error clearActiveItemReducer when selecting placeable:",X)}}else if(H.definition.isEquippable){p();try{n.reducers.setActiveItemReducer(N)}catch(L){console.error("Error setActiveItemReducer:",L)}}else{p();try{e&&n.reducers.clearActiveItemReducer(e)}catch(L){console.error("Error clearActiveItemReducer:",L)}}},[M,n,e,p,d,A]),U=b.useCallback(B=>{if(document.querySelector(".inventoryPanel"))return;let H=-1;if(B.code.startsWith("Digit")?H=parseInt(B.code.substring(5)):B.code.startsWith("Numpad")&&(H=parseInt(B.code.substring(6))),H!==-1&&H>=1&&H<=C){const q=H-1;_(q),z(q)}},[C,z]);b.useEffect(()=>(window.addEventListener("keydown",U),()=>{window.removeEventListener("keydown",U)}),[U]);const F=B=>{_(B),z(B)},j=(B,$)=>{if(B.preventDefault(),B.stopPropagation(),$.instance.location.tag==="Hotbar"){const q=$.instance.location.value;console.log(`[Hotbar ContextMenu] Right-clicked on: ${$.definition.name} in slot ${q.slotIndex}`)}else console.log(`[Hotbar ContextMenu] Right-clicked on: ${$.definition.name} (not in hotbar)`);if(!(n!=null&&n.reducers))return;const H=BigInt($.instance.instanceId);if((l==null?void 0:l.type)==="wooden_storage_box"){const q=Number(l.id);try{n.reducers.quickMoveToBox(q,H)}catch(N){console.error("[Hotbar ContextMenu Hotbar->Box] Failed to call quickMoveToBox reducer:",N)}return}else if((l==null?void 0:l.type)==="campfire"){const q=Number(l.id);try{n.reducers.quickMoveToCampfire(q,H)}catch(N){console.error("[Hotbar ContextMenu Hotbar->Campfire] Failed to call quickMoveToCampfire reducer:",N)}return}else if((l==null?void 0:l.type)==="player_corpse"){const q=Number(l.id);try{n.reducers.quickMoveToCorpse(q,H)}catch(N){console.error("[Hotbar ContextMenu Hotbar->Corpse] Failed to call quickMoveToCorpse reducer:",N)}return}else if((l==null?void 0:l.type)==="stash"){const q=Number(l.id),N=u.get(l.id.toString());if(N&&!N.isHidden)try{n.reducers.quickMoveToStash(q,H)}catch(L){console.error("[Hotbar ContextMenu Hotbar->Stash] Failed to call quickMoveToStash reducer:",L)}else console.log(`[Hotbar ContextMenu Hotbar->Stash] Stash ${q} is hidden or not found. Cannot quick move.`);return}else{const q=$.definition.category.tag==="Armor",N=$.definition.equipmentSlotType!==null&&$.definition.equipmentSlotType!==void 0;if(q&&N){try{n.reducers.equipArmorFromInventory(H)}catch(L){console.error("[Hotbar ContextMenu Equip] Failed to call equipArmorFromInventory reducer:",L)}return}}},Y=b.useCallback(B=>{var N,L;const $=document.querySelector('[data-id="inventory-panel"]'),H=(N=document.activeElement)==null?void 0:N.matches('[data-is-chat-input="true"]'),q=((L=document.activeElement)==null?void 0:L.id)==="craftSearchInput";$||H||q||B.deltaY===0||(B.preventDefault(),_(X=>{let te;return B.deltaY<0?te=(X-1+C)%C:te=(X+1)%C,z(te,!0),te}))},[C,z]);return b.useEffect(()=>(window.addEventListener("keydown",U),window.addEventListener("wheel",Y,{passive:!1}),()=>{window.removeEventListener("keydown",U),window.removeEventListener("wheel",Y)}),[U,Y]),P.jsx("div",{style:{position:"fixed",bottom:"15px",left:"50%",transform:"translateX(-50%)",display:"flex",backgroundColor:Tz,padding:`${fT}px`,borderRadius:"4px",border:`1px solid ${pT}`,boxShadow:_z,fontFamily:Sz,zIndex:100},children:Array.from({length:C}).map((B,$)=>{const H=M($),q={type:"hotbar",index:$};return P.jsxs(ri,{slotInfo:q,onItemDrop:a,className:void 0,onClick:()=>F($),style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:`${dT}px`,height:`${dT}px`,border:`2px solid ${$===f?wz:pT}`,backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"3px",marginLeft:$>0?`${fT}px`:"0px",transition:"border-color 0.1s ease-in-out",boxSizing:"border-box",cursor:"pointer"},isDraggingOver:!1,children:[P.jsx("span",{style:{position:"absolute",bottom:"2px",right:"4px",fontSize:"10px",color:"rgba(255, 255, 255, 0.7)",userSelect:"none",pointerEvents:"none",zIndex:3},children:$+1}),H&&P.jsx(ti,{item:H,sourceSlot:q,onItemDragStart:s,onItemDrop:a,onContextMenu:N=>j(N,H)}),T&&H&&f===$&&(H.definition.category.tag==="Consumable"||H.definition.name==="Bandage")&&P.jsx("div",{style:{position:"absolute",bottom:"0px",left:"0px",width:"100%",height:`${m*100}%`,backgroundColor:"rgba(0, 0, 0, 0.65)",borderRadius:"2px",zIndex:2,pointerEvents:"none"}})]},`hotbar-${$}`)})})},ow=zn.memo(vz),Os=({label:e,icon:t,value:r,maxValue:i,barColor:n,glow:s,hasActiveEffect:a,hasBleedEffect:l,pendingHealAmount:u=0})=>{const d=Math.max(0,Math.min(100,r/i*100)),p=Math.max(0,Math.min(100,(r+u)/i*100));zn.useEffect(()=>{if(s){const S=`statusBarGlowPulse_${n.replace(/[^a-zA-Z0-9]/g,"")}`,I=n.startsWith("#")?`${n}AA`:n;if(!document.getElementById(S)){const m=document.createElement("style");m.id=S,m.innerHTML=`
          @keyframes ${S} {
            0%   { box-shadow: 0 0 8px 2px ${I}, 0 0 0 0 ${I}; transform: scale(1); }
            50%  { box-shadow: 0 0 16px 6px ${n}, 0 0 0 0 ${n}; transform: scale(1.04); }
            100% { box-shadow: 0 0 8px 2px ${I}, 0 0 0 0 ${I}; transform: scale(1); }
          }
        `,document.head.appendChild(m)}}if(a&&!document.getElementById("status-bar-regen-keyframes")){const w=document.createElement("style");w.id="status-bar-regen-keyframes",w.innerHTML=`
          @keyframes statusBarRegenAnimation {
            0% { background-position: 0 0; }
            100% { background-position: 20px 0; }
          }
        `,document.head.appendChild(w)}if(l&&!document.getElementById("status-bar-bleed-keyframes")){const w=document.createElement("style");w.id="status-bar-bleed-keyframes",w.innerHTML=`
          @keyframes statusBarBleedAnimation {
            0% { background-position: 0 0; }
            100% { background-position: -20px 0; } /* Moves left */
          }
        `,document.head.appendChild(w)}},[s,n,a,l]);const f={height:"100%",width:`${d}%`,backgroundColor:n,transition:"box-shadow 0.2s, transform 0.2s, width 0.3s ease-in-out",boxShadow:s?`0 0 16px 6px ${n}`:void 0,animation:s?`statusBarGlowPulse_${n.replace(/[^a-zA-Z0-9]/g,"")} 1.2s infinite`:void 0,zIndex:1,position:"relative",overflow:"hidden"},_={position:"absolute",top:0,left:`${d}%`,height:"100%",width:`${Math.max(0,p-d)}%`,backgroundColor:"rgba(255, 130, 130, 0.5)",zIndex:0,transition:"width 0.3s ease-in-out, left 0.3s ease-in-out"};let T={position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2};return a?T={...T,backgroundImage:`repeating-linear-gradient(
        -45deg, 
        rgba(255, 100, 100, 0.7), /* Lighter semi-transparent red */
        rgba(255, 100, 100, 0.7) 10px,
        rgba(180, 50, 50, 0.7) 10px,  /* Darker semi-transparent red */
        rgba(180, 50, 50, 0.7) 20px
      )`,animation:"statusBarRegenAnimation 0.8s linear infinite"}:l&&(T={...T,backgroundImage:`repeating-linear-gradient(
        45deg, /* Reflected angle */
        rgba(180, 0, 0, 0.7), /* Darker red */
        rgba(180, 0, 0, 0.7) 10px,
        rgba(130, 0, 0, 0.7) 10px, /* Even darker red */
        rgba(130, 0, 0, 0.7) 20px
      )`,animation:"statusBarBleedAnimation 0.8s linear infinite"}),P.jsxs("div",{style:{marginBottom:"4px",display:"flex",alignItems:"center"},children:[P.jsx("span",{style:{marginRight:"5px",minWidth:"18px",textAlign:"center",fontSize:"14px"},children:t}),P.jsx("div",{style:{flexGrow:1},children:P.jsxs("div",{style:{height:"8px",backgroundColor:"#555",borderRadius:"2px",overflow:"hidden",border:"1px solid #333",position:"relative"},children:[P.jsx("div",{style:f,children:(a||l)&&P.jsx("div",{style:T})}),e==="HP"&&u>0&&P.jsx("div",{style:_})]})}),P.jsx("span",{style:{marginLeft:"5px",fontSize:"10px",minWidth:"30px",textAlign:"right"},children:r.toFixed(0)})]})},Iz=({notifications:e})=>{const[t,r]=b.useState([]);return b.useEffect(()=>{r(e.slice(-5))},[e]),t.length===0?null:P.jsx("div",{style:{position:"fixed",bottom:"160px",right:"15px",display:"flex",flexDirection:"column-reverse",alignItems:"flex-end",zIndex:100},children:t.map((i,n)=>{const s=n===t.length-1,a=`notification-item ${i.isFadingOut?"fading-out":""}`;return P.jsxs("div",{className:a,style:{display:"flex",alignItems:"center",backgroundColor:s?"rgba(40, 40, 55, 0.92)":"rgba(30, 30, 45, 0.9)",color:"white",padding:"6px 10px",borderRadius:"4px",border:s?"1px solid #a0a0e0":"1px solid #505070",marginBottom:"5px",boxShadow:s?"0 0 8px rgba(160, 160, 224, 0.7)":"1px 1px 0px rgba(0,0,0,0.4)",fontFamily:'"Press Start 2P", cursive',fontSize:"11px",minWidth:"180px",transition:"border 0.3s ease-out, box-shadow 0.3s ease-out"},children:[P.jsx("img",{src:dg[i.itemIcon]||dg.unknown,alt:i.itemName,style:{width:"20px",height:"20px",marginRight:"8px",imageRendering:"pixelated"}}),P.jsxs("span",{children:[`${i.quantityChange>0?"+":""}${i.quantityChange} ${i.itemName}`,i.currentTotalInInventory!==void 0&&P.jsx("span",{style:{color:"rgba(200, 200, 200, 0.9)",marginLeft:"5px"},children:`(${i.currentTotalInInventory})`})]})]},i.id)})})},Az=`
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeOutUp {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(-10px); }
  }

  .notification-item {
    /* Default styles are applied via inline style prop */
    /* Animation for fade-in is applied by default */
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .notification-item.fading-out {
    animation: fadeOutUp 0.5s ease-out forwards;
  }
`;if(!document.getElementById("item-acquisition-notification-styles")){const e=document.createElement("style");e.id="item-acquisition-notification-styles",e.type="text/css",e.innerText=Az,document.head.appendChild(e)}const Cz=zn.memo(Iz),xz=({identity:e,players:t,inventoryItems:r,itemDefinitions:i,connection:n,onItemDragStart:s,onItemDrop:a,draggedItemInfo:l,activeEquipments:u,activeConsumableEffects:d,campfires:p,onSetInteractingWith:f,interactingWith:_,startPlacement:T,cancelPlacement:w,placementInfo:S,currentStorageBox:I,recipes:m,craftingQueueItems:g,woodenStorageBoxes:y,playerCorpses:v,stashes:C,onCraftingSearchFocusChange:k,showInventory:M,onToggleInventory:A})=>{const[z,U]=b.useState(null),[F,j]=b.useState(20),[Y,B]=b.useState([]),$=3e3,H=500,q=b.useRef(new Map),{logout:N}=Au(),L=zn.useMemo(()=>{if(!z||!d||d.size===0)return!1;const ie=z.identity.toHexString();let J=!1;return d.forEach((W,G)=>{const Q=W.playerId.toHexString(),K=W.effectType?W.effectType.tag:"undefined";Q===ie&&K==="HealthRegen"&&(J=!0)}),J},[z,d]),X=zn.useMemo(()=>{if(!z||!d||d.size===0)return!1;const ie=z.identity.toHexString();let J=!1;return d.forEach(W=>{const G=W.playerId.toHexString(),Q=W.effectType?W.effectType.tag:"undefined";G===ie&&Q==="Bleed"&&(J=!0)}),J},[z,d]),te=zn.useMemo(()=>{if(!z||!d||d.size===0)return 0;const ie=z.identity.toHexString();let J=0;return d.forEach(W=>{const G=W.playerId.toHexString(),Q=W.effectType?W.effectType.tag:"undefined";G===ie&&Q==="BandageBurst"&&(J=W.totalAmount||0)}),J},[z,d]);b.useEffect(()=>{if(!e){U(null);return}const ie=t.get(e.toHexString());U(ie||null)},[e,t]),b.useEffect(()=>{if(!n)return;const ie=E=>{E&&typeof E.lowNeedThreshold=="number"&&(j(E.lowNeedThreshold),console.log("StatThresholdsConfig: low_need_threshold set to",E.lowNeedThreshold))},J=n.db.statThresholdsConfig.iter(),W=Array.from(J),G=W.length>0?W[0]:void 0;G&&ie(G);const Q=(E,re)=>ie(re),K=(E,re,Z)=>ie(Z),x=()=>{console.warn("StatThresholdsConfig row deleted from server. Reverting to default low_need_threshold (20.0)."),j(20)};return n.db.statThresholdsConfig.onInsert(Q),n.db.statThresholdsConfig.onUpdate(K),n.db.statThresholdsConfig.onDelete(x),()=>{n.db.statThresholdsConfig.removeOnInsert(Q),n.db.statThresholdsConfig.removeOnUpdate(K),n.db.statThresholdsConfig.removeOnDelete(x)}},[n]);const ge=b.useCallback((ie,J)=>{if(!i||J<=0||!n||!e)return;const W=i.get(ie.toString());if(!W){console.warn(`No item definition found for ID: ${ie}`);return}let G;if(W.category.tag==="Material"){let K=0;const x=e.toHexString();for(const E of n.db.inventoryItem.iter())E.itemDefId===ie&&(E.location.tag==="Inventory"&&E.location.value.ownerId.toHexString()===x||E.location.tag==="Hotbar"&&E.location.value.ownerId.toHexString()===x)&&(K+=E.quantity);G=K}const Q={id:`${Date.now()}-${Math.random()}`,itemDefId:ie,itemName:W.name,itemIcon:W.iconAssetName,quantityChange:J,currentTotalInInventory:G,timestamp:Date.now(),isFadingOut:!1};B(K=>[...K,Q]),setTimeout(()=>{B(K=>K.map(x=>x.id===Q.id?{...x,isFadingOut:!0}:x)),setTimeout(()=>{B(K=>K.filter(x=>x.id!==Q.id))},H)},$)},[i,n,e]);b.useEffect(()=>{if(!n||!e||!i||!r)return;const ie=e.toHexString(),J=new Map(r),W=new Map,G=new Map;J.forEach(Q=>{if((Q.location.tag==="Inventory"||Q.location.tag==="Hotbar")&&Q.location.value.ownerId.toHexString()===ie){const K=Q.itemDefId.toString();W.set(K,(W.get(K)||0)+Q.quantity)}}),q.current.forEach(Q=>{if((Q.location.tag==="Inventory"||Q.location.tag==="Hotbar")&&Q.location.value.ownerId.toHexString()===ie){const K=Q.itemDefId.toString();G.set(K,(G.get(K)||0)+Q.quantity)}}),W.forEach((Q,K)=>{const x=G.get(K)||0,E=Q-x;if(E>0){const re=i.get(K);re?ge(re.id,E):console.warn(`[PlayerUI] Notification: Item definition not found for ID ${K} during net change calculation.`)}}),q.current=J},[r,e,i,n,ge]),b.useEffect(()=>{const ie=J=>{J.key==="Tab"&&(J.preventDefault(),A(),M&&f(null))};return window.addEventListener("keydown",ie),()=>{window.removeEventListener("keydown",ie)}},[M,A,f]),b.useEffect(()=>{const ie=J=>{const W=J.target,G=document.querySelector(".inventoryPanel");if(!G||!M)return;if(!G.contains(W)){J.preventDefault();return}const Q=W.closest(".craftableItemsSection"),K=W.closest(".craftingQueueList");Q||K||J.preventDefault()};return M?(window.addEventListener("wheel",ie,{passive:!1}),document.body.style.overflow="hidden"):(window.removeEventListener("wheel",ie),document.body.style.overflow="auto"),()=>{window.removeEventListener("wheel",ie),document.body.style.overflow="auto"}},[M]),b.useEffect(()=>{_&&(M||A())},[_,M,A]);const ue=()=>{M&&A(),f(null)};return z?P.jsxs(P.Fragment,{children:[P.jsx("button",{onClick:N,style:{position:"fixed",top:"15px",right:"15px",zIndex:200,background:"#444",color:"white",border:"1px solid #888",borderRadius:"4px",padding:"8px 16px",fontFamily:'"Press Start 2P", cursive',fontSize:"12px",cursor:"pointer",boxShadow:"2px 2px 0px rgba(0,0,0,0.5)"},children:"Sign Out"}),P.jsx(Cz,{notifications:Y.slice(-5)}),P.jsxs("div",{style:{position:"fixed",bottom:"15px",right:"15px",backgroundColor:"rgba(40, 40, 60, 0.85)",color:"white",padding:"10px",borderRadius:"4px",border:"1px solid #a0a0c0",fontFamily:'"Press Start 2P", cursive',minWidth:"200px",boxShadow:"2px 2px 0px rgba(0,0,0,0.5)",zIndex:50},children:[P.jsx(Os,{label:"HP",icon:"",value:z.health,maxValue:100,barColor:"#ff4040",hasActiveEffect:L,hasBleedEffect:X,pendingHealAmount:te,glow:z.health<F}),P.jsx(Os,{label:"SP",icon:"",value:z.stamina,maxValue:100,barColor:"#40ff40"}),P.jsx(Os,{label:"Thirst",icon:"",value:z.thirst,maxValue:100,barColor:"#40a0ff",glow:z.thirst<F}),P.jsx(Os,{label:"Hunger",icon:"",value:z.hunger,maxValue:100,barColor:"#ffa040",glow:z.hunger<F}),P.jsx(Os,{label:"Warmth",icon:"",value:z.warmth,maxValue:100,barColor:"#ffcc00",glow:z.warmth<F})]}),M&&P.jsx(mz,{playerIdentity:e,onClose:ue,inventoryItems:r,itemDefinitions:i,connection:n,activeEquipments:u,onItemDragStart:s,onItemDrop:a,draggedItemInfo:l,interactionTarget:_,campfires:p,woodenStorageBoxes:y,playerCorpses:v,stashes:C,startPlacement:T,cancelPlacement:w,placementInfo:S,currentStorageBox:I,recipes:m,craftingQueueItems:g,onCraftingSearchFocusChange:k}),!S&&P.jsx(ow,{playerIdentity:e,localPlayer:z,itemDefinitions:i,inventoryItems:r,connection:n,onItemDragStart:s,onItemDrop:a,draggedItemInfo:l,interactingWith:_,campfires:p,stashes:C,startPlacement:T,cancelPlacement:w})]}):null},Ez=zn.memo(xz),Rz="rgba(40, 40, 60, 0.85)",kz="#a0a0c0",zz="2px 2px 0px rgba(0,0,0,0.5)",Fz='"Press Start 2P", cursive',Hr={dawn:"#ff9e6d",morning:"#ffde59",noon:"#ffff99",afternoon:"#ffde59",dusk:"#ff7e45",night:"#3b4a78",midnight:"#1a1a40",twilightMorning:"#c8a2c8",twilightEvening:"#8a2be2"},Mz=({worldState:e})=>{if(!e)return null;const t=()=>`linear-gradient(to right, 
      ${Hr.midnight}, 
      ${Hr.dawn}, 
      ${Hr.twilightMorning}, 
      ${Hr.morning}, 
      ${Hr.noon}, 
      ${Hr.afternoon}, 
      ${Hr.dusk}, 
      ${Hr.twilightEvening}, 
      ${Hr.night}, 
      ${Hr.midnight})`,r=`${e.cycleProgress*100}%`;return P.jsx("div",{style:{position:"fixed",top:"15px",right:"15px",backgroundColor:Rz,color:"white",padding:"10px 15px",borderRadius:"4px",border:`1px solid ${kz}`,fontFamily:Fz,boxShadow:zz,zIndex:50,width:"220px",fontSize:"10px"},children:P.jsxs("div",{style:{position:"relative",height:"16px",backgroundColor:"#333",borderRadius:"8px",overflow:"hidden",border:"1px solid #555"},children:[P.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:t()}}),P.jsx("div",{style:{position:"absolute",top:"0",left:r,transform:"translateX(-50%)",width:"4px",height:"100%",backgroundColor:"white",boxShadow:"0 0 3px 1px rgba(255,255,255,0.8)"}})]})})},Oz="_chatContainer_1npj7_3",Dz="_active_1npj7_17",Uz="_messageHistory_1npj7_21",Pz="_chatPlaceholder_1npj7_39",Nz="_message_1npj7_21",Bz="_senderName_1npj7_75",Hz="_messageText_1npj7_81",Lz="_chatInput_1npj7_85",ln={chatContainer:Oz,active:Dz,messageHistory:Uz,chatPlaceholder:Pz,message:Nz,senderName:Bz,messageText:Hz,chatInput:Lz},Yz=({messages:e,privateMessages:t,players:r,localPlayerIdentity:i,messageEndRef:n})=>{const s=b.useRef(null),a=b.useMemo(()=>{const d=[];return e.forEach(p=>d.push(p)),t.forEach(p=>d.push({...p,isPrivate:!0})),d.sort((p,f)=>{var w,S;const _=((w=p.sent)==null?void 0:w.microsSinceUnixEpoch)??0n,T=((S=f.sent)==null?void 0:S.microsSinceUnixEpoch)??0n;return _<T?-1:_>T?1:0}),d},[e,t]);b.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[a]);const l=d=>{const p=d.toHexString(),f=r.get(p);return(f==null?void 0:f.username)??p.substring(0,8)},u=d=>{const p=d.toHexString();return!r.has(p)&&p!==i};return P.jsxs("div",{ref:s,className:ln.messageHistory,children:[a.map(d=>{let p,f=d.text,_={};const T="#FFD700";let w=!1;if(d.isPrivate){const I=d;I.senderDisplayName==="SYSTEM"?(p="SYSTEM",w=!0):p=I.senderDisplayName}else{const I=d;u(I.sender)?(p="SYSTEM",w=!0):p=l(I.sender)}w&&(_={color:T,fontStyle:"italic"});const S=d.id?d.id.toString():Math.random().toString();return P.jsxs("div",{className:ln.message,style:_,children:[P.jsxs("span",{className:ln.senderName,children:[p,":"]}),P.jsx("span",{className:ln.messageText,children:f})]},S)}),P.jsx("div",{ref:n})]})},aw=b.forwardRef(({inputValue:e,onInputChange:t,onSendMessage:r,onCloseChat:i,isActive:n},s)=>{b.useEffect(()=>{if(n&&s&&"current"in s&&s.current){const d=setTimeout(()=>{if(s.current){s.current.focus();const p=s.current.value.length;s.current.setSelectionRange(p,p)}},50);return()=>clearTimeout(d)}},[n,s]);const a=()=>{e.trim()?(e.trim(),s.current._shouldSendMessage=!0,s&&"current"in s&&s.current&&s.current.blur()):i()},l=d=>{d.key==="Enter"?(d.preventDefault(),a()):d.key==="Escape"?(d.preventDefault(),s&&"current"in s&&s.current&&s.current.blur()):(d.key.toLowerCase()==="g"||d.key===" ")&&d.stopPropagation()},u=d=>{setTimeout(()=>{const p=s&&"current"in s?s.current:null;p&&p._shouldSendMessage?(p._shouldSendMessage=!1,r()):i()},10)};return P.jsx("input",{ref:s,type:"text",className:ln.chatInput,value:e,onChange:d=>t(d.target.value),onKeyDown:l,onBlur:u,placeholder:"Press Enter to chat...",maxLength:100,autoComplete:"off",spellCheck:"true","data-is-chat-input":"true"})});aw.displayName="ChatInput";const $z=({connection:e,messages:t,players:r,isChatting:i,setIsChatting:n,localPlayerIdentity:s})=>{console.log("[Chat Component Render] Props - Connection:",!!e,"LocalPlayerIdentity:",s);const[a,l]=b.useState(""),[u,d]=b.useState(new Map),p=b.useRef(null),f=b.useRef(null),_=b.useRef(0),T=b.useRef(null);b.useEffect(()=>{if(console.log("[Chat] PrivateMsgEffect: Running. Connection:",!!e,"LocalPlayerId:",s),!e||!s){if(T.current){console.log("[Chat] PrivateMsgEffect: Cleaning up old subscription (no connection/identity).");try{T.current.unsubscribe()}catch(A){console.warn("[Chat] PrivateMsgEffect: Error unsubscribing stale subscription:",A)}T.current=null}d(new Map);return}const y=`SELECT * FROM private_message WHERE recipient_identity = '${s}'`;console.log("[Chat] PrivateMsgEffect: Attempting to subscribe with query:",y);const v=e.subscriptionBuilder().onApplied(()=>console.log("[Chat] PrivateMsgEffect: Subscription APPLIED for query:",y)).onError(A=>console.error("[Chat] PrivateMsgEffect: Subscription ERROR:",A)).subscribe([y]);T.current=v,console.log("[Chat] PrivateMsgEffect: Subscription handle stored.");const C=(A,z)=>{console.log("[Chat] PrivateMsgEffect: Private message INSERTED:",z,"Context:",A),d(U=>new Map(U).set(String(z.id),z))},k=(A,z)=>{console.log("[Chat] PrivateMsgEffect: Private message DELETED:",z,"Context:",A),d(U=>{const F=new Map(U);return F.delete(String(z.id)),F})},M=e.db.privateMessage;return M?(console.log("[Chat] PrivateMsgEffect: Attaching listeners to privateMessageTable."),M.onInsert(C),M.onDelete(k)):console.error("[Chat] PrivateMsgEffect: privateMessage table NOT FOUND in DB bindings!"),()=>{if(console.log("[Chat] PrivateMsgEffect: Cleanup initiated. Unsubscribing and removing listeners."),T.current){console.log("[Chat] PrivateMsgEffect: Calling unsubscribe() on stored handle.");try{T.current.unsubscribe()}catch(A){console.warn("[Chat] PrivateMsgEffect: Error during unsubscribe:",A)}T.current=null}M&&(console.log("[Chat] PrivateMsgEffect: Removing listeners from privateMessageTable."),M.removeOnInsert(C),M.removeOnDelete(k))}},[e,s]),b.useEffect(()=>{const y=t.size,v=u.size,C=y+v;(C>_.current||i&&C>0)&&f.current&&f.current.scrollIntoView({behavior:"smooth"}),_.current=C},[t,u,i]);const w=b.useCallback(()=>{n(!1),l(""),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),document.body.focus()},[n]),S=b.useCallback(()=>{n(!0)},[n]),I=b.useCallback(y=>{if(y.ctrlKey||y.altKey||y.metaKey)return;const v=document.activeElement,C=(v==null?void 0:v.tagName)==="INPUT"||(v==null?void 0:v.tagName)==="TEXTAREA"||(v==null?void 0:v.getAttribute("contenteditable"))==="true",k=v===p.current;C&&!k||(y.key==="Enter"&&(y.preventDefault(),!i&&!C&&n(!0)),y.key==="Escape"&&i&&(y.preventDefault(),w()))},[i,n,w]),m=b.useCallback(()=>{if(!(!(e!=null&&e.reducers)||!a.trim()))try{e.reducers.sendMessage(a.trim()),l(""),n(!1)}catch(y){console.error("Error sending message:",y)}},[e,a,n]);b.useEffect(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}),[I]);const g=i?`${ln.chatContainer} ${ln.active}`:ln.chatContainer;return P.jsxs("div",{className:g,children:[P.jsx(Yz,{messages:t,privateMessages:u,players:r,localPlayerIdentity:s,messageEndRef:f}),i?P.jsx(aw,{ref:p,inputValue:a,onInputChange:l,onSendMessage:m,onCloseChat:w,isActive:i}):P.jsx("div",{className:ln.chatPlaceholder,onClick:S,children:"Press Enter to chat..."})]})},Wz=({message:e,x:t,y:r,duration:i=5e3,maxWidth:n=200})=>{const[s,a]=b.useState(!0),[l,u]=b.useState(1);return b.useEffect(()=>{const d=i-1e3,p=setTimeout(()=>{const _=setInterval(()=>{u(T=>{const w=T-.05;return w<=0?(clearInterval(_),0):w})},50);return()=>clearInterval(_)},d),f=setTimeout(()=>{a(!1)},i);return()=>{clearTimeout(p),clearTimeout(f)}},[i]),s?P.jsxs("div",{style:{position:"absolute",left:t,top:r,transform:"translate(-50%, -120%)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 12px",borderRadius:"8px",maxWidth:`${n}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",fontFamily:'"Press Start 2P", cursive, Arial, sans-serif',fontSize:"12px",lineHeight:"1.4",opacity:l,pointerEvents:"none",zIndex:1e3,whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"center",border:"2px solid rgba(255, 255, 255, 0.3)"},children:[e,P.jsx("div",{style:{position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"10px solid rgba(0, 0, 0, 0.7)"}})]}):null},Xz=({messages:e,players:t,cameraOffsetX:r,cameraOffsetY:i,localPlayerId:n})=>{const[s,a]=b.useState([]),[l,u]=b.useState(0);return b.useEffect(()=>{if(e.size>l){const d=Array.from(e.values()).sort((p,f)=>Number(f.sent.microsSinceUnixEpoch-p.sent.microsSinceUnixEpoch));if(d.length>0){const p=d[0],f=p.sender.toHexString(),_=p.id.toString();a(T=>[...T.filter(S=>S.playerId!==f),{id:_,message:p.text,playerId:f,timestamp:Date.now()}])}u(e.size)}},[e,l]),b.useEffect(()=>{const p=setInterval(()=>{const f=Date.now();a(_=>_.filter(T=>f-T.timestamp<8e3))},1e3);return()=>clearInterval(p)},[]),P.jsx(P.Fragment,{children:s.map(d=>{const p=t.get(d.playerId);if(!p)return null;const f=p.positionX+r,_=p.positionY+i-65;return P.jsx(Wz,{message:d.message,x:f,y:_},`speech-bubble-${d.id}-${d.timestamp}`)})})};function jz(e){const{cameraOffsetX:t,cameraOffsetY:r}=t0(e);return{cameraOffsetX:t,cameraOffsetY:r}}const qz=e=>{const[t,r]=b.useState(!1),{players:i,trees:n,stones:s,campfires:a,mushrooms:l,corns:u,pumpkins:d,hemps:p,droppedItems:f,woodenStorageBoxes:_,sleepingBags:T,playerPins:w,playerCorpses:S,stashes:I,inventoryItems:m,itemDefinitions:g,worldState:y,activeEquipments:v,recipes:C,craftingQueueItems:k,messages:M,activeConnections:A,localPlayerId:z,playerIdentity:U,connection:F,placementInfo:j,placementActions:Y,placementError:B,startPlacement:$,cancelPlacement:H,interactingWith:q,handleSetInteractingWith:N,draggedItemInfo:L,onItemDragStart:X,onItemDrop:te,updatePlayerPosition:ge,callJumpReducer:ue,callSetSprintingReducer:ie,isMinimapOpen:J,setIsMinimapOpen:W,isChatting:G,setIsChatting:Q,activeConsumableEffects:K,clouds:x}=e;b.useEffect(()=>{},[K]);const E=z?i.get(z):void 0,{cameraOffsetX:re,cameraOffsetY:Z}=jz(E),[V,oe]=b.useState(!1);return P.jsxs("div",{className:"game-container",children:[P.jsx(ZR,{players:i,trees:n,clouds:x,stones:s,campfires:a,mushrooms:l,hemps:p,corns:u,pumpkins:d,droppedItems:f,woodenStorageBoxes:_,sleepingBags:T,playerPins:w,playerCorpses:S,stashes:I,inventoryItems:m,itemDefinitions:g,worldState:y,activeEquipments:v,activeConnections:A,localPlayerId:z,connection:F,placementInfo:j,placementActions:Y,placementError:B,onSetInteractingWith:N,updatePlayerPosition:ge,callJumpReducer:ue,callSetSprintingReducer:ie,isMinimapOpen:J,setIsMinimapOpen:W,isChatting:G,messages:M,isSearchingCraftRecipes:V,activeConsumableEffects:K,showInventory:t}),P.jsx(Xz,{messages:M,players:i,cameraOffsetX:re,cameraOffsetY:Z,localPlayerId:z}),P.jsx(Ez,{identity:U,players:i,inventoryItems:m,itemDefinitions:g,recipes:C,craftingQueueItems:k,onItemDragStart:X,onItemDrop:te,draggedItemInfo:L,interactingWith:q,onSetInteractingWith:N,campfires:a,woodenStorageBoxes:_,playerCorpses:S,stashes:I,currentStorageBox:(q==null?void 0:q.type)==="wooden_storage_box"&&_.get(q.id.toString())||null,startPlacement:$,cancelPlacement:H,placementInfo:j,connection:F,activeEquipments:v,activeConsumableEffects:K,onCraftingSearchFocusChange:oe,onToggleInventory:()=>r(Me=>!Me),showInventory:t}),P.jsx(ow,{playerIdentity:U,localPlayer:E||null,itemDefinitions:g,inventoryItems:m,onItemDragStart:X,onItemDrop:te,draggedItemInfo:L,interactingWith:q,startPlacement:$,cancelPlacement:H,connection:F,campfires:a,stashes:I}),P.jsx(Mz,{worldState:y}),P.jsx($z,{connection:F,messages:M,players:i,isChatting:G,setIsChatting:Q,localPlayerIdentity:z})]})},Vz=({children:e})=>P.jsx(Fx,{children:P.jsx(Mx,{children:e})}),Kz=e=>{const[t,r]=b.useState(null),[i,n]=b.useState(null),s=t!==null,a=b.useCallback(f=>{r(f),n(null)},[]),l=b.useCallback(()=>{t&&(r(null),n(null))},[t]),u=b.useCallback((f,_)=>{if(!e||!t){console.warn("[PlacementManager] Attempted placement with no connection or no item selected.");return}n(null);try{switch(t.itemName){case"Camp Fire":e.reducers.placeCampfire(t.instanceId,f,_);break;case"Wooden Storage Box":e.reducers.placeWoodenStorageBox(t.instanceId,f,_);break;case"Sleeping Bag":e.reducers.placeSleepingBag(t.instanceId,f,_);break;case"Stash":e.reducers.placeStash(t.instanceId,f,_);break;default:console.error(`[PlacementManager] Unknown item type for placement: ${t.itemName}`),n(`Cannot place item: Unknown type '${t.itemName}'.`);break}}catch(T){console.error("[PlacementManager] Failed to call placement reducer (client-side error):",T);const w=(T==null?void 0:T.message)||"Failed to place item. Check logs.";n(`Placement failed: ${w}`)}},[e,t]);return[{isPlacing:s,placementInfo:t,placementError:i},{startPlacement:a,cancelPlacement:l,attemptPlacement:u}]},Gz=({connection:e,interactingWith:t,playerIdentity:r})=>{const[i,n]=b.useState(null),[s,a]=b.useState(null),l=b.useRef(null);b.useEffect(()=>{l.current=i},[i]);const u=b.useCallback(p=>{n(p),a(null),document.body.classList.add("item-dragging")},[]),d=b.useCallback(p=>{document.body.classList.remove("item-dragging");const f=l.current;if(l.current=null,n(null),a(null),!f)return;if(!(e!=null&&e.reducers)){a("Cannot perform action: Not connected to server.");return}const _=BigInt(f.item.instance.instanceId);if(p===null){const T=f.splitQuantity??f.item.instance.quantity,w={wooden_storage_box:{validateAndGetEntityId:S=>typeof S=="number"?S:null,dropReducer:e.reducers.dropItemFromBoxSlotToWorld.bind(e.reducers),splitDropReducer:e.reducers.splitAndDropItemFromBoxSlotToWorld.bind(e.reducers),containerName:"Box"},player_corpse:{validateAndGetEntityId:S=>typeof S=="bigint"?Number(S):null,dropReducer:e.reducers.dropItemFromCorpseSlotToWorld.bind(e.reducers),splitDropReducer:e.reducers.splitAndDropItemFromCorpseSlotToWorld.bind(e.reducers),containerName:"Corpse"},campfire_fuel:{validateAndGetEntityId:S=>typeof S=="number"?S:null,dropReducer:e.reducers.dropItemFromCampfireSlotToWorld.bind(e.reducers),splitDropReducer:e.reducers.splitAndDropItemFromCampfireSlotToWorld.bind(e.reducers),containerName:"Campfire"},stash:{validateAndGetEntityId:S=>typeof S=="number"?S:null,dropReducer:e.reducers.dropItemFromStashSlotToWorld.bind(e.reducers),splitDropReducer:e.reducers.splitAndDropItemFromStashSlotToWorld.bind(e.reducers),containerName:"Stash"}};try{const S=w[f.sourceContainerType||""];if(S){const I=f.sourceContainerEntityId,m=f.sourceSlot.index,g=S.validateAndGetEntityId(I);let y=null;typeof m=="number"?y=m:typeof m=="string"&&(y=parseInt(m,10),isNaN(y)&&(y=null)),g!==null&&y!==null?f.splitQuantity?(console.log(`[useDragDropManager Drop] Calling split_and_drop_item_from_${S.containerName.toLowerCase()}_slot_to_world. ${S.containerName}ID: ${g}, Slot: ${y}, Qty: ${T}`),S.splitDropReducer?S.splitDropReducer(g,y,T):(console.error(`[useDragDropManager Drop] splitDropReducer is undefined for ${S.containerName}`),a(`Configuration error: Split drop action not found for ${S.containerName.toLowerCase()}.`))):(console.log(`[useDragDropManager Drop] Calling drop_item_from_${S.containerName.toLowerCase()}_slot_to_world. ${S.containerName}ID: ${g}, Slot: ${y}`),S.dropReducer?S.dropReducer(g,y):(console.error(`[useDragDropManager Drop] dropReducer is undefined for ${S.containerName}`),a(`Configuration error: Drop action not found for ${S.containerName.toLowerCase()}.`))):(console.error(`[useDragDropManager Drop] Invalid entityId (ID: ${I}) or slotIndex (Raw: ${m}, Parsed: ${y}) for ${S.containerName}.`),a(`Cannot drop item: Invalid container ID or slot index for ${S.containerName.toLowerCase()}.`))}else console.log(`[useDragDropManager Drop] Calling drop_item (default/player inventory). Item: ${_}, Qty: ${T}`),e.reducers.dropItem(_,T)}catch(S){console.error(`[useDragDropManager Drop] Error calling drop reducer (Source: ${f.sourceContainerType}):`,S),a(`Failed to drop item: ${(S==null?void 0:S.message)||S}`)}return}try{if(f.splitQuantity&&f.splitQuantity>0){const T=f.splitQuantity,w=f.sourceSlot.type,S=p.type,I=BigInt(f.item.instance.instanceId);if(w==="inventory"||w==="hotbar"){let m=null,g=null;if(S==="inventory"||S==="hotbar"){if(m=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),isNaN(m)){a("Invalid target slot index.");return}let y;if(e&&r){const v=Array.from(e.db.inventoryItem.iter());S==="inventory"?y=v.find(C=>C.location.tag==="Inventory"&&C.location.value instanceof Object&&"ownerId"in C.location.value&&"slotIndex"in C.location.value&&C.location.value.ownerId.isEqual(r)&&C.location.value.slotIndex===m):y=v.find(C=>C.location.tag==="Hotbar"&&C.location.value instanceof Object&&"ownerId"in C.location.value&&"slotIndex"in C.location.value&&C.location.value.ownerId.isEqual(r)&&C.location.value.slotIndex===m)}if(y&&f.item.definition.id!==y.itemDefId)return;e.reducers.splitStack(I,T,S,m)}else if(S==="campfire_fuel"){if(m=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),g=p.parentId?Number(p.parentId):null,m===null||isNaN(m)||g===null||isNaN(g)){console.error("[useDragDropManager Drop] Split failed: Invalid target index or missing CampfireID."),a("Invalid target slot or context for campfire split.");return}e.reducers.splitStackIntoCampfire(I,T,g,m)}else if(S==="wooden_storage_box"){if(m=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),g=p.parentId?Number(p.parentId):null,m===null||isNaN(m)||g===null||isNaN(g)){console.error("[useDragDropManager Drop] Split failed: Invalid target index or missing BoxID."),a("Invalid target slot or context for box split.");return}e.reducers.splitStackIntoBox(g,m,I,T)}else if(S==="player_corpse"){m=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);const y=p.parentId?BigInt(p.parentId):null;if(m===null||isNaN(m)||y===null){console.error("[useDragDropManager Drop] Split failed: Invalid target index or missing CorpseID."),a("Invalid target slot or context for corpse split.");return}const v=Number(y);console.log(`[useDragDropManager Drop Split] Calling split_stack_into_corpse (Corpse ${v}, Slot ${m})`),e.reducers.splitStackIntoCorpse(v,m,I,T)}else if(S==="stash"){if(m=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),g=p.parentId?Number(p.parentId):null,m===null||isNaN(m)||g===null||isNaN(g)){console.error("[useDragDropManager Drop] Split failed: Invalid target index or missing StashID."),a("Invalid target slot or context for stash split.");return}console.log(`[useDragDropManager Drop Split] Calling split_stack_into_stash (StashID: ${g}, Slot: ${m}, Item: ${I}, Qty: ${T})`),e.reducers.splitStackIntoStash(g,m,I,T)}else console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from ${w} to ${S}`),a("Cannot split item to that location.")}else if(w==="campfire_fuel"){const m=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,g=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(m===null||isNaN(g)){console.error("[useDragDropManager Drop] Missing CampfireID or SourceIndex for split FROM campfire"),a("Could not determine source campfire slot for split.");return}let y=null;if(S==="inventory"||S==="hotbar"){if(y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),y===null||isNaN(y)){console.error("[useDragDropManager Drop] Invalid target index number for split from campfire."),a("Invalid target slot for split.");return}console.log(`[DEBUG] Splitting from Campfire (${m}, Slot ${g})`),console.log("  Source Item:",f.item),console.log(`  Quantity to Split: ${T}`),console.log(`  Target Slot: ${S}:${y}`);let v;if(e&&r){const C=Array.from(e.db.inventoryItem.iter());S==="inventory"?v=C.find(k=>k.location.tag==="Inventory"&&k.location.value.ownerId.isEqual(r)&&k.location.value.slotIndex===y):v=C.find(k=>k.location.tag==="Hotbar"&&k.location.value.ownerId.isEqual(r)&&k.location.value.slotIndex===y)}v?(console.log("  Target Slot Occupied By:",v),console.log(`    -> Current Quantity: ${v.quantity}`)):console.log("  Target Slot is Empty."),console.log(`  Calling Reducer: splitStackFromCampfire(${m}, ${g}, ${T}, ${S}, ${y})`),e.reducers.splitStackFromCampfire(m,g,T,S,y)}else if(S==="campfire_fuel"){y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);const v=p.parentId?Number(p.parentId):null;if(y===null||isNaN(y)||v===null||isNaN(v)){console.error("[useDragDropManager Drop] Invalid target index or missing CampfireID for intra-campfire split."),a("Invalid target slot for campfire split.");return}if(m!==v){console.warn("[useDragDropManager Drop] Cannot split between different campfires yet."),a("Cannot split between different campfires.");return}console.log(`[useDragDropManager Drop] Calling split_stack_within_campfire: Campfire ${m} from slot ${g} to slot ${y}, amount: ${T}`),e.reducers.splitStackWithinCampfire(m,g,T,y)}else{console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from ${w} to ${S}`),a("Cannot split item to that location.");return}}else if(w==="wooden_storage_box"){const m=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,g=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(m===null||isNaN(g)){console.error("[useDragDropManager Drop] Missing BoxID or SourceIndex for split FROM box"),a("Could not determine source box slot for split.");return}let y=null;if(S==="inventory"||S==="hotbar"){if(y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),y===null||isNaN(y)){console.error("[useDragDropManager Drop] Invalid target index for split from box."),a("Invalid target slot for split.");return}e.reducers.splitStackFromBox(m,g,T,S,y)}else if(S==="wooden_storage_box"){y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);const v=p.parentId?Number(p.parentId):null;if(y===null||isNaN(y)||v===null||isNaN(v)){a("Invalid target box slot.");return}if(m!==v){a("Cannot split between different boxes yet.");return}e.reducers.splitStackWithinBox(m,g,y,T)}else console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from ${w} to ${S}`),a("Cannot split item to that location.")}else if(w==="player_corpse"){const m=f.sourceSlot.parentId?BigInt(f.sourceSlot.parentId):null,g=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(m===null||isNaN(g)){console.error("[useDragDropManager Drop] Missing CorpseID or SourceIndex for split FROM corpse"),a("Could not determine source corpse slot for split.");return}const y=Number(m);if(S==="inventory"||S==="hotbar"){const v=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(v===null||isNaN(v)){console.error("[useDragDropManager Drop] Invalid target index for split from corpse."),a("Invalid target slot for split.");return}console.log(`[useDragDropManager Drop Split] Calling splitStackFromCorpse (Corpse ${y}, Slot ${g} -> ${S} ${v})`),e.reducers.splitStackFromCorpse(y,g,T,S,v)}else if(S==="player_corpse"){const v=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),C=p.parentId?BigInt(p.parentId):null;if(v===null||isNaN(v)||C===null){console.error("[useDragDropManager Drop] Invalid target index or missing Target CorpseID for intra-corpse split."),a("Invalid target slot for corpse split.");return}if(m!==C){console.warn("[useDragDropManager Drop] Cannot split between different corpses yet."),a("Cannot split between different corpses.");return}console.log(`[useDragDropManager Drop Split] Calling splitStackWithinCorpse (Corpse ${y}, Slot ${g} -> Slot ${v})`),e.reducers.splitStackWithinCorpse(y,g,v,T)}else console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from ${w} to ${S}`),a("Cannot split item to that location.");return}else if(w==="stash"){const m=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,g=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(m===null||isNaN(g)){console.error("[useDragDropManager Drop] Missing StashID or SourceIndex for split FROM stash"),a("Could not determine source stash slot for split.");return}let y=null;if(S==="inventory"||S==="hotbar"){if(y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),isNaN(y)){a("Invalid target player slot index for split from stash.");return}console.log(`[useDragDropManager Drop Split] Calling split_stack_from_stash (StashID: ${m}, StashSlot: ${g}, Qty: ${T}, Target: ${S}, TargetSlot: ${y})`),e.reducers.splitStackFromStash(m,g,T,S,y)}else if(S==="stash"){const v=p.parentId?Number(p.parentId):null;if(y=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10),v===null||isNaN(y)){console.error("[useDragDropManager Drop] Invalid target stash slot index or missing StashID for split within stash."),a("Invalid target stash slot for split.");return}if(m!==v){console.warn("[useDragDropManager Drop] Split ignored: Cannot split between different stashes this way."),a("Cannot split item to a different stash container directly.");return}e.reducers.splitStackWithinStash(m,g,y,T)}else console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from ${w} to ${S}`),a("Cannot split item to that location from a stash.")}else console.warn(`[useDragDropManager Drop] Split ignored: Cannot split from source type ${w}`),a("Cannot split from this item source.");return}if(p.type==="inventory"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid inventory index",p.index),a("Invalid slot.");return}if(f.sourceSlot.type==="campfire_fuel"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing CampfireID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveFuelItemToPlayerSlot(w,S,p.type,T)}else if(f.sourceSlot.type==="wooden_storage_box"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing BoxID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveItemFromBox(w,S,p.type,T)}else if(f.sourceSlot.type==="player_corpse"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing CorpseID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveItemFromCorpse(w,S,p.type,T)}else if(f.sourceSlot.type==="stash"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing StashID/SourceIndex for move from stash"),a("Cannot move item: Source context lost.");return}console.log(`[useDragDropManager Drop] Calling move_item_from_stash (StashID: ${w}, Slot: ${S} to inventory ${T})`),e.reducers.moveItemFromStash(w,S,p.type,T)}else e.reducers.moveItemToInventory(_,T)}else if(p.type==="hotbar"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid hotbar index",p.index),a("Invalid slot.");return}if(f.sourceSlot.type==="campfire_fuel"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing CampfireID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveFuelItemToPlayerSlot(w,S,p.type,T)}else if(f.sourceSlot.type==="wooden_storage_box"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing BoxID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveItemFromBox(w,S,p.type,T)}else if(f.sourceSlot.type==="player_corpse"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing CorpseID/SourceIndex"),a("Cannot move item: Source context lost.");return}e.reducers.moveItemFromCorpse(w,S,p.type,T)}else if(f.sourceSlot.type==="stash"){const w=f.sourceSlot.parentId?Number(f.sourceSlot.parentId):null,S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(w===null||isNaN(S)){console.error("[useDragDropManager Drop] Missing StashID/SourceIndex for move from stash"),a("Cannot move item: Source context lost.");return}console.log(`[useDragDropManager Drop] Calling move_item_from_stash (StashID: ${w}, Slot: ${S} to hotbar ${T})`),e.reducers.moveItemFromStash(w,S,p.type,T)}else e.reducers.moveItemToHotbar(_,T)}else if(p.type==="equipment"&&typeof p.index=="string")e.reducers.equipArmorFromDrag(_,p.index);else if(p.type==="campfire_fuel"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid campfire fuel index",p.index),a("Invalid slot.");return}let w=p.parentId?Number(p.parentId):(t==null?void 0:t.type)==="campfire"?Number(t.id):null;if(w===null||isNaN(w)){console.error("[useDragDropManager Drop] Campfire ID could not be determined."),a("Cannot move item: Campfire context lost.");return}if(f.sourceSlot.type==="campfire_fuel"){const S=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(isNaN(S)){console.error("Invalid source campfire fuel index",f.sourceSlot.index),a("Invalid source slot.");return}if(f.sourceSlot.parentId&&Number(f.sourceSlot.parentId)!==w){a("Cannot move fuel between different campfires.");return}e.reducers.moveFuelWithinCampfire(w,S,T)}else e.reducers.addFuelToCampfire(w,T,_)}else if(p.type==="wooden_storage_box"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid box index",p.index),a("Invalid slot.");return}const w=p.parentId?Number(p.parentId):(t==null?void 0:t.type)==="wooden_storage_box"?Number(t.id):null;if(w===null||isNaN(w)){console.error("[useDragDropManager Drop] Box ID could not be determined."),a("Cannot move item: Box context lost.");return}const S=f.sourceSlot.type.trim();if(S==="inventory"||S==="hotbar"||S==="equipment")e.reducers.moveItemToBox(w,T,_);else if(S==="wooden_storage_box"){const I=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(isNaN(I)){console.error("Invalid source box index",f.sourceSlot.index),a("Invalid source slot.");return}if(f.sourceSlot.parentId&&Number(f.sourceSlot.parentId)!==w){a("Cannot move items between different boxes yet.");return}e.reducers.moveItemWithinBox(w,I,T)}else console.warn(`[useDragDropManager Drop] Unhandled move from ${f.sourceSlot.type} to wooden_storage_box`),a("Cannot move item from this location to a box.")}else if(p.type==="player_corpse"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid corpse slot index",p.index),a("Invalid slot.");return}const w=p.parentId?BigInt(p.parentId):(t==null?void 0:t.type)==="player_corpse"?BigInt(t.id):null;if(w===null){console.error("[useDragDropManager Drop] Corpse ID could not be determined for target."),a("Cannot move item: Corpse context lost.");return}const S=Number(w),I=f.sourceSlot.type.trim();if(I==="inventory"||I==="hotbar"||I==="equipment")console.log("[useDragDropManager Drop] Calling moveItemToCorpse (linter error expected)"),e.reducers.moveItemToCorpse(S,T,_);else if(I==="player_corpse"){const m=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(isNaN(m)){console.error("Invalid source corpse index",f.sourceSlot.index),a("Invalid source slot.");return}if((f.sourceSlot.parentId?BigInt(f.sourceSlot.parentId):null)!==w){a("Cannot move items between different corpses yet.");return}e.reducers.moveItemWithinCorpse(S,m,T)}else console.warn(`[useDragDropManager Drop] Unhandled move from ${f.sourceSlot.type} to player_corpse`),a("Cannot move item from this location to a corpse.")}else if(p.type==="stash"){const T=typeof p.index=="number"?p.index:parseInt(p.index.toString(),10);if(isNaN(T)){console.error("Invalid stash index",p.index),a("Invalid slot.");return}const w=p.parentId?Number(p.parentId):(t==null?void 0:t.type)==="stash"?Number(t.id):null;if(w===null||isNaN(w)){console.error("[useDragDropManager Drop] Stash ID could not be determined."),a("Cannot move item: Stash context lost.");return}const S=f.sourceSlot.type.trim();if(S==="inventory"||S==="hotbar"||S==="equipment")console.log(`[useDragDropManager Drop] Calling move_item_to_stash (StashID: ${w}, Slot: ${T}, Item: ${_})`),e.reducers.moveItemToStash(w,T,_);else if(S==="stash"){const I=typeof f.sourceSlot.index=="number"?f.sourceSlot.index:parseInt(f.sourceSlot.index.toString(),10);if(isNaN(I)){console.error("Invalid source stash index",f.sourceSlot.index),a("Invalid source slot.");return}if(f.sourceSlot.parentId&&Number(f.sourceSlot.parentId)!==w){a("Cannot move items between different stashes yet.");return}console.log(`[useDragDropManager Drop] Calling move_item_within_stash (StashID: ${w}, FromSlot: ${I}, ToSlot: ${T})`),e.reducers.moveItemWithinStash(w,I,T)}else console.warn(`[useDragDropManager Drop] Unhandled move from ${f.sourceSlot.type} to stash`),a("Cannot move item from this location to a stash.")}}catch(T){console.error("[useDragDropManager Drop] Error handling drop:",T),a(`Failed to handle drop: ${(T==null?void 0:T.message)||T}`)}},[e,t,r]);return{draggedItemInfo:i,dropError:s,handleItemDragStart:u,handleItemDrop:d}},Qz=()=>{const[e,t]=b.useState(null),r=b.useCallback(i=>{t(i)},[]);return{interactingWith:e,handleSetInteractingWith:r}};function Jz(e,t,r,i){var n=this,s=b.useRef(null),a=b.useRef(0),l=b.useRef(0),u=b.useRef(null),d=b.useRef([]),p=b.useRef(),f=b.useRef(),_=b.useRef(e),T=b.useRef(!0);_.current=e;var w=typeof window<"u",S=!t&&t!==0&&w;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var I=!!(r=r||{}).leading,m=!("trailing"in r)||!!r.trailing,g="maxWait"in r,y="debounceOnServer"in r&&!!r.debounceOnServer,v=g?Math.max(+r.maxWait||0,t):null;b.useEffect(function(){return T.current=!0,function(){T.current=!1}},[]);var C=b.useMemo(function(){var k=function(Y){var B=d.current,$=p.current;return d.current=p.current=null,a.current=Y,l.current=l.current||Y,f.current=_.current.apply($,B)},M=function(Y,B){S&&cancelAnimationFrame(u.current),u.current=S?requestAnimationFrame(Y):setTimeout(Y,B)},A=function(Y){if(!T.current)return!1;var B=Y-s.current;return!s.current||B>=t||B<0||g&&Y-a.current>=v},z=function(Y){return u.current=null,m&&d.current?k(Y):(d.current=p.current=null,f.current)},U=function Y(){var B=Date.now();if(I&&l.current===a.current&&F(),A(B))return z(B);if(T.current){var $=t-(B-s.current),H=g?Math.min($,v-(B-a.current)):$;M(Y,H)}},F=function(){},j=function(){if(w||y){var Y=Date.now(),B=A(Y);if(d.current=[].slice.call(arguments),p.current=n,s.current=Y,B){if(!u.current&&T.current)return a.current=s.current,M(U,t),I?k(s.current):f.current;if(g)return M(U,t),k(s.current)}return u.current||M(U,t),f.current}};return j.cancel=function(){u.current&&(S?cancelAnimationFrame(u.current):clearTimeout(u.current)),a.current=0,d.current=s.current=p.current=u.current=null},j.isPending=function(){return!!u.current},j.flush=function(){return u.current?z(Date.now()):f.current},j},[I,g,t,v,m,S,w,y,i]);return C}const fg=1200,yT=800,ba=1200,Zz=(fg/2)**2,eF=750;function tF(){const{userProfile:e,isAuthenticated:t,isLoading:r,loginRedirect:i}=Au(),{connection:n,dbIdentity:s,isConnected:a,isLoading:l,error:u,registerPlayer:d}=M0(),{updatePlayerPosition:p,setSprinting:f,jump:_,updateViewport:T}=D0(),[w,S]=Kz(n),{placementInfo:I,placementError:m}=w,{cancelPlacement:g,startPlacement:y}=S,{interactingWith:v,handleSetInteractingWith:C}=Qz(),{draggedItemInfo:k,dropError:M,handleItemDragStart:A,handleItemDrop:z}=Gz({connection:n,interactingWith:v,playerIdentity:s}),[U,F]=b.useState(!1),[j,Y]=b.useState(null),[B,$]=b.useState(!1),[H,q]=b.useState(!1),[N,L]=b.useState(null),X=b.useRef(null),te=b.useRef(null),{players:ge,trees:ue,clouds:ie,stones:J,campfires:W,mushrooms:G,corns:Q,pumpkins:K,hemps:x,itemDefinitions:E,inventoryItems:re,worldState:Z,activeEquipments:V,droppedItems:oe,woodenStorageBoxes:Me,recipes:pt,craftingQueueItems:dt,localPlayerRegistered:fe,messages:ne,playerPins:pe,activeConnections:be,sleepingBags:Te,playerCorpses:ye,stashes:xe,activeConsumableEffects:Fe}=$0({connection:n,cancelPlacement:g,viewport:N}),rt=b.useRef(g);b.useEffect(()=>{rt.current=g},[g]);const Ee=b.useRef(I);b.useEffect(()=>{Ee.current=I},[I]);const Qe=Jz(he=>{T(he.minX,he.minY,he.maxX,he.maxY),X.current={x:(he.minX+he.maxX)/2,y:(he.minY+he.maxY)/2}},eF);b.useEffect(()=>{const he=n!=null&&n.identity?ge.get(n.identity.toHexString()):void 0;if(te.current=he,!he||he.isDead){N&&L(null);return}const qe=he.positionX,He=he.positionY,Ke=X.current;if(!Ke||(qe-Ke.x)**2+(He-Ke.y)**2>Zz){const ve=qe-fg/2-ba,ke=qe+fg/2+ba,Ue=He-yT/2-ba,Ne=He+yT/2+ba,at={minX:ve,minY:Ue,maxX:ke,maxY:Ne};L(at),Qe(at)}},[ge,n==null?void 0:n.identity,Qe]);const At=b.useCallback(he=>{if(Y(null),!t||!a){console.error("Cannot register player: Not authenticated or not connected to SpacetimeDB."),Y("Connection error, cannot register.");return}if(!he||!he.trim()){Y("Username cannot be empty.");return}F(!0),d(he)},[d,t,a]);b.useEffect(()=>{const he=qe=>{Ee.current||qe.preventDefault()};return window.addEventListener("contextmenu",he),()=>{window.removeEventListener("contextmenu",he)}},[]),b.useEffect(()=>{const he=He=>{H||He.key==="ContextMenu"&&!Ee.current&&He.preventDefault()},qe=He=>{Ee.current||He.preventDefault()};return window.addEventListener("keydown",he),window.addEventListener("contextmenu",qe),()=>{window.removeEventListener("keydown",he),window.removeEventListener("contextmenu",qe)}},[H]),b.useEffect(()=>{fe&&U&&F(!1)},[fe,U]),b.useEffect(()=>{const he=te.current;if(!he||!v)return;let qe=null,He=null;switch(v.type){case"wooden_storage_box":const Ke=Me.get(v.id.toString());Ke&&(qe={x:Ke.posX,y:Ke.posY},He=TE);break;case"campfire":const Re=W.get(v.id.toString());Re&&(qe={x:Re.posX,y:Re.posY},He=dh);break;case"stash":const ve=xe.get(v.id.toString());ve&&(qe={x:ve.posX,y:ve.posY},He=YE);break;case"player_corpse":const ke=ye.get(v.id.toString());ke&&(qe={x:ke.posX,y:ke.posY},He=iR);break;default:return}if(qe&&He!==null){const Ke=he.positionX-qe.x,Re=he.positionY-qe.y;Ke*Ke+Re*Re>He&&C(null)}},[v,ge,Me,W,xe,ye,C]);const nt=r||t&&l,Nt=u||j||m||M,Be=s?ge.get(s.toHexString())??null:null;return P.jsxs("div",{className:"App",style:{backgroundColor:"#111"},children:[Nt&&P.jsx("div",{className:"error-message",children:Nt}),nt&&P.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",fontFamily:'"Press Start 2P", cursive'},children:r?"Authenticating...":"Connecting to Server..."}),!nt&&!t&&P.jsx(Ny,{handleJoinGame:i,loggedInPlayer:null}),!nt&&t&&!fe&&P.jsx(Ny,{handleJoinGame:At,loggedInPlayer:null}),!nt&&t&&fe&&Be&&(()=>{const he=s?s.toHexString():void 0;return P.jsx(qz,{players:ge,trees:ue,clouds:ie,stones:J,campfires:W,mushrooms:G,hemps:x,corns:Q,pumpkins:K,droppedItems:oe,woodenStorageBoxes:Me,sleepingBags:Te,playerCorpses:ye,stashes:xe,inventoryItems:re,itemDefinitions:E,worldState:Z,activeEquipments:V,activeConnections:be,recipes:pt,craftingQueueItems:dt,localPlayerId:he,playerIdentity:s,connection:n,placementInfo:I,placementActions:S,placementError:m,startPlacement:y,cancelPlacement:g,interactingWith:v,handleSetInteractingWith:C,playerPins:pe,draggedItemInfo:k,onItemDragStart:A,onItemDrop:z,updatePlayerPosition:p,callJumpReducer:_,callSetSprintingReducer:f,isMinimapOpen:B,setIsMinimapOpen:$,isChatting:H,setIsChatting:q,messages:ne,activeConsumableEffects:Fe})})()]})}function rF(){return P.jsx(XI,{children:P.jsx(Vz,{children:P.jsx(tF,{})})})}kp.createRoot(document.getElementById("root")).render(P.jsx(rF,{}));
